---
title:  vue 3.0 åŸºç¡€çŸ¥è¯†
date: 2022-06-17 08:23:10
tags: åŸºç¡€çŸ¥è¯†
categories: vue
---
### jsç»„åˆå¼api

<!--more-->

```html
<template>
	<h1 @click="increase">
        {{ count }}
    </h1>
    <h2>
        {{ double }}
    </h2>
    <p>
        {{data.count}}
        {{data.double}}
    </p>
</template>

<script lang="ts">
    // å¯ä»¥å°†ä¸šåŠ¡é€»è¾‘æ•´åˆåˆ°ä¸€èµ·ï¼Œä¸å†åƒvue2.0 æ•°æ®ï¼Œä¸šä½™é€»è¾‘åˆ†æ•£åœ¨å¤šå—åŒºåŸŸã€‚ä¾¿äºä»£ç é˜…è¯»ç†è§£
    import { ref, computed, reactive, toRefs } from 'vue'
    // ref ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹æ•°æ®çš„å“åº”å¼å°è£…
    // reactive ç”¨äºå¼•ç”¨ç±»å‹æ•°æ®çš„å“åº”å¼å°è£…
    // toRefs å°†æ™®é€šæ•°æ®ç±»å‹è½¬åŒ–ä¸ºå“åº”å¼æ•°æ®ç±»å‹
    interface DataProps {
        count: number;
        double: number;
        increase: () => void;
    }
	export default {
        name: 'App',
        setup() {
            // eg1
            const increase = ()=> {
                count ++
            }
            const count = ref(0);
            const double = computed(()=> {
                return count * 2
            }) 
            // eg2
            const data = reactive({
             	count: 0,
                incrase: ()=> data.count ++,
                double: computed(()=> data.count * 2) //è¿™é‡Œä¼šçˆ†çº¢
            })
            
            return {
                count,
                double,
                increase,
                
                data
            }
        }
    }
    
</script>




[æ³¨1]ä½¿ç”¨ ref è¿˜æ˜¯ reactive å¯ä»¥é€‰æ‹©è¿™æ ·çš„å‡†åˆ™

ç¬¬ä¸€ï¼Œå°±åƒåˆšæ‰çš„åŸç”Ÿ javascript çš„ä»£ç ä¸€æ ·ï¼Œåƒä½ å¹³å¸¸å†™æ™®é€šçš„ js ä»£ç é€‰æ‹©åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ä¸€æ ·æ¥é€‰æ‹©æ˜¯ä½¿ç”¨ ref è¿˜æ˜¯ reactiveã€‚
ç¬¬äºŒï¼Œæ‰€æœ‰åœºæ™¯éƒ½ä½¿ç”¨ reactiveï¼Œä½†æ˜¯è¦è®°å¾—ä½¿ç”¨ toRefs ä¿è¯ reactive å¯¹è±¡å±æ€§ä¿æŒå“åº”æ€§ã€‚
```

### setupæ¨¡å—åŒ–å¼€å‘

```js
// useClickOutside.ts 
// ç”¨æ¥åˆ¤æ–­ å½“å‰ç‚¹å‡»äº‹ä»¶æºçš„ä½ç½®æ˜¯å¦ä½äºæŒ‡å®šå…ƒç´ å¤–
import { Ref, ref, onMounted, onUnmounted } from 'vue'

export default function (refElement: Ref<null | HTMLElement> ) {
    const isClickOutside = ref(false)
    const handler = function (e: MouseEvent) {
        if(refElement.value) {
            // target ä¸åœ¨dropDownå…ƒç´ å†…ï¼Œå¹¶ä¸”ä¸‹æ‹‰æ¡†ä¸æ˜¯å±•å¼€çŠ¶æ€ å°±åˆ¤å®šæ˜¯ç‚¹å‡»äº† é¡µé¢å…¶ä»–ä½ç½®ï¼Œå¹¶å…³é—­ä¸‹æ‹‰
            if(!refElement.value.contains(e.target as HTMLElement)) {
                isClickOutside.value = true
            } else {
                isClickOutside.value = false
            }
        }
    }
    onMounted(() => {
        document.addEventListener('click', handler)
    })
    onUnmounted(() => {
        document.removeEventListener('click', handler)
    })

    return isClickOutside
}


vue3 è¿™ç§å®ç°æ–¹å¼çš„ä¼˜ç‚¹

ç¬¬ä¸€ï¼šå®ƒå¯ä»¥æ¸…æ¥šçš„çŸ¥é“ xy è¿™ä¸¤ä¸ªå€¼çš„æ¥æºï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä»–ä»¬æ¥è‡ª useMouseTracker çš„è¿”å›ï¼Œé‚£ä¹ˆå®ƒä»¬å°±æ˜¯ç”¨æ¥è¿½è¸ªé¼ æ ‡ä½ç½®çš„å€¼ã€‚
ç¬¬äºŒï¼šæˆ‘ä»¬å¯ä»¥xy å¯ä»¥è®¾ç½®ä»»ä½•åˆ«åï¼Œè¿™æ ·å°±é¿å…äº†å‘½åå†²çªçš„é£é™©ã€‚
ç¬¬ä¸‰ï¼šè¿™æ®µé€»è¾‘å¯ä»¥è„±ç¦»ç»„ä»¶å­˜åœ¨ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±å’Œç»„ä»¶çš„å®ç°æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ·»åŠ ä»»ä½•ç»„ä»¶å®ç°ç›¸åº”çš„åŠŸèƒ½ã€‚åªæœ‰é€»è¾‘ä»£ç åœ¨é‡Œé¢ï¼Œä¸éœ€è¦æ¨¡ç‰ˆ
```



### watchä¾¦å¬æ•°æ®å˜åŒ–

> `watch` çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸åŒå½¢å¼çš„â€œæ•°æ®æºâ€ï¼šå®ƒå¯ä»¥æ˜¯ä¸€ä¸ª ref (åŒ…æ‹¬è®¡ç®—å±æ€§)ã€ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€ä¸€ä¸ª getter å‡½æ•°ã€æˆ–å¤šä¸ªæ•°æ®æºç»„æˆçš„æ•°ç»„ã€‚

```js
// watch ç®€å•åº”ç”¨
watch(data, () => {
  document.title = 'updated ' + data.count
})
// watch çš„ä¸¤ä¸ªå‚æ•°ï¼Œä»£è¡¨æ–°çš„å€¼å’Œæ—§çš„å€¼
watch(refData.count, (newValue, oldValue) => {
  console.log('old', oldValue)
  console.log('new', newValue)
  document.title = 'updated ' + data.count
})

// watch å¤šä¸ªå€¼ï¼Œè¿”å›çš„ä¹Ÿæ˜¯å¤šä¸ªå€¼çš„æ•°ç»„
watch([greetings, data], (newValue, oldValue) => {
  console.log('old', oldValue)
  console.log('new', newValue)
  document.title = 'updated' + greetings.value + data.count
})

// ä½¿ç”¨ getter çš„å†™æ³• watch reactive å¯¹è±¡ä¸­çš„ä¸€é¡¹
watch([greetings, () => data.count], (newValue, oldValue) => {
  console.log('old', oldValue)
  console.log('new', newValue)
  document.title = 'updated' + greetings.value + data.count
})

// è®¿é—®ç›‘å¬çš„å€¼æ—¶ï¼Œ éœ€è¦ xxx.value
```

ä¸èƒ½ç›´æ¥ä¾¦å¬å“åº”å¼å¯¹è±¡çš„å±æ€§å€¼

```js
const obj = reactive({ count: 0 })

// é”™è¯¯ï¼Œå› ä¸º watch() å¾—åˆ°çš„å‚æ•°æ˜¯ä¸€ä¸ª number
watch(obj.count, (count) => {
  console.log(`count is: ${count}`)
})
```

éœ€è¦æä¾›è¯¥å‡½æ•°çš„ getter å‡½æ•°

```js
// æä¾›ä¸€ä¸ª getter å‡½æ•°
watch(
  () => obj.count,
  (count) => {
    console.log(`count is: ${count}`)
  }
)
```

ç›´æ¥ç»™ `watch()` ä¼ å…¥ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¼šéšå¼åœ°åˆ›å»ºä¸€ä¸ªæ·±å±‚ä¾¦å¬å™¨â€”â€”è¯¥å›è°ƒå‡½æ•°åœ¨æ‰€æœ‰åµŒå¥—çš„å˜æ›´æ—¶éƒ½ä¼šè¢«è§¦å‘ï¼Œä¸Šè¾¹ä¾‹å­ä¸­åŠ ä¸Š { deep: true } ç¬¬ä¸‰å‚æ•°ä¹Ÿæ˜¯è¿™ä¸ªæ•ˆæœ

```js
// 
watch(
  obj,
  (count) => {
    console.log(`count is: ${count}`)
  }
)
obj.count++
```

#### `watchEffect()`å‡½æ•°

> å¦‚æœæˆ‘ä»¬æƒ³åœ¨æŸä¸ªç†Ÿæ‚‰å˜åŒ–åå†æ‰§è¡ŒæŸä¸ªæ“ä½œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°

```js
watchEffect(async () => {
  const response = await fetch(
    `https://jsonplaceholder.typicode.com/todos/${todoId.value}`
  )
  data.value = await response.json()
})
```

#### å¦‚æœæƒ³åœ¨ä¾¦å¬å™¨å›è°ƒä¸­èƒ½è®¿é—®è¢« Vue æ›´æ–°**ä¹‹å**çš„ DOMï¼Œä½ éœ€è¦æŒ‡æ˜ `flush: 'post'` é€‰é¡¹

```js
watch(source, callback, {
  flush: 'post'
})

watchEffect(callback, {
  flush: 'post'
})
watchPostEffect(() => {
  /* åœ¨ Vue æ›´æ–°åæ‰§è¡Œ */
})
```

#### åœæ­¢ä¾¦å¬

> ä¸€èˆ¬æƒ…å†µå®Œå…¨ä¸è¦å…³å¿ƒè¿™ä¸ªï¼Œå®ƒä¼šæ ¹æ®å®¿ä¸»ç¤ºä¾‹è‡ªåŠ¨å¸è½½ã€‚ä½†ä¹Ÿæœ‰ä¾‹å¤–æƒ…å†µ

```js
// ...è¿™ä¸ªåˆ™ä¸ä¼šï¼ä¸€èˆ¬ä¹Ÿä¸ä¼šè¿™ä¹ˆç”¨
setTimeout(() => {
  watchEffect(() => {})
}, 100)

// æ‰‹åŠ¨å…³é—­
const unwatch = watchEffect(() => {})

// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶
unwatch()
```



### è®¡ç®—å±æ€§

> æœ€ä½³å®è·µï¼š
>
> 1. ### Getter ä¸åº”æœ‰å‰¯ä½œç”¨
>
> 2. ### é¿å…ç›´æ¥ä¿®æ”¹è®¡ç®—å±æ€§å€¼

```js
// æ™®é€šè®¡ç®—å±æ€§
const now = computed(() => Date.now())

// å¯å†™è®¡ç®—å±æ€§
<script setup>
import { ref, computed } from 'vue'

const firstName = ref('John')
const lastName = ref('Doe')

const fullName = computed({
  // getter
  get() {
    return firstName.value + ' ' + lastName.value
  },
  // setter
  set(newValue) {
    // æ³¨æ„ï¼šæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯è§£æ„èµ‹å€¼è¯­æ³•
    [firstName.value, lastName.value] = newValue.split(' ')
  }
})
</script>
```



### ç”Ÿå‘½å‘¨æœŸå‡½æ•°

```html
// mapping vue2 -> vue3

åœ¨ setup ä¸­ä½¿ç”¨çš„ hook åç§°å’ŒåŸæ¥ç”Ÿå‘½å‘¨æœŸçš„å¯¹åº”å…³ç³»

beforeCreate -> ä¸éœ€è¦
created -> ä¸éœ€è¦

beforeMount -> onBeforeMount
mounted -> onMounted
beforeUpdate -> onBeforeUpdate
updated -> onUpdated
beforeUnmount -> onBeforeUnmount
unmounted -> onUnmounted
// é”™è¯¯æ•è·æ—¶
errorCaptured -> onErrorCaptured
// è°ƒè¯•ç”¨çš„
renderTracked -> onRenderTracked
renderTriggered -> onRenderTriggered

<script>
	setup() {
        setup() {
          onMounted(() => {
            console.log('mounted')
          })
          onUpdated(() => {
            console.log('updated')
          })
          onRenderTriggered((event) => {
            console.log(event)
          })
        }
    }
</script>
```

### defineComponent

```html
defineComponent åŒ…è£¹çš„ç»„ä»¶èƒ½å¤Ÿæ˜¾ç¤ºè¯­æ³•æç¤ºï¼Œæ›´å¥½çš„ä¸ºtsæœåŠ¡

<script lang="ts">
	import { defineComponent } from 'vue'
    const component = defineComponent({
        name: 'test',
        props: {
            msg: {
                type: String,
                required: true
            },
            setup() {
                
            }
        }
    })
</script>
```

### è®¿é—®æ¨¡æ¿å¼•ç”¨

> å¦‚æœä½ éœ€è¦ä¾¦å¬ä¸€ä¸ªæ¨¡æ¿å¼•ç”¨ ref çš„å˜åŒ–ï¼Œç¡®ä¿è€ƒè™‘åˆ°å…¶å€¼ä¸º `null` çš„æƒ…å†µ

```js
<script setup>
import { ref, onMounted } from 'vue'

// å£°æ˜ä¸€ä¸ª ref æ¥å­˜æ”¾è¯¥å…ƒç´ çš„å¼•ç”¨
// å¿…é¡»å’Œæ¨¡æ¿é‡Œçš„ ref åŒå
const input = ref(null)

onMounted(() => {
  input.value.focus()
})
</script>

<template>
  <input ref="input" />
</template>
```

çˆ¶ç»„ä»¶ï¼Œè®¿é—®å­æ¨¡ç‰ˆ

> å¦‚æœä¸€ä¸ªå­ç»„ä»¶ä½¿ç”¨çš„æ˜¯é€‰é¡¹å¼ API æˆ–æ²¡æœ‰ä½¿ç”¨ `<script setup>`ï¼Œè¢«å¼•ç”¨çš„ç»„ä»¶å®ä¾‹å’Œè¯¥å­ç»„ä»¶çš„ `this` å®Œå…¨ä¸€è‡´ï¼Œè¿™æ„å‘³ç€çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„æ¯ä¸€ä¸ªå±æ€§å’Œæ–¹æ³•éƒ½æœ‰å®Œå…¨çš„è®¿é—®æƒã€‚

<script setup> çš„ç»„ä»¶æ˜¯é»˜è®¤ç§æœ‰çš„ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶æ— æ³•è®¿é—®åˆ°ä¸€ä¸ªä½¿ç”¨äº† <script setup> çš„å­ç»„ä»¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œé™¤éå­ç»„ä»¶åœ¨å…¶ä¸­é€šè¿‡ defineExpose å®æ˜¾å¼æš´éœ²ï¼š

```js
<script setup>
import { ref } from 'vue'

const a = 1
const b = ref(2)

defineExpose({
  a,
  b
})
</script>
```

å½“çˆ¶ç»„ä»¶é€šè¿‡æ¨¡æ¿å¼•ç”¨è·å–åˆ°äº†è¯¥ç»„ä»¶çš„å®ä¾‹æ—¶ï¼Œå¾—åˆ°çš„å®ä¾‹ç±»å‹ä¸º `{ a: number, b: number }` (ref éƒ½ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œå’Œä¸€èˆ¬çš„å®ä¾‹ä¸€æ ·)ã€‚

### ç»„ä»¶

é€šè¿‡ `<script setup>`ï¼Œå¯¼å…¥çš„ç»„ä»¶éƒ½åœ¨æ¨¡æ¿ä¸­ç›´æ¥å¯ç”¨ã€‚

```js
<script setup>
import ButtonCounter from './ButtonCounter.vue'
</script>

<template>
  <h1>Here is a child component!</h1>
  <ButtonCounter />
</template>
```

#### ç»„ä»¶ä¼ å€¼ props

```vue
 <!-- å¼¹çª— -->
<m-popup v-model="isShow">
    <menu-vue :data="CATEGORY_NOMAR_DATA" @onItemClick="onItemClick"/>
</m-popup>
```

#### ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª prop

```js
const post = {
  id: 1,
  title: 'My Journey with Vue'
}
<BlogPost v-bind="post" />
// ç­‰ä»·äº
<BlogPost :id="post.id" :title="post.title" />
```



#### å­ç»„ä»¶æ¥æ”¶å‚æ•°

```vue
// menu-vue

<template>
    <div class=" h-8[80vh] flex flex-col bg-white">
        <h2 class=" my-1 text-xl px-1">æ‰€æœ‰åˆ†ç±»</h2>
        <ul>
            <li 
                v-for="item in data"
                :key="item.id"
                @click="$emit('onItemClick', item)"
                class=" text-sm my-1 flex items-center indent-1 hover:bg-orange-300"
            >
                {{item.name}}
            </li>
        </ul>
    </div>
</template>

<script setup>
// æ¥æ”¶çš„å±æ€§
defineProps({
    onItemClick: {
        type: Function,
    },
    data: {
        type: Array,
        required: true
    }
})
// å¯¹ä¼ å…¥çš„äº‹ä»¶è¿›è¡Œæ‰‹åŠ¨æ³¨å†Œ, æ”¾å›ä¸€ä¸ªç­‰åŒäº $emit æ–¹æ³•çš„ emit å‡½æ•°
const emit = defineEmits(['onItemClick'])
</script>
```

#### é€šè¿‡is å±æ€§ æ¨¡æ‹Ÿå…ƒç´ 

> blog-post-row ç»„ä»¶åœ¨table æ ‡ç­¾ä¸­æ— æ³•è¯†åˆ«ï¼Œæ— æ³•æ¸²æŸ“ï¼Œ

```vue
<table>
  <blog-post-row></blog-post-row>
</table>
```

è§£å†³æ–¹æ¡ˆ

```vue
<table>
  <tr is="vue:blog-post-row"></tr>
</table>
```

#### å±æ€§ç©¿é€(ç»§æ‰¿)

> åƒ class,style,äº‹ä»¶ç­‰å±æ€§æ˜¯ä¼šç»§æ‰¿çš„ï¼Œä»–ä»¬ä¼šä½œç”¨åœ¨ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šï¼Œå¦‚æœæ ¹å…ƒç´ æ˜¯å¦ä¸€ä¸ªç»„ä»¶åˆ™ä½œç”¨äºå¦ä¸€ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ã€‚è‹¥è¦å–æ¶ˆè¿™ç§é»˜è®¤çš„ç»§æ‰¿ï¼Œéœ€é…ç½®å¦‚ä¸‹ï¼š

å¦‚æœä½ ä½¿ç”¨äº† `<script setup>`ï¼Œä½ éœ€è¦ä¸€ä¸ªé¢å¤–çš„ `<script>` å—æ¥ä¹¦å†™è¿™ä¸ªé€‰é¡¹å£°æ˜ï¼š

```js
<script>
// ä½¿ç”¨æ™®é€šçš„ <script> æ¥å£°æ˜é€‰é¡¹
export default {
  inheritAttrs: false
}
</script>

<script setup>
// ...setup éƒ¨åˆ†é€»è¾‘
</script>
```

å®ç°ç©¿é€å±æ€§è½¬ç§»

> é€šè¿‡å±æ€§ç©¿é€ä¼ å…¥çš„å±æ€§ï¼Œéƒ½å¯ä»¥åœ¨ $attr å±æ€§ä¸Šè·å–ã€‚

```vue
<div class="btn-wrapper">
  <button class="btn" v-bind="$attrs">click me</button>
</div>
```

å¤šæ ¹èŠ‚ç‚¹é»˜è®¤ä¸ä¼šæœ‰ç»§æ‰¿ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®š

```vue
<header>...</header>
<main v-bind="$attrs">...</main>
<footer>...</footer>
```

#### js ä¸­è®¿é—®ç©¿é€å±æ€§

```js
// æ–¹å¼1
<script setup>
import { useAttrs } from 'vue'

const attrs = useAttrs()
</script>

// æ–¹å¼ 2
export default {
  setup(props, ctx) {
    // é€ä¼  attribute è¢«æš´éœ²ä¸º ctx.attrs
    console.log(ctx.attrs)
  }
}
```

> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™é‡Œçš„ `attrs` å¯¹è±¡æ€»æ˜¯åæ˜ ä¸ºæœ€æ–°çš„é€ä¼  attributeï¼Œä½†å®ƒå¹¶ä¸æ˜¯å“åº”å¼çš„ (è€ƒè™‘åˆ°æ€§èƒ½å› ç´ )ã€‚ä½ ä¸èƒ½é€šè¿‡ä¾¦å¬å™¨å»ç›‘å¬å®ƒçš„å˜åŒ–ã€‚å¦‚æœä½ éœ€è¦å“åº”æ€§ï¼Œå¯ä»¥ä½¿ç”¨ propã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `onUpdated()` ä½¿å¾—åœ¨æ¯æ¬¡æ›´æ–°æ—¶ç»“åˆæœ€æ–°çš„ `attrs` æ‰§è¡Œå‰¯ä½œç”¨ã€‚

#### ç»„ä»¶å¤ç”¨

> å°†é€»è¾‘å¯ä»¥ç»„åˆå¼å‡½æ•°çš„å½¢å¼æå–åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­

```js
// mouse.js
import { ref, onMounted, onUnmounted } from 'vue'

// æŒ‰ç…§æƒ¯ä¾‹ï¼Œç»„åˆå¼å‡½æ•°åä»¥â€œuseâ€å¼€å¤´
export function useMouse() {
  // è¢«ç»„åˆå¼å‡½æ•°å°è£…å’Œç®¡ç†çš„çŠ¶æ€
  const x = ref(0)
  const y = ref(0)

  // ç»„åˆå¼å‡½æ•°å¯ä»¥éšæ—¶æ›´æ”¹å…¶çŠ¶æ€ã€‚
  function update(event) {
    x.value = event.pageX
    y.value = event.pageY
  }

  // ä¸€ä¸ªç»„åˆå¼å‡½æ•°ä¹Ÿå¯ä»¥æŒ‚é åœ¨æ‰€å±ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸Š
  // æ¥å¯åŠ¨å’Œå¸è½½å‰¯ä½œç”¨
  onMounted(() => window.addEventListener('mousemove', update))
  onUnmounted(() => window.removeEventListener('mousemove', update))

  // é€šè¿‡è¿”å›å€¼æš´éœ²æ‰€ç®¡ç†çš„çŠ¶æ€
  return { x, y }
}
```



ä½¿ç”¨:

```js
<script setup>
import { useMouse } from './mouse.js'

const { x, y } = useMouse()
</script>

<template>Mouse position is at: {{ x }}, {{ y }}</template>
```

æ·»åŠ DOMå’Œæ¸…é™¤DOMé€»è¾‘

```js
// event.js
import { onMounted, onUnmounted } from 'vue'

export function useEventListener(target, event, callback) {
  // å¦‚æœä½ æƒ³çš„è¯ï¼Œ
  // ä¹Ÿå¯ä»¥ç”¨å­—ç¬¦ä¸²å½¢å¼çš„ CSS é€‰æ‹©å™¨æ¥å¯»æ‰¾ç›®æ ‡ DOM å…ƒç´ 
  onMounted(() => target.addEventListener(event, callback))
  onUnmounted(() => target.removeEventListener(event, callback))
}
```

ä¿®æ”¹åï¼š

è¿”å›å€¼åº”è¯¥å§‹ç»ˆä½¿ç”¨ ref è¿™æ ·å¯ä»¥ç¡®ä¿ç»“æ„è¿”å›å€¼ä¾ç„¶æ˜¯å“åº”å¼çš„æ•°æ®

```js
// mouse.js
import { ref } from 'vue'
import { useEventListener } from './event'

export function useMouse() {
  const x = ref(0)
  const y = ref(0)

  useEventListener(window, 'mousemove', (event) => {
    x.value = event.pageX
    y.value = event.pageY
  })

  return { x, y }
}
```



ä¼ é€’å‚æ•°é—®é¢˜

å…¼å®¹ä¼ å…¥ æ™®é€šç±»å‹äºä¸å“åº”å¼ æ•°æ®

```js
import { unref } from 'vue'

function useFeature(maybeRef) {
  // è‹¥ maybeRef ç¡®å®æ˜¯ä¸€ä¸ª refï¼Œå®ƒçš„ .value ä¼šè¢«è¿”å›
  // å¦åˆ™ï¼ŒmaybeRef ä¼šè¢«åŸæ ·è¿”å›
  const value = unref(maybeRef)
  
  
}
```

#### ç»„ä»¶ä¸Šçš„ ref

> ä½¿ç”¨äº† `<script setup>` çš„ç»„ä»¶æ˜¯**é»˜è®¤ç§æœ‰**çš„ï¼šä¸€ä¸ªçˆ¶ç»„ä»¶æ— æ³•è®¿é—®åˆ°ä¸€ä¸ªä½¿ç”¨äº† `<script setup>` çš„å­ç»„ä»¶ä¸­çš„ä»»ä½•ä¸œè¥¿ï¼Œé™¤éå­ç»„ä»¶åœ¨å…¶ä¸­é€šè¿‡ `defineExpose` å®æ˜¾å¼æš´éœ²ï¼š

```js
<script setup>
import { ref } from 'vue'

const a = 1
const b = ref(2)

// åƒ defineExpose è¿™æ ·çš„ç¼–è¯‘å™¨å®ä¸éœ€è¦å¯¼å…¥
defineExpose({
  a,
  b
})
</script>
```



### æ’æ§½

> å¯åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <slot> </slot> ä»£è¡¨æ’æ§½ï¼Œç»„ä»¶æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ä¼šè¢«æ›¿æ¢åˆ°slot ä½ç½®ã€‚åœ¨ slot æ ‡ç­¾ä¸­çš„å†…å®¹ä¼šè¢«å½“åšé»˜è®¤å†…å®¹ï¼Œå³æ²¡æœ‰ä¸œè¥¿æ’å…¥æ—¶ä½¿ç”¨

#### å…·åæ’æ§½

â€‹	ä½¿ç”¨å¤šä¸ªæ’æ§½æ—¶ç”¨åˆ°

```vue
// BaseLayout
<div class="container">
  <header>
    <slot name="header"></slot>
  </header>
  <main>
    <slot></slot>
  </main>
  <footer>
    <slot name="footer"></slot>
  </footer>
</div>
```

ä½¿ç”¨æ—¶ï¼š

é¡¶å±‚éå…·åæ’æ§½çš„å†…å®¹ï¼ˆæ¯”å¦‚ä¸‹é¢çš„ p æ ‡ç­¾ï¼‰ï¼Œä¼šè¢«è§†ä¸ºé»˜è®¤æ’æ§½å†…å®¹

```vue
<BaseLayout>
  <template v-slot:header>
    <!-- header æ’æ§½çš„å†…å®¹æ”¾è¿™é‡Œ -->
  </template>
  <p>rua~rua~rua~</p>
</BaseLayout>


v-slot æœ‰å¯¹åº”çš„ç®€å†™ #
<template #header>

<template #default>
  <p>A paragraph for the main content.</p>
  <p>And another one.</p>
</template>
```

#### åŠ¨æ€å…·åæ’æ§½

å¯ä»¥åŠ¨æ€ä¿®æ”¹ dynamicSlotName ä¸º header,default,footer æ¥åˆ‡æ¢æ’æ§½å†…å®¹

```vue
<base-layout>
  <template v-slot:[dynamicSlotName]>
    ...
  </template>

  <!-- ç¼©å†™ä¸º -->
  <template #[dynamicSlotName]>
    ...
  </template>
</base-layout>
```

#### ä½œç”¨åŸŸæ’æ§½

å½“æ’æ§½çš„å†…å®¹å¯èƒ½æƒ³è¦åŒæ—¶ä½¿ç”¨çˆ¶ç»„ä»¶åŸŸå†…å’Œå­ç»„ä»¶åŸŸå†…çš„æ•°æ®æ—¶ä½¿ç”¨ã€‚å®ƒä»¬æ¥å—çš„å‚æ•°åªåœ¨è¯¥æ’æ§½ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚

â€‹	é»˜è®¤æ’æ§½ï¼š

çˆ¶ç»„ä»¶ä¸­è®¿é—®å­ç»„ä»¶æ•°æ®ï¼š

```vue

<!-- <MyComponent> çš„æ¨¡æ¿ -->
<div>
  <slot :text="greetingMessage" :count="1"></slot>
</div>

```

```vue
<!-- çˆ¶ç»„ä»¶ -->
<MyComponent v-slot="slotProps">
  {{ slotProps.text }} {{ slotProps.count }}
</MyComponent>
```

å…·åæ’æ§½ï¼š

å‘å…·åæ’æ§½ä¸­ä¼ å…¥ propsï¼š

name å±æ€§æ˜¯ä¿ç•™å­—ä¸ä¼šä¼ å…¥ props

```vue
<!-- <MyComponent> çš„æ¨¡æ¿ -->
<MyComponent>
  <template #header="headerProps">
    {{ headerProps }}
  </template>

  <template #default="defaultProps">
    {{ defaultProps }}
  </template>

  <template #footer="footerProps">
    {{ footerProps }}
  </template>
</MyComponent
```



```vue
<!-- çˆ¶ç»„ä»¶ -->
<slot name="header" message="hello"></slot>
```

#### ä¾èµ–æ³¨å…¥

> å½“ä¸€ä¸ªå¤šæ¬¡åµŒå¥—çš„å­ç»„ä»¶éœ€è¦ä½¿ç”¨åˆ° ä¸Šé¢ å¤šçº§çš„çˆ¶ç»„ä»¶çš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œé¿å…æ·±å±‚æ¬¡ä¼ é€’ props

- Provide æä¾›

è¦ä¸ºç»„ä»¶åä»£æä¾›æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨åˆ° [`provide()`](https://cn.vuejs.org/api/composition-api-dependency-injection.html#provide) å‡½æ•°ï¼š

æ³¨å…¥åä½¿ç”¨ Symbol æœ€ä½³

```js
<script setup>
import { provide } from 'vue'

provide(/* æ³¨å…¥å */ 'message', /* å€¼ */ 'hello!')
</script>
```

å¦‚æœä¸ä½¿ç”¨ `<script setup>`ï¼Œè¯·ç¡®ä¿ `provide()` æ˜¯åœ¨ `setup()` åŒæ­¥è°ƒç”¨çš„ï¼š

```js
import { provide } from 'vue'

export default {
  setup() {
    provide(/* æ³¨å…¥å */ 'message', /* å€¼ */ 'hello!')
  }
}
```

ä¸€ä¸ªç»„ä»¶å¯ä»¥å¤šæ¬¡è°ƒç”¨ `provide()`ï¼Œä½¿ç”¨ä¸åŒçš„æ³¨å…¥åï¼Œæ³¨å…¥ä¸åŒçš„ä¾èµ–å€¼ã€‚å¯ä»¥æ˜¯å“åº”å¼æ•°æ®ï¼Œæä¾›çš„å“åº”å¼çŠ¶æ€ä½¿åä»£ç»„ä»¶å¯ä»¥ç”±æ­¤å’Œæä¾›è€…å»ºç«‹å“åº”å¼çš„è”ç³»ã€‚

- Inject	æ³¨å…¥

è¦æ³¨å…¥ä¸Šå±‚ç»„ä»¶æä¾›çš„æ•°æ®ï¼Œéœ€ä½¿ç”¨ [`inject()`](https://cn.vuejs.org/api/composition-api-dependency-injection.html#inject) å‡½æ•°ï¼š

```js
<script setup>
import { inject } from 'vue'

const message = inject('message', 'è¿™æ˜¯é»˜è®¤å€¼')
</script>
```

å¦‚æœæä¾›çš„å€¼æ˜¯ä¸€ä¸ª refï¼Œæ³¨å…¥è¿›æ¥çš„ä¼šæ˜¯è¯¥ ref å¯¹è±¡ï¼Œè€Œ**ä¸ä¼š**è‡ªåŠ¨è§£åŒ…ä¸ºå…¶å†…éƒ¨çš„å€¼ã€‚è¿™ä½¿å¾—æ³¨å…¥æ–¹ç»„ä»¶èƒ½å¤Ÿé€šè¿‡ ref å¯¹è±¡ä¿æŒäº†å’Œä¾›ç»™æ–¹çš„å“åº”æ€§é“¾æ¥ã€‚

1. å’Œå“åº”å¼é…åˆä½¿ç”¨

	```vue
	<!-- åœ¨ä¾›ç»™æ–¹ç»„ä»¶å†… -->
	<script setup>
	import { provide, ref } from 'vue'
	
	const location = ref('North Pole')
	
	function updateLocation() {
	  location.value = 'South Pole'
	}
	
	provide('location', {
	  location,
	  updateLocation
	})
	</script>
	
	<!-- åœ¨æ³¨å…¥æ–¹ç»„ä»¶ -->
	<script setup>
	import { inject } from 'vue'
	
	const { location, updateLocation } = inject('location')
	</script>
	
	<template>
	  <button @click="updateLocation">{{ location }}</button>
	</template>
	```

	

2. æ³¨å…¥æ•°æ®åªè¯»

	```vue
	<script setup>
	import { ref, provide, readonly } from 'vue'
	
	const count = ref(0)
	provide('read-only-count', readonly(count))
	</script>
	```

3. å¼‚æ­¥ç»„ä»¶

	åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‹†åˆ†åº”ç”¨ä¸ºæ›´å°çš„å—ï¼Œå¹¶ä»…åœ¨éœ€è¦æ—¶å†ä»æœåŠ¡å™¨åŠ è½½ç›¸å…³ç»„ä»¶ã€‚Vue æä¾›äº† [`defineAsyncComponent`](https://cn.vuejs.org/api/general.html#defineasynccomponent) æ–¹æ³•æ¥å®ç°æ­¤åŠŸèƒ½ï¼š

	```js
	import { defineAsyncComponent } from 'vue'
	
	const AsyncComp = defineAsyncComponent(() =>
	  import('./components/MyComponent.vue')
	)
	
	// å®Œæ•´é…ç½®å±æ€§
	const AsyncComp = defineAsyncComponent({
	  // åŠ è½½å‡½æ•°
	  loader: () => import('./Foo.vue'),
	
	  // åŠ è½½å¼‚æ­¥ç»„ä»¶æ—¶ä½¿ç”¨çš„ç»„ä»¶
	  loadingComponent: LoadingComponent,
	  // å±•ç¤ºåŠ è½½ç»„ä»¶å‰çš„å»¶è¿Ÿæ—¶é—´ï¼Œé»˜è®¤ä¸º 200ms
	  delay: 200,
	
	  // åŠ è½½å¤±è´¥åå±•ç¤ºçš„ç»„ä»¶
	  errorComponent: ErrorComponent,
	  // å¦‚æœæä¾›äº†ä¸€ä¸ª timeout æ—¶é—´é™åˆ¶ï¼Œå¹¶è¶…æ—¶äº†
	  // ä¹Ÿä¼šæ˜¾ç¤ºè¿™é‡Œé…ç½®çš„æŠ¥é”™ç»„ä»¶ï¼Œé»˜è®¤å€¼æ˜¯ï¼šInfinity
	  timeout: 3000
	})
	```

	

	

### Teleport

```html
å¯ä»¥å°†ç»„ä»¶æ¸²æŸ“åˆ°æŒ‡å®šå…ƒç´ ä¸Š

eg:
Modelæç¤ºæ¡†ç»„ä»¶æ— è®ºåœ¨ä½•å¤„è¢«å¼•ç”¨ï¼Œéƒ½ä¼šæ¸²æŸ“åˆ°App.vueä¸­çš„ <div id="model"></div> å®¹å™¨ä¸­
å½“ to="body",ä¼šæŒ‚è½½åˆ°bodyä¸Š,å¤šä¸ª teleport å¯ä»¥æŒ‚è½½åˆ°åŒä¸€ä¸ªå…ƒç´ ä¸Š

Model.vue
<template>
	<teleport to="#model">
    	<div id="center">
            <h2>
                this is model
            </h2>
        </div>
    </teleport>
</template>

App.vue
<template>
    <div id="app"></div>
    <div id="model"></div>
</template>
```

### [emits](https://links.jianshu.com/go?to=https%3A%2F%2Fv3.cn.vuejs.org%2Fapi%2Foptions-data.html%23watch)

> Vueå®˜æ–¹å»ºè®®æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­æ‰€æœ‰çš„emitäº‹ä»¶éƒ½èƒ½åœ¨ç»„ä»¶çš„emitsé€‰é¡¹ä¸­å£°æ˜
> emitså‚æ•°æœ‰ä¿©ç§å½¢å¼å¯¹è±¡å’Œæ•°ç»„ï¼Œå¯¹è±¡é‡Œé¢å¯ä»¥é…ç½®å¸¦æ ¡éªŒemitäº‹ä»¶ï¼Œä¸ºnullçš„æ—¶å€™ä»£è¡¨ä¸æ ¡éªŒï¼Œæ ¡éªŒçš„æ—¶å€™ï¼Œä¼šæŠŠemitäº‹ä»¶çš„å‚æ•°ä¼ åˆ°æ ¡éªŒå‡½æ•°çš„å‚æ•°é‡Œé¢
> å½“æ ¡éªŒå‡½æ•°ä¸é€šè¿‡çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä¸€ä¸ªè­¦å‘Šï¼Œä½†æ˜¯emitäº‹ä»¶ä¼šç»§ç»­æ‰§è¡Œ
> è®°å½•ä¸€ä¸ªå‘ï¼šæ¯”å¦‚ä½ emitäº‹ä»¶çš„åç§°æ­£å¥½å’ŒåŸç”Ÿäº‹ä»¶çš„åå­—é‡å¤äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹ä»¶ä¼šæ‰§è¡Œä¿©æ¬¡ï¼Œé‚£ä¹ˆé…ç½®äº†emitsè¿™ä¸ªé€‰é¡¹çš„è¯ï¼Œå°±èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸‹å»è‡ªå·±å®éªŒä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« ä¸­ä¸åšæ¼”ç¤º

Modelç»„ä»¶
```vue
<template>
<teleport to="#modal">
  <div id="center" v-if="isOpen">
    <h2><slot>this is a modal</slot></h2>
    <button @click="buttonClick">Close</button>
  </div>
</teleport>
</template>
<script lang="ts">
import { defineComponent } from 'vue'
export default defineComponent({
  props: {
    isOpen: Boolean,
  },
  emits: {
    'close-modal': null
  },
  setup(props, context) {
    const buttonClick = () => {
      context.emit('close-modal')
    }
    return {
      buttonClick
    }
  }
})
</script>
```

åœ¨appä¸­ä½¿ç”¨ 

```js
const modalIsOpen = ref(false)
const openModal = () => {
  modalIsOpen.value = true
}
const onModalClose = () => {
  modalIsOpen.value = false
}

<button @click="openModal">Open Modal</button><br/>
<modal :isOpen="modalIsOpen" @close-modal="onModalClose"> My Modal !!!!</modal>
```



### Suspense 

```html
<-- å¼‚æ­¥è¯·æ±‚çš„å¥½å¸®æ‰‹ -->

SuspenseTest.vue
    
<template>
	<h1>1111{{ result }}</h1>
</template>

<script lang="ts">
import { defineComponent } from 'vue'
export default defineComponent({
    name: 'SuspenseTest',
    setup() {

        return new Promise((res, rej)=> {
            setTimeout(()=> {
                res({result: 'æˆ‘å‡ºæ¥äº†'})
            }, 3000)
        })
    }
})
</script>

Home.vue
   å¼•ç”¨
    
    <!-- å¼‚æ­¥è¯·æ±‚å¥½å¸®æ‰‹ -->
     <suspense>
         <!-- å‡ºæ¥å -->
        <template #default>
            <suspense-test ></suspense-test>
        </template>
        <!-- å‡ºæ¥å‰ -->
        <template #fallback>
            <h1>Loadding...</h1>
        </template>
    </suspense>
    <script lang="ts">
        import { defineComponent } from 'vue'
        import SuspenseTest from '@/components/SuspenseTest.vue'
        export default defineComponent({
            name: 'SuspenseTest',
            components: {
                SuspenseTest
            },
            setup() {
			
                
            }
        })
    </script>
    
    æ•ˆæœï¼š 3sä¹‹å‰æ˜¾ç¤º Loading...   ï¼Œä¹‹åæ˜¾ç¤º SuspenseTestç»„ä»¶å†…å®¹
```

### å…¨å±€APIä¿®æ”¹

```js
Vue2.0


import Vue from 'vue'
import App from './App.vue'

Vue.config.ignoredElements = [/^app-/]
Vue.use(/* ... */)
Vue.mixin(/* ... */)
Vue.component(/* ... */)
Vue.directive(/* ... */)

Vue.prototype.customProperty = () => {}

new Vue({
  render: h => h(App)
}).$mount('#app')

Vue2 è¿™æ ·å†™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿®æ”¹äº† Vue å¯¹è±¡çš„å…¨å±€çŠ¶æ€ã€‚

ç¬¬ä¸€ï¼Œåœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œå…¨å±€é…ç½®éå¸¸å®¹æ˜“æ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œç”¨æˆ·éœ€è¦åœ¨æ¯æ¬¡ case ä¹‹é—´ï¼Œä¿å­˜å’Œæ¢å¤é…ç½®ã€‚æœ‰ä¸€äº› api ï¼ˆvue use vue mixinï¼‰ç”šè‡³æ²¡æœ‰æ–¹æ³•æ¢å¤é…ç½®ï¼Œè¿™å°±è®©ä¸€äº›æ’ä»¶çš„æµ‹è¯•éå¸¸çš„å›°éš¾ã€‚

ç¬¬äºŒï¼Œåœ¨ä¸åŒçš„ APP ä¸­ï¼Œå¦‚æœæƒ³å…±äº«ä¸€ä»½æœ‰ä¸åŒé…ç½®çš„ vue å¯¹è±¡ï¼Œä¹Ÿå˜å¾—éå¸¸å›°éš¾ã€‚

Vue3.0

import { createApp } from 'vue'
import App from './App.vue'

const app = createApp(App)
// è¿™ä¸ªæ—¶å€™ app å°±æ˜¯ä¸€ä¸ª App çš„å®ä¾‹ï¼Œç°åœ¨å†è®¾ç½®ä»»ä½•çš„é…ç½®æ˜¯åœ¨ä¸åŒçš„ app å®ä¾‹ä¸Šé¢çš„ï¼Œä¸ä¼šåƒvue2 ä¸€æ ·å‘ç”Ÿä»»ä½•çš„å†²çªã€‚

app.config.isCustomElement = tag => tag.startsWith('app-')
app.use(/* ... */)
app.mixin(/* ... */)
app.component(/* ... */)
app.directive(/* ... */)

app.config.globalProperties.customProperty = () => {}

// å½“é…ç½®ç»“æŸä»¥åï¼Œæˆ‘ä»¬å†æŠŠ App ä½¿ç”¨ mount æ–¹æ³•æŒ‚è½½åˆ°å›ºå®šçš„ DOM çš„èŠ‚ç‚¹ä¸Šã€‚
app.mount(App, '#app')
```

### vue3ä¸­å…¨å±€æŒ‚è½½å±æ€§å¯¹è±¡çš„ä½¿ç”¨

vue3å…¨å±€æŒ‚è½½æ–¹å¼

```js
app.config.globalProperties.customFlag = 'flag';
```

å†™ä¸€ä¸ªuseGlobal å‡½æ•°

```js
// useGlobelProperties.js
import { getCurrentInstance } from "vue";  
export default function useGlobelProperties(){
    const { appContext } = getCurrentInstance();   //ğŸŒŸ
    return appContext.config.globalProperties;    //ğŸŒŸ
}
```

åœ¨é¡µé¢ä½¿ç”¨

```js
import useGlobelProperties from '@/utils/global'
// æ­¤æ—¶çš„ that å°±ç›¸å½“äºvue2.0ç‰ˆæœ¬ä¸­çš„thisäº†
const that = useGlobelProperties();

// ä½¿ç”¨
{{that.customFlag}}
```



### å“åº”å¼æ•°æ®

#### ref

> æ¨èä½¿ç”¨ [`ref()`](https://cn.vuejs.org/api/reactivity-core.html#ref) å‡½æ•°æ¥å£°æ˜å“åº”å¼çŠ¶æ€ã€‚fef å¯ä»¥æŒæœ‰ä»»ä½•ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬æ·±å±‚åµŒå¥—çš„å¯¹è±¡ã€æ•°ç»„æˆ–è€… JavaScript å†…ç½®çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚ `Map`ã€‚

```js
import { ref } from 'vue'

const obj = ref({
  nested: { count: 0 },
  arr: ['foo', 'bar']
})

function mutateDeeply() {
  // ä»¥ä¸‹éƒ½ä¼šæŒ‰ç…§æœŸæœ›å·¥ä½œ
  obj.value.nested.count++
  obj.value.arr.push('baz')
}
```

å¦‚æœéœ€è¦ç­‰å¾…DOMæ›´æ–°ååœ¨æ‰§è¡Œé¢å¤–ä»£ç 

```js
import { nextTick } from 'vue'

async function increment() {
  count.value++
  await nextTick()
  // ç°åœ¨ DOM å·²ç»æ›´æ–°äº†
}
```

#### reactive

> ä¸ref ä¸åŒï¼Œ`reactive()` å°†ä½¿å¯¹è±¡æœ¬èº«å…·æœ‰å“åº”æ€§ã€‚
>
> `reactive()` å°†æ·±å±‚åœ°è½¬æ¢å¯¹è±¡ï¼šå½“è®¿é—®åµŒå¥—å¯¹è±¡æ—¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢« `reactive()` åŒ…è£…ã€‚å½“ ref çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ`ref()` ä¹Ÿä¼šåœ¨å†…éƒ¨è°ƒç”¨å®ƒã€‚

ä½¿ç”¨ç¤ºä¾‹

```vue
<script setup >
import { reactive } from 'vue'

const state = reactive({ count: 0 })
</script>
// æ¨¡æ¿ä¸­ä½¿ç”¨
<button @click="state.count++">
  {{ state.count }}
</button>
```

> å±€é™æ€§ï¼š
>
> 1ã€ä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚string,number,boolean..
>
> 2ã€ä¸èƒ½æ›¿æ¢æ•´ä¸ªå¯¹è±¡
>
> 3ã€å½“æˆ‘ä»¬å°†å“åº”å¼å¯¹è±¡çš„åŸå§‹ç±»å‹å±æ€§è§£æ„ä¸ºæœ¬åœ°å˜é‡æ—¶ï¼Œæˆ–è€…å°†è¯¥å±æ€§ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°†ä¸¢å¤±å“åº”æ€§è¿æ¥