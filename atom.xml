<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>myBlog</title>
  
  <subtitle>白小纯</subtitle>
  <link href="https://wyf195075595.github.io/atom.xml" rel="self"/>
  
  <link href="https://wyf195075595.github.io/"/>
  <updated>2022-10-26T02:13:55.217Z</updated>
  <id>https://wyf195075595.github.io/</id>
  
  <author>
    <name>王不留行</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CSS 3.0</title>
    <link href="https://wyf195075595.github.io/2022/10/26/programming/htmlcss/css3/"/>
    <id>https://wyf195075595.github.io/2022/10/26/programming/htmlcss/css3/</id>
    <published>2022-10-26T10:00:00.000Z</published>
    <updated>2022-10-26T02:13:55.217Z</updated>
    
    <content type="html"><![CDATA[<p><strong>CSS世界已经有了CSS2和CSS3，那会有CSS4吗？</strong></p><p>答案是：不会有CSS4！</p><blockquote><p>实际上，现在连CSS3这个词都已经名存实亡了，因为CSS3已经解体了。为什么说CSS3解体了呢？因为CSS按照大版本的方式进行迭代实在是太低效了。低效的原因其实很好理解，如果CSS这门语言必须按照大版本迭代发布的话，只要其中一个版本有一个CSS特性存在极大的争议，那这个版本的CSS的发布时间就会延后。例如，CSS2.1的规范在2002年开始制定，而一直到2011年才成为推荐规范，整个过程足足花费了10年的时间，就是因为一些次要的CSS特性拖了后腿。</p><p>为了加速没有争议的CSS特性的标准化，W3C的CSS工作组做出了一项被称为“Beijing doctrine”的决定，该决定将CSS划分为更小的组件，并把这些组件称为模块。这些模块互相独立，各自按照自己的速度走向标准化。例如，CSS选择器模块已经到了Level 4了，弹性布局模块还是Level 1。</p><p>将CSS划分为独立的模块是一个非常明智的决定，浏览器厂商可以根据对自己需求的判断决定究竟对哪些模块进行支持，哪怕这个模块还处于草案状态。例如CSS的env()函数的规范还是草案状态，但是Chrome和Safari浏览器的厂商却快速响应，对其进行了支持。对开发者而言，如此迅速地支持新特性犹如一场及时雨。</p><p>当然，这种模块化的设计也不是没有弊端，最大的问题就是设计冗余。例如，弹性布局和网格布局中的对齐属性其实可以统一，但它们却是分离的，这就会徒增学习成本；分栏布局、弹性布局和网格布局中的间隙其实可以统一，但它们也都是分离的，各有各的间隙属性。好在纠正及时，现在这三大布局全部开始改用gap属性表示间隙，减少了因为模块化带来的设计冗余。</p><p>模块化策略带来的好处远远大于弊端，正所谓瑕不掩瑜，与带来的好处相比，模块化设计的弊端几乎可以忽略不计。从这个角度看，CSS2.1之后的CSS世界就是模块化的新世界，所以我称之为CSS新世界。这个CSS新世界带来了新的CSS属性，并让很多CSS2中模糊的概念有了明确的定义，如尺寸体系、逻辑属性、CSS值类型划分等。CSS新世界中各模块虽然发展独立，但是相互间还是有很多共性和联系的。因此，CSS新世界不仅是一个模块化的世界，还是一个缤纷多彩，同时又自成一体的严谨的世界。</p></blockquote><span id="more"></span><h2 id="互通互联的CSS数据类型"><a href="#互通互联的CSS数据类型" class="headerlink" title="互通互联的CSS数据类型"></a>互通互联的CSS数据类型</h2><blockquote><p>任何CSS属性值一定包含一个或多个数据类型。</p><p>在CSS2时代，CSS数据类型的概念并不怎么重要，因为常用的CSS属性翻来覆去就那几个，这些CSS属性支持的属性值我们反复使用就记住了。但是在CSS新世界中，由于各个CSS模块独立发展，没有统一的大版本进行约束，因此CSS的发展和变化非常快，这导致短时间内大量的CSS新属性如雨后春笋般涌现。</p><p>如果此时还和过去一样，只是凭借经验去学习CSS新特性，那么学习起来肯定是十分困难的，因为效率比较低下。此时CSS数据类型的价值就体现出来了，当CSS新属性出现的时候，我们无须记忆数量众多的属性值名称，只需要记住支持的数据类型即可，这样学习成本就大大降低了</p></blockquote><p>举一个例子，background-image是使用频率非常高的一个CSS属性，这个CSS属性的语法结构是下面这样的：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: none | &lt;image&gt;</span><br></pre></td></tr></table></figure><p>这个语法中出现的&lt;image&gt;就是一种数据类型，它包括下面这些类型和函数：</p><p>● &lt;url&gt;；</p><p>● &lt;gradient&gt;；</p><p>● element()；</p><p>● image()；</p><p>● image-set()；</p><p>● cross-fade()</p><p>● paint()</p><p>也就是说，CSS的background-image属性不仅支持url()函数和渐变图像，还支持element()、image()、image-set()和cross-fade()等函数。</p><h3 id="几个常见数据类型的简单介绍"><a href="#几个常见数据类型的简单介绍" class="headerlink" title="几个常见数据类型的简单介绍"></a>几个常见数据类型的简单介绍</h3><blockquote><p>CSS数据类型非常多，保守估计，至少有50个，这里介绍几个常见且值得一提的数据类型。</p></blockquote><p>CSS Shapes布局中有一个名为shape-outside的属性，我们不用关心这个CSS属性的含义，只看这个CSS属性的语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">shape-outside</span>: none | &lt;shape-box&gt; || &lt;basic-shape&gt; | &lt;image&gt;</span><br></pre></td></tr></table></figure><ol><li><p>&lt;shape-box&gt; 支持属性如下：</p><ul><li><p>&lt;box&gt;</p><p>  ● content-box；</p><p>  ● padding-box；</p><p>  ● border-box。</p></li><li><p>margin-box</p></li></ul></li><li><p>&lt;basic-shape&gt; 支持属性如下：</p><ul><li>inset()</li><li>circle()</li><li>ellipse()</li><li>polygon()</li><li>path()</li></ul></li><li><p>&lt;image&gt;</p></li><li><p>&lt;cololr&gt;</p><ul><li>&lt;rgb()&gt;；</li><li> &lt;rgba()&gt;；</li><li> &lt;hsl()&gt;；</li><li> &lt;hsla()&gt;；</li><li>&lt;hex-color&gt;；</li><li> &lt;named-color&gt;；</li><li> currentColor；</li><li>&lt;deprecated-system-color&gt; 废弃的系统的颜色</li></ul></li></ol><p><a href="https://www.zhangxinxu.com/wordpress/2019/11/css-value-type/">css值类型文档大全</a></p><h3 id="学会看懂CSS属性值定义语法"><a href="#学会看懂CSS属性值定义语法" class="headerlink" title="学会看懂CSS属性值定义语法"></a>学会看懂CSS属性值定义语法</h3><blockquote><p>CSS属性值有专门的定义语法，用来表示CSS属性值的合法组成。例如，线性渐变的语法为：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linear-gradient(<span class="selector-attr">[ &lt;angle&gt; | to &lt;side-or-corner&gt; , ]</span>? &lt;<span class="attribute">color</span>-stop-list&gt;)</span><br></pre></td></tr></table></figure><h4 id="学习CSS属性值定义语法的好处"><a href="#学习CSS属性值定义语法的好处" class="headerlink" title="学习CSS属性值定义语法的好处"></a>学习CSS属性值定义语法的好处</h4><blockquote><p>在开始介绍具体的语法规则之前，我想先说说我们为什么要学会看懂CSS属性值定义语法（CSS value definition syntax）。就拿线性渐变的语法举例，根据我的观察，几乎无一例外，CSS开发者会写出类似下面这样的CSS线性渐变代码：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, deepskyblue, deeppink)</span><br></pre></td></tr></table></figure><p>上面这句声明有问题吗？从功能上讲没问题，但是写法上却有瑕疵， “to bottom” 这几个字符是多余的，可直接写为</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(deepskyblue, deeppink)</span><br></pre></td></tr></table></figure><blockquote><p>如果你看得懂CSS的语法，那么在学习CSS的时候，只要稍微看一看线性渐变的语法，就能很轻松地知道“线性渐变的方向设置是可以省略的”这样一个细节知识，也就能写出更简洁的CSS代码。</p></blockquote><h4 id="CSS属性值定义语法详解"><a href="#CSS属性值定义语法详解" class="headerlink" title="CSS属性值定义语法详解"></a>CSS属性值定义语法详解</h4><blockquote><p>CSS属性值定义语法是专门用来限定CSS属性合法取值的语法，这种语法包含以下3种基本组成元素：</p><ul><li>关键字</li><li>数据类型</li><li>符号</li></ul></blockquote><p>线性渐变语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linear-gradient(<span class="selector-attr">[&lt;angle&gt; | to &lt;side-or-corner&gt;, ]</span>? &lt;<span class="attribute">color</span>-stop-list&gt;)</span><br></pre></td></tr></table></figure><p>上面语法中， to 为关键字， &lt;angle&gt;,&lt;side-or-corner&gt;,&lt;color-stop-list&gt;是数据类型，[] | ? 为符号</p><ol><li><p>关键字</p><p> 关键字分为通用关键字和全局关键字：</p><p> ● auto、none、ease等关键字是通用关键字，或者可以称为普通关键字，这些关键字均只被部分CSS属性支持；</p><p> ● inherit、initial、unset和revert是全局关键字，属于被所有CSS属性支持的特殊关键字</p></li><li><p>数据类型</p><p> 数据类型外面有一对尖括号（“&lt;”和“&gt;”）。有些数据类型是CSS规范中专门定义的，它们被称为基本类型，其他数据类型就被称为其他类型。</p></li><li><p>符号</p><p> 符号是CSS语法中的重点和难点。CSS语法中的符号分为字面符号、组合符号和数量符号这3类</p><ul><li><p>字面符号指的是CSS属性值中原本就支持的合法符号，这些符号在CSS语法中会按照其原本的字面意义呈现。目前字面符号就两个，一个是逗号（,），另一个是斜杠（/）</p><p>  <img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221021095011386.png" alt="image-20221021095011386"></p></li><li><p>组合符号用来表示数个基本元素之间的组合关系。目前共有5个组合符号，其中大多数组合符号的含义一目了然，除了“|”这个组合符号。因为“|”表示互斥，这在编程语言中比较少见，大家可以特别关注一下。</p><p>  <img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221021095120238.png" alt="image-20221021095120238"></p></li><li><p>数量符号用来描述一个元素可以出现多少次，数量符号不能叠加出现，并且优先级高于组合符号。目前共有6个数量符号，大多数的数量符号的含义和在正则表达式中的含义是一样的</p><p>  <img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221021095233527.png" alt="image-20221021095233527"></p></li></ul></li></ol><blockquote><p>接下来只要弄清楚&lt;angle&gt;、&lt;side-or-corner&gt;和&lt;color-stop-list&gt;这几个数据类型的含义和语法，我们就可以理解线性渐变的语法了。</p></blockquote><h4 id="了解CSS全局关键字"><a href="#了解CSS全局关键字" class="headerlink" title="了解CSS全局关键字"></a>了解CSS全局关键字</h4><blockquote><p>inherit、initial、unset和revert都是CSS全局关键字属性值，也就是说所有CSS属性都可以使用这几个关键字作为属性值。</p></blockquote><table><thead><tr><th align="center">关键字属性值</th><th align="center">实用性</th><th align="center">兼容性</th><th align="center">整体设计</th></tr></thead><tbody><tr><td align="center">inherit</td><td align="center">A</td><td align="center">A+</td><td align="center">A+</td></tr><tr><td align="center">initial</td><td align="center">B</td><td align="center">B+</td><td align="center">B</td></tr><tr><td align="center">unset</td><td align="center">B-</td><td align="center">B-</td><td align="center">B-</td></tr><tr><td align="center">revert</td><td align="center">B</td><td align="center">C</td><td align="center">B-</td></tr></tbody></table><p><strong>用过都说好的继承关键字inherit</strong></p><blockquote><p>inherit这个关键字是继承的意思。IE浏览器从IE8（标准版）开始就已经支持该关键字了，而不是从IE9浏览器开始支持的。请记住，不是从IE9开始支持的，网络上的某些在线文档是错误的。</p></blockquote><p><strong>可以一用的初始值关键字initial</strong></p><blockquote><p>initial是初始值关键字，可以把当前的CSS属性的计算值还原成<strong>CSS语法中规定的初始值</strong>。【<strong>不是浏览器内置的样式</strong>】</p></blockquote><p><a href="https://demo.cssworld.cn/new/2/3-1.php">示例</a></p><p><strong>很多人有这样一个误区：把 initial 关键字理解为浏览器设置的元素的初始值。实际上两者是不一样的。</strong></p><blockquote><p>举个例子，实际开发的时候，&lt;ul&gt;元素或 &lt;ol&gt;元素默认的list-style-type样式会被CSS重置。但是可能会遇到这样的场景，即某些区域需要增加一些描述信息，因此需要重新使用list-style-type样式（小圆点或者数字），此时有些开发者就会使用initial关键字对该样式进行还原：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: initial;</span><br><span class="line">    <span class="attribute">list-style-type</span>: initial;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是没有用！应为上边等同如下设置</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style-type</span>: disc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而不是预想的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">list-style-type</span>: decimal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>此时需要的全局关键字属性值其实是 revert，而不是initial。</p></blockquote><blockquote><p>兼容性</p><p>除IE浏览器之外，其他浏览器都很早就支持了initial，因此，至少在移动端项目（包括微信小程序）中大家可以百分之百放心使用这个关键字属性值。</p></blockquote><p><strong>了解一下不固定值关键字unset</strong></p><blockquote><p>unset是不固定值关键字，其特性如下：如果当前使用的CSS属性是具有继承特性的，如color属性，则等同于使用inherit关键字；如果当前使用的CSS属性是没有继承特性的，如background-color，则等同于使用initial关键字。</p><p>unset这个关键字只有配合all属性使用才有意义，因为对于某个具体的CSS属性，想要继承某个属性，那就使用inherit关键字；想要使用初始值，那就使用initial关键字，没有任何理由使用unset关键字。</p></blockquote><p>如某元素很多默认属性不是我们需要的，但是我们又不想一个属性接一个属性地进行重置，怎么办呢？此时就可以先使用all:unset进行批量重置，再设置我们需要的CSS属性：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dialog &#123;</span><br><span class="line">    <span class="attribute">all</span>: unset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><dialog>元素的样式重置是很难得的unset使用场景，由于支持<dialog>元素的浏览器一定支持unset，因此也不用担心兼容性的问题。</blockquote><p><strong>个人很喜欢的恢复关键字revert</strong></p><blockquote><p>revert 关键字可以让当前元素的样式还原成浏览器内置的样式。例如：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ol</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: revert;</span><br><span class="line">    <span class="attribute">list-style-type</span>: revert;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>那么 &lt;ol&gt;中的每一个 &lt;li&gt;项都会有数字效果呈现，当然，前提是你没有对子元素 &lt;li&gt;的list-style-type属性做过样式重置。这里有必要插一句，请记住：没有任何理由对 &lt;li&gt;元素进行任何样式重置。因为所有浏览器的<li>元素默认都没有margin外间距，也没有padding内间距，list-style-type也是继承 &lt;ul&gt;或 &lt;ol&gt;元素，所以对 &lt;li&gt;元素进行任何样式重置，既浪费CSS代码，也不利于列表序号的样式设置。此刻，你就可以看看手中的项目中的代码有没有对 &lt;li&gt;元素做过样式重置，如果有，赶快删掉</p></blockquote><p><a href="https://demo.cssworld.cn/new/2/3-2.php">在支持 revert 样式的 浏览器中 设置恢复</a></p><ul><li><h5 id="HTML："><a href="#HTML：" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;revert-ol&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>inherit关键字实用<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>initial关键字可用<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>unset关键字配合all使用<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>revert关键字有用<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS："><a href="#CSS：" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.revert-ol</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">padding</span>: revert) &#123;</span><br><span class="line">    <span class="selector-class">.revert-ol</span> &#123;</span><br><span class="line">        <span class="attribute">padding</span>: revert;</span><br><span class="line">        <span class="attribute">list-style-type</span>: revert;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>指代所有CSS属性的all属性</strong></p><blockquote><p>all属性可以重置除unicode-bidi、direction以及CSS自定义属性以外的所有CSS属性。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">all</span>: inherit;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><blockquote><p>该段代码表示 &lt;input&gt;元素中所有CSS属性都使用inherit关键字作为属性值</p></blockquote><blockquote><p>all:inherit没有任何实用价值，all:initial也没有任何实用价值。有实用价值的是all:unset和all:revert。all:unset可以让任意一个元素样式表现和&lt;span&gt;元素一样。all:revert可以让元素恢复成浏览器默认的样式，也是很有用的。</p></blockquote><blockquote><p>为什么unicode-bidi和direction这两个CSS属性不受all属性影响?</p><p>我们不妨反问一下，如果unicode-bidi和direction这两个CSS属性会受到all属性影响，那会出现什么问题呢？阿拉伯文的呈现形式是从右往左的，但是，direction属性的初始值却是ltr，即从左往右。如果all属性可以影响direction属性，那么执行all:initial的时候，这些阿拉伯文的网页文字全部都会变成从左往右呈现。大家可以想象一下我们的中文网页上的中文内容全部从右往左显示是什么样的，我敢保证，使用阿拉伯文的前端开发者绝对不会使用这个all属性的，all属性在阿拉伯文中从此名存实亡。</p><p>于是答案就出来了，之所以direction属性不受all影响，是因为当年direction属性设计失误，将其初始值设为了ltr，而不是auto。现在为了照顾从右往左阅读的场景，direction属性就被设计成不受all属性影响。unicode-bidi属性是direction属性的“跟屁虫”，而且它的功能还挺强大的，可以精确控制每一个文字的呈现方向，只是离开了direction属性就没用。既然这两个CSS属性形影不离，那就把unicode-bidi属性加入不会受all属性影响的属性队列吧。</p></blockquote><h4 id="css-新特性的渐进式增强处理技巧"><a href="#css-新特性的渐进式增强处理技巧" class="headerlink" title="css 新特性的渐进式增强处理技巧"></a>css 新特性的渐进式增强处理技巧</h4><blockquote><p>有很多CSS新特性是对现有Web特性的体验升级，我们直接使用这些CSS新特性就好了，不要担心兼容性问题。因为在支持的浏览器中体验更好，在不支持的浏览器中也就是保持原来的样子而已。</p><p>做Web开发是没有必要让所有浏览器都显示得一模一样的，好的浏览器有更好的显示，糟糕的浏览器就只有普通的显示，这才是对用户更负责任的做法。</p></blockquote><blockquote><p>举个例子，IE10+浏览器支持CSS动画属性animation，我们要实现加载效果就可以使用一个很小的PNG图片，再借助旋转动画。这个方法的优点是资源占用少，动画效果细腻。于是，我们的需求来了，IE9及其以下版本浏览器还是使用传统的GIF动图作为背景，IE10+浏览器则使用PNG背景图外加animation属性实现加载效果。</p></blockquote><p>这个需求的难点在于我们该如何区分IE9和IE10浏览器。大家千万不要再去找什么CSS Hack了，我们可以利用属性值的语法差异实现渐进增强效果。例如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-loading</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>; <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/loading.gif</span>);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../images/loading.png</span>), <span class="built_in">linear-gradient</span>(transparent, transparent);</span><br><span class="line">    <span class="attribute">animation</span>: spin <span class="number">1s</span> linear infinite;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/2/5-2.php">background-blend-mode纹理背景渐进增强实现实例页面</a></p><p><strong>@supports规则下的渐进增强处理</strong></p><blockquote><p>@supports是CSS中的常见的@规则，可以用来检测当前浏览器是否支持某个CSS新特性，这是最规范、最正统的CSS渐进增强处理方法，尤其适合多个CSS属性需要同时处理的场景。</p><p>但是在实际开发的时候，@supports规则并没有在IE浏览器的兼容性问题上做出什么大的贡献。原因很简单，@supports规则的支持是从Edge12浏览器开始的，根本就没有IE浏览器什么事情。</p></blockquote><p><strong>@supports规则常用的语法</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-loading</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">30px</span>; <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./loading.gif</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Edge12+浏览器*/</span></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">animation</span>: none) &#123;</span><br><span class="line">    <span class="selector-class">.icon-loading</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./loading.png</span>);</span><br><span class="line">        <span class="attribute">animation</span>: spin <span class="number">1s</span> linear infinite;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> spin &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>) &#125;;</span><br><span class="line">    <span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>) &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>@supports规则还支持使用操作符进行判断，这些操作符是<strong>not</strong>、<strong>and</strong>和<strong>or</strong>，分别表示“否定”“并且”“或者”。</p><p>甚至连续判断3个以上的CSS声明也没问题还支持嵌套语法</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: flex) <span class="keyword">and</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>) <span class="keyword">and</span> (<span class="attribute">gap</span>: <span class="number">0</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: flex) <span class="keyword">and</span> (<span class="keyword">not</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>)) &#123;&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/2/5-3.php">@supports嵌套语法测试实例页面</a></p><blockquote><p>@supports规则支持CSS自定义属性的检测和CSS选择器语法的检测。例如：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">--var</span>: blue) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@supports</span> selector(:default) &#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>其中，CSS自定义属性的检测没有任何实用价值，本书不展开讲解；而CSS选择器语法的检测属于CSS Conditional Rules Module Level 4规范中的内容，目前浏览器尚未大规模支持，暂时没有实用价值，因此本书暂不讲解。</p></blockquote><p><strong>浏览器还提供了CSS.supports()接口，让我们可以在JavaScript代码中检测当前浏览器是否支持某个CSS特性，语法如下：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">CSS</span>.<span class="title function_">supports</span>(propertyName, value);</span><br><span class="line"><span class="variable constant_">CSS</span>.<span class="title function_">supports</span>(supportCondition);</span><br></pre></td></tr></table></figure><p><strong>@supports规则的花括号可以包含其他任意@规则，甚至是包含@supports规则自身</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">display</span>: flex) <span class="keyword">and</span> (<span class="keyword">not</span> (<span class="attribute">display</span>: <span class="attribute">grid</span>)) &#123;</span><br><span class="line">    <span class="keyword">@supports</span> (<span class="attribute">animation</span>: none) &#123;</span><br><span class="line">        <span class="selector-class">.icon-loading</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">./loading.png</span>);</span><br><span class="line">            <span class="attribute">animation</span>: spin <span class="number">1s</span> linear infinite;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/2/5-4.php">@supports @规则嵌套测试实例页面</a></p><blockquote><p>我觉得大家在日常工作中，应该大胆使用CSS新特性，同时再多花一点额外的时间对这些新特性做一些兼容性方面的工作。这绝对是一件非常划算的事情，无论是对用户还是对自身的成长都非常有帮助。</p></blockquote><h2 id="从增强已有的CSS属性开始"><a href="#从增强已有的CSS属性开始" class="headerlink" title="从增强已有的CSS属性开始"></a>从增强已有的CSS属性开始</h2><h3 id="尺寸体系"><a href="#尺寸体系" class="headerlink" title="尺寸体系"></a>尺寸体系</h3><blockquote><p>尺寸体系，如果用一个金字塔来表示，那么在最上层的概念就是“Intrinsic Sizing”和“Extrinsic Sizing”。“Intrinsic Sizing”被称为“内在尺寸”，表示元素最终的尺寸表现是由内容决定的；“Extrinsic Sizing”被称为“外在尺寸”，表示元素最终的尺寸表现是由上下文决定的。</p></blockquote><h4 id="width-fit-content声明"><a href="#width-fit-content声明" class="headerlink" title="width:fit-content声明"></a>width:fit-content声明</h4><blockquote><p>fit-content关键字是新的尺寸体系关键字中使用频率最高的关键字。你可以把fit-content关键字的尺寸表现想象成“紧身裤”，大腿的肉对应的就是元素里面的内容，如果是宽松的裤子，那肉眼所见的尺寸就比较大，但是如果是紧身裤，则呈现的尺寸就是大腿实际的尺寸。</p><p>实际上，fit-content关键字的样式表现就是CSS2.1规范中的“shrink-to-fit”，我称其为“包裹性”。这种尺寸表现和元素应用display:inline-block、position:absolute等CSS声明类似，尺寸收缩但不会超出包含块级元素的尺寸限制。</p></blockquote><p><a href="https://demo.cssworld.cn/new/3/1-1.php">文字居中和左对齐自动布局实例页面</a></p><blockquote><p>如果是内联元素要收缩，可以使用display:inline-block声明；如果是块级元素要收缩，可以使用display:table声明。这两种方式效果一样，兼容性还更好，IE8+浏览器都提供了支持。这么一看，fit-content关键字岂不是没什么用？</p></blockquote><p><strong>使用fit-content关键字有两大优点。</strong></p><ul><li>保护了元素原始的display计算值，例如&lt;li&gt;元素要是设置成了display:table，前面的项目符号就不会出现，::marker伪元素也会失效。</li><li>让元素的尺寸有了确定的值，这是fit-content关键字最重要也最可贵的优点。</li></ul><p><strong>让元素的尺寸有了确定的值这点展开一下</strong></p><p>CSS中有不少布局需要有明确的元素的尺寸才能实现，非常典型的例子就是绝对定位元素使用margin:auto实现居中效果时需要设置具体的width或height的属性值，CSS代码示意如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cw-dialog</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;<span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">border</span>: solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是很多时候绝对定位元素的尺寸不是固定的，最终尺寸会根据内容自动变化，此时以上CSS就不适合了。有人想到了 translate 偏移 50%。这个方法不错，但是并不完美，而且这个地方占据了 transform 属性，这会导致绝对定位元素无法使用包含transform属性的动画效果。 此时如果使用 <strong>fit-content</strong> 关键字 。就不用担心包括transform属性的动画带来的冲突。 </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cw-dialog</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">height</span>: fit-content;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    ledt: <span class="number">0</span>; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">border</span>: solid;</span><br><span class="line">    <span class="attribute">animation</span>: tinUp .<span class="number">2s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/1-2.php">效果展示</a></p><h4 id="stretch、available和fill-available关键字究竟用哪个"><a href="#stretch、available和fill-available关键字究竟用哪个" class="headerlink" title="stretch、available和fill-available关键字究竟用哪个?"></a>stretch、available和fill-available关键字究竟用哪个?</h4><blockquote><p>我们在页面中放置一个没有样式设置的&lt;div&gt;元素，此时，该&lt;div&gt;元素的宽度自动填满可用空间。</p><p>stretch、available和fill-available这3个关键字虽然名称有所不同，但是作用都是一致的，那就是让元素的尺寸自动填满可用空间，就如同&lt;div&gt;元素的默认尺寸表现。</p><p>下面问题来了，究竟该使用stretch、available和fill-available这3个关键字中的哪一个呢？先简单分析一下这3个关键字。</p></blockquote><p>● stretch指“弹性拉伸”，是最新的规范中定义的关键字，替换之前的fill-available和available。</p><p>● available指“可用空间”，是Firefox浏览器使用的关键字，需要配合-moz-私有前缀使用。</p><p>● fill-available指“填充可用空间”，是webkit浏览器使用的关键字，需要配合-webkit-私有前缀使用。</p><blockquote><p>实际开发的时候，我们需要用到stretch关键字的场景并不多。首先，block水平的元素、弹性布局和网格布局中的子项默认都自带弹性拉伸特性；其次，对于替换元素、表格元素、内联块级元素等这些具有“包裹性”的元素，建议使用“宽度分离原则”</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/1-3.php">stretch关键字与button按钮的margin自适应实例页面</a></p><h4 id="min-content关键字"><a href="#min-content关键字" class="headerlink" title="min-content关键字"></a>min-content关键字</h4><blockquote><p>min-content关键字实际上就是CSS2.1规范中提到的“preferred minimum width”或者“minimum content width”，即“首选最小宽度”或者“最小内容宽度”。</p><p>元素由content-box、padding-box、border-box和margin-box组成，元素最终占据的尺寸由这4个盒子占据的尺寸决定。其中padding-box、border-box和margin-box的尺寸表现规则不会因为元素的不同而有所不同，但是content-box不一样，它随着内容的不同，首选最小宽度也会不同。这个有必要好好讲一讲。</p></blockquote><ol><li><p>替换元素</p><p> 按钮、视频和图片等元素属于替换元素，替换元素的首选最小宽度是当前元素内容自身的宽度</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./1.jpg&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 上面这段HTML代码中的图片，如果原始尺寸是256px×192px，则<section>元素的首选最小宽度就是256px。</p></li><li><p>CJK文字</p><p> CJK是Chinese/Japanese/Korean的缩写，指的是中文、日文、韩文这几种文字。这里以中文为代表加以说明。如果是一段没有标点的中文文字，则首选最小宽度是单个汉字的宽度。</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p &#123;</span><br><span class="line">width: min-content;</span><br><span class="line">outline: 1px dotted;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    感谢您的支持</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>非CJK文字</p><blockquote><p>非CJK文字指的是除中文、日文、韩文之外的文字，如英文、数字和标点等字符。非CJK文字的首选最小宽度是由字符单元的宽度决定的，所有连续的英文字母、数字和标点都被认为是一个字符单元，直到遇到中断字符。</p></blockquote><p> 哪些字符可以中断字符单元呢？</p><p> 1、Space空格（U+0020）无论是哪个浏览器，都能中断字符单元，并且忽略Space空格前后字符的类型</p><p> 2、短横线（U+002D），在webkit浏览器中可以中断字符单元</p><p> 3、在Firefox浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，不过后面的字符必须是字母而不能是数字</p><p> 4、在IE浏览器和Edge浏览器中，英文问号（U+003F）不能中断字符单元，而短横线（U+002D）可以，但是要求短横线前后是由字母、数字或短横线组成的字符单元，且这个字符单元的长度要大于1</p></li><li><p>最终的首选最小宽度</p><p> <a href="https://demo.cssworld.cn/new/3/1-5.php">一个元素最终的首选最小宽度是所有内部子元素中最大的那个首选最小宽度值</a></p></li></ol><h4 id="max-content关键字"><a href="#max-content关键字" class="headerlink" title="max-content关键字"></a>max-content关键字</h4><blockquote><p>max-content关键字表示最大内容宽度，max-content关键字的作用是让元素尽可能大，保证图文内容在一行显示，哪怕最终的宽度溢出外部容器元素</p></blockquote><p><a href="https://demo.cssworld.cn/new/3/1-6.php">示例</a></p><blockquote><p>对CSS新的尺寸体系做一个总结。带content这个单词的3个关键字fit-content、min-content和max-content都是“内在尺寸”（intrinsic sizing），尺寸表现和内容相关；stretch关键字（也包括available关键字和fill-available关键字）是“外在尺寸”（extrinsic sizing），尺寸表现和上下文有关。这4个关键字一起撑起了CSS世界的尺寸体系。</p></blockquote><h3 id="深入了解CSS逻辑属性"><a href="#深入了解CSS逻辑属性" class="headerlink" title="深入了解CSS逻辑属性"></a>深入了解CSS逻辑属性</h3><blockquote><p>整个CSS世界就是围绕“流”来构建的（详见《CSS世界》一书的第6页，1.3.2节）。在CSS2.1时代，CSS属性的定位都是基于方向的，而不是“流”。这样的设计其实是有问题的，基于方向进行定位虽然符合现实世界认知，但和CSS世界基于“流”的底层设计理念不符，这样就会产生不合理的问题。</p></blockquote><p>两个水平按钮要给它们设置间距，margin-right: 10px;但是当 文档流方向发生变化时即 direction:rtl; 时，在右侧会出现空隙，此时应该是设置成margin-left: 10px;的效果。.</p><p>如果我们一开始设置的不是符合现实世界认知的margin-right属性，而是符合CSS世界“流”概念的逻辑属性margin-inline-end，代码如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">margin-inline-end</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/2-1.php">效果对比</a></p><p><strong>CSS逻辑属性有限的使用场景</strong></p><blockquote><p>CSS逻辑属性需要配合writing-mode属性、direction属性或者text-orientation属性使用才有意义。</p><p>CSS中还有其他一些CSS属性值也可以改变DOM元素的呈现方向，例如flex-direction属性中的属性值row-reverse和column-reverse，但是请注意，这些属性值和CSS逻辑属性之间[没有任何关系](<a href="https://demo/">https://demo</a>. cssworld.cn/new/3/2-2.php)</p><p><a href="https://demo.cssworld.cn/new/3/2-3.php">模拟微信聊天界面</a></p></blockquote><p>[inline/block与start/end元素](<a href="https://demo.cssworld.cn/">https://demo.cssworld.cn/</a> new/3/2-4.php)</p><p><strong>width/height属性与inline-size/block-size逻辑属性</strong></p><h3 id="在CSS边框上做文章"><a href="#在CSS边框上做文章" class="headerlink" title="在CSS边框上做文章"></a>在CSS边框上做文章</h3><blockquote><p>一个图形元素的装饰部件主要是边框和背景。在CSS2.1时代，边框只能是纯色的，效果太单调了。于是CSS规范制定者就开始琢磨，是不是可以在CSS边框上做文章，通过支持图片显示来增强边框的表现力呢？</p></blockquote><h4 id="独一无二的border-image属性"><a href="#独一无二的border-image属性" class="headerlink" title="独一无二的border-image属性"></a>独一无二的border-image属性</h4><blockquote><p>所有与装饰有关的CSS属性都能从其他设计软件中找到对应的功能，如背景、描边、阴影，甚至滤镜和混合模式，但是唯独border-image属性是CSS这门语言独有的，就算其他软件有边框装饰，也不是border-image这种表现机制。这看起来是件好事情，你瞧，border-image多么与众不同！但实际上，border-image属性很少出现在项目代码中，其中重要的原因之一就是border-image属性过于特殊。</p></blockquote><p>（1）对开发者而言，border-image属性怪异的渲染机制，导致学习成本较高，掌握border-image属性的人并不多。而且很多时候该属性对源图像的规格和比例也有要求，这导致使用成本也比较高。</p><p>（2）对设计师而言，border-image属性的视觉表现和现实认知是不一致的，而设计师的视觉设计多基于现实认知，因此，设计师无法为border-image属性量身定制图形表现。另外，当下的设计趋势是扁平化而非拟物化，边框装饰通常在项目中不会出现。</p><p>（3）border-image属性怪异的渲染机制导致元素的4个边角成了4个尴尬的地方，实现的边框效果往往不符合预期，最终导致开发者放弃使用border-image属性。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-image</span>: <span class="built_in">url</span>(<span class="string">./q.svg</span>) <span class="number">54</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border-image-source</span>: <span class="built_in">url</span>(<span class="string">./q.svg</span>);</span><br><span class="line"><span class="attribute">border-image-slice</span>: <span class="number">54</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>border-image-slice属性的正式语法如下，表示支持1～4个数值或1～4个百分比值，后面可以带一个关键字fill</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-image-slice</span>: &lt;number-percentage&gt;&#123;<span class="number">1</span>,<span class="number">4</span>&#125; &amp;&amp; fill?</span><br></pre></td></tr></table></figure><blockquote><p>border-image-slice属性的作用是对原始的图像进行划分，划分的方位和顺序同margin属性、padding属性一样，遵循上、右、下、左的顺序。例如border-image-slice:20表示在距离源图像上方20px、距离源图像右侧20px、距离源图像下方20px、距离源图像左侧20px的地方进行划分</p></blockquote><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221024155122282.png" alt="image-20221024155122282"></p><blockquote><p>此时4个边角区域只有很小的一部分被划分，而剩余的上、下、左、右区域会被拉伸，因此，作用在.example元素上的效果就会如图3-22所示，其中增加的几根辅助线可以方便大家理解。</p></blockquote><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221024155150672.png" alt="image-20221024155150672"></p><p><a href="https://demo.cssworld.cn/new/3/3-1.php">示例</a></p><blockquote><p>理解了border-image-slice属性，border-image属性的学习就算完成了一半，剩下的就是学会控制九宫格的尺寸了，而控制九宫格尺寸的CSS属性就是border-image-width和border-image-outset。</p></blockquote><p><a href="https://demo.cssworld.cn/new/3/3-2.php">border-image-width</a></p><p><a href="https://demo.cssworld.cn/new/3/3-3.php">border-image-outset</a></p><p><a href="https://demo.cssworld.cn/new/3/3-4.php">border-image-repeat</a></p><blockquote><p>order-image-slice属性用于划分源图像，border-image-width用于控制九宫格第一区到第八区的尺寸，border-image-outset属性用于控制九宫格最中间第九区的尺寸。掌握这3个属性，就算完全理解border-image属性了。</p></blockquote><p>border-image属性的正式语法如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-image</span>: &lt;<span class="string">&#x27;border-image-source&#x27;</span>&gt; || &lt;<span class="string">&#x27;border-image-slice&#x27;</span>&gt; [/&lt;border-image-width&gt;| /&lt;<span class="string">&#x27;border-image-width&#x27;</span>&gt;? /&lt;<span class="string">&#x27;border-image-outset&#x27;</span>&gt;]? || &lt;<span class="string">&#x27;border-image-repeat&#x27;</span>&gt;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/3-5.php">示例</a></p><p><a href="https://demo.cssworld.cn/new/3/3-6.php">border-image实现效果示意</a></p><p><a href="https://demo.cssworld.cn/new/3/3-7.php">红色条纹渐变边框</a></p><p><a href="https://demo.cssworld.cn/new/3/3-8.php">圆角渐变边框</a></p><blockquote><p>CSS中共有 3 个属性可以实现对布局没有任何影响的轮廓扩展，分别是outline轮廓、box-shadow盒阴影和border-image边框图片</p></blockquote><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221024161943783.png" alt="image-20221024161943783"></p><p>● 如果需要轮廓带有渐变效果，一定是使用border-image属性。</p><p>● 如果需要轮廓效果是纯色，且4个角为直角，则优先使用outline属性；如果outline属性不能使用（如无障碍访问需要），则使用box-shadow属性；如果box-shadow属性已经有了其他样式，则使用border-image属性。</p><p>● 如果需要轮廓有圆角效果，则一定是使用box-shadow属性。</p><p>● 如果需要轮廓和元素之间还有一段间隙，则优先使用outline属性；如果outline属性不能使用，则使用border-image属性。</p><p>● 如果需要轮廓只有一个方向，则不考虑outline属性。</p><p>● 如果需要兼容IE浏览器，则border-image属性不考虑。</p><h3 id="position-属性增强"><a href="#position-属性增强" class="headerlink" title="position 属性增强"></a>position 属性增强</h3><blockquote><p>全新的position属性值——sticky，单词“sticky”的中文意思是“黏性的”，position:sticky就是黏性定位。为了让接下来的描述更精准，我们不妨在这里先约定：黏性定位就是指元素应用了position:sticky声明；相对定位就是指元素应用了position:relative声明；绝对定位就是指元素应用了position:absolute声明；固定定位就是指元素应用了position:fixed声明。</p></blockquote><blockquote><p>sticky属性值刚出来的时候，在圈子里是引发过一阵小热度的。但是，在2014年至2016年这长达3年的时间里，Chrome浏览器放弃了对它的支持，后来这个新特性就淡出了大众的视野。不知道出于什么原因，2017年之后，Chrome浏览器又重新开始支持黏性定位了。目前所有主流浏览器都已经支持黏性定位。</p></blockquote><blockquote><p>过去，黏性定位效果一定是通过JavaScript代码实现的。这个效果常用在导航元素上，具体表现为：当导航元素在屏幕内的时候，导航元素滚动跟随；当导航元素就要滚出屏幕的时候，导航元素固定定位。</p><p>sticky属性值的设计初衷就是把原来JavaScript才能实现的黏性效果改由CSS实现。下面来看一个例子。</p></blockquote><p><a href="https://demo.cssworld.cn/new/3/4-1.php">效果预览</a></p><p><strong>黏性定位效果底层的渲染规则和固定定位没有任何关系，而是相对定位的延伸。先说说黏性定位和相对定位相似的地方。</strong></p><p>（1）元素发生偏移的时候，元素的原始位置是保留的。</p><p>（2）创建了新的绝对定位包含块，也就是黏性定位元素里面如果有绝对定位的子元素，那这个子元素设置left属性、top属性、right属性和bottom属性时的偏移计算是相对于当前黏性定位元素的。</p><p>（3）支持设置z-index属性值来改变元素的层叠顺序。</p><p><strong>再说说黏性定位和相对定位不一样的地方。</strong></p><p>（1）偏移计算元素不一样。相对定位偏移计算的容器是父元素，而黏性定位偏移计算的元素是层级最近的可滚动元素（overflow属性值不是visible的元素）。如果一个可滚动元素都没有，则相对浏览器视窗进行位置偏移。</p><p>（2）偏移定位计算规则不一样。黏性定位的计算规则比较复杂，涉及多个黏性定位专有的概念。</p><p>（3）重叠表现不一样。相对定位元素彼此独立，重叠的时候表现为堆叠；但是黏性定位元素在特定布局结构下，元素重叠的时候并不是表现为堆叠，而是会有A黏性定位元素推开B黏性定位元素的视觉表现。</p><p><strong>注意的三个点</strong></p><ol><li><p>可滚动元素对黏性定位的影响</p><blockquote><p>通常的Web页面都是窗体滚动的，而黏性定位偏移计算的元素是层级最近的那个滚动元素。因此，如果黏性定位元素的某个祖先元素的overflow属性值不是visible，那么窗体滚动的时候就不会有黏性定位效果，</p></blockquote> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">div &#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">nav &#123;</span><br><span class="line">    position: sticky;</span><br><span class="line">    top: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 此时滚动页面，&lt;nav&gt;元素是没有黏性效果的。注意，这不是bug，也不是sticky属性值没有渲染，而是因为此时&lt;nav&gt;元素黏性定位的偏移计算是相对于父级&lt;div&gt;元素计算的，黏性效果也只有在&lt;div&gt;元素滚动的时候才能够体现。</p><p> 如果希望出现滚动，可以这样调整一下</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    display: block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果你的网页使用的是窗体滚动，又希望有黏性效果，那务必保证黏性定位元素的祖先元素中没有可滚动元素。</p></blockquote></li><li><p>深入理解黏性定位的计算规则</p><blockquote><p>如果黏性定位元素的父元素的高度和黏性定位元素的高度相同，则垂直滚动的时候，黏性定位效果是不会出现的。要讲清楚这个问题，就必须深入理解黏性定位的计算规则。</p></blockquote><p> 黏性定位中有一个“流盒”（flow box）的概念，指的是黏性定位元素最近的可滚动元素的尺寸盒子，如果没有可滚动元素，则表示浏览器视窗盒子。黏性定位中还有一个名为“黏性约束矩形”的概念，指的是黏性定位元素的包含块（通常是父元素）在文档流中呈现的矩形区域和流盒的4个边缘在应用黏性定位元素的left、top、right和bottom属性的偏移计算值后的新矩形的交集。由于滚动的时候流盒不变，而黏性定位元素的包含块跟着滚动，因此黏性约束矩形随着滚动的进行是实时变化的。假设我们的黏性定位元素只设置了top属性值，则黏性定位元素碰到黏性约束矩形的顶部时就开始向下移动，直到它完全被包含在黏性约束矩形中。<a href="https://demo.cssworld.cn/new/3/4-2.php">效果查看</a></p><p> 明白了黏性定位的计算规则，也就明白了为什么黏性定位元素的父元素和自身高度计算值一样的时候没有黏性效果。因为此时包含块高度和黏性定位元素的高度相同，这导致黏性约束矩形的最大高度和黏性定位元素的高度相同，黏性定位元素已经完全没有了实现黏性效果的空间。</p></li><li><p>理解黏性定位的堆叠规则</p><blockquote><p>黏性定位元素的偏移由容器决定，如果多个黏性定位元素在同一容器中，则这几个黏性定位元素会产生元素重叠的情况；如果黏性定位元素分布在不同的容器中，同时这些容器在布局上是上下紧密相连的，则视觉上会表现为新的黏性定位元素挤开原来的黏性定位元素，形成依次占位的效果。</p></blockquote><p> <a href="https://demo.cssworld.cn/new/3/4-3.php">效果查看</a></p><blockquote><p>黏性定位元素在<strong>同一个容器下会重叠</strong>，而在<strong>不同容器下则会依次推开</strong>，这和上面等高父元素没有黏性效果的原因一样，都是黏性定位计算规则下的样式表现。</p></blockquote><blockquote><p>Safari浏览器中使用黏性定位需要添加-webkit-私有前缀。IE浏览器可以使用Polyfill进行支持，可以兼容到IE9+版本。同时设置top属性、bottom属性的时候，上下两个方位的黏性效果会同时生效。水平方向的left属性、right属性也是类似的，不过由于水平滚动场景不常见，因此，left属性、right属性并不常用。</p></blockquote><p> <a href="https://demo.cssworld.cn/new/3/4-4.php">层次滚动效果</a></p><blockquote></blockquote></li></ol><h3 id="font-family属性和-font-face规则新特性"><a href="#font-family属性和-font-face规则新特性" class="headerlink" title="font-family属性和@font-face规则新特性"></a>font-family属性和@font-face规则新特性</h3><blockquote><p>本节主要介绍与字体相关的一些新特性，包括font-family属性的功能加强，以及@font-face自定义字体。</p></blockquote><p>全新的通用字体族包括以下几种。</p><p>● system-ui：系统UI字体。</p><p>● emoji：适用于emoji字符的字体家族。</p><p>● math：适用于数学表达式的字体家族。</p><p>● fangsong：中文字体中的仿宋字体家族。</p><h4 id="system-ui"><a href="#system-ui" class="headerlink" title="system-ui"></a>system-ui</h4><blockquote><p>在过去，如果想要使用系统字体，只能使用font:menu、font:status-bar等CSS声明。但是，menu、status-bar、small-caption等font关键字属性值是包含字号的，不同操作系统中的字号会不一样，因此我们还需要通过设置font-size属性值重置字号大小，比较麻烦。system-ui字体族的出现很好地解决了使用系统字体的需求。</p></blockquote><p><strong>为啥要使用系统字体？</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">font</span>-familly: system-ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不同字体在不同系统下显示有差异，效果可能不如系统字体，还有可能发生网页设置的通用字体与系统字体冲突的问题</p><h4 id="emoji"><a href="#emoji" class="headerlink" title="emoji"></a>emoji</h4><blockquote><p>前主流的操作系统都已经内置emoji字体，如macOS、iOS、Android操作系统和Windows 10操作系统等。然而，虽然主流的操作系统内置了emoji字体，但是有些emoji字符并不会显示为彩色的图形，需要专门指定emoji字体</p></blockquote><p><strong>emoji字体设置应该放在系统字体设置后面</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.emoji</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>● Apple Color Emoji用在Apple的产品中的，如iPhone（iOS）或者Mac Pro（macOS）等。</p><p>● Segoe UI Emoji是用在Windows操作系统中的emoji字体。</p><p>● Segoe UI Symbol是在Windows 7操作系统中添加的一种新字体，是一种Unicode编码字体，显示的是单色图案，非彩色图形。</p><p>● Noto Color Emoji是谷歌的emoji字体，用在Android和Linux操作系统中。</p><p><strong>以上4种字体涵盖了所有主流的操作系统。可以专门定义一个新的emoji字体来优化代码</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Emoji;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;Apple Color Emoji&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Segoe UI Emoji&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Segoe UI Symbol&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Noto Color Emoji&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.emoji</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Emoji;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/5-1.php">Emoji字体设置后的作用实例页面</a></p><p><a href="https://demo.cssworld.cn/new/3/5-2.php">Emoji字体设置放在最后的效果实例页面</a></p><p><a href="https://demo.cssworld.cn/new/3/5-3.php">Emoji字体unicode-range范围限定效果实例页面</a></p><h4 id="math通用字体族"><a href="#math通用字体族" class="headerlink" title="math通用字体族"></a>math通用字体族</h4><blockquote><p>math通用字体族的作用是方便在Web中展现数学公式。数学公式包含非常多的层次关系，需要特殊的字体进行支持</p></blockquote><p>有一种名为MathML的XML语言专门用来呈现富有层级关系的数学公式（对MathML的详细介绍见<a href="https://www.zhangxinxu.com/wordpress/?p=8108%EF%BC%89">https://www.zhangxinxu.com/wordpress/?p=8108）</a></p><p>理论上在开发的时候，我们只要使用MathML语言进行数学公式书写就好了，无须关心背后的字体。但是，在实际操作中，Chrome浏览器并不支持MathML。为了兼容Chrome浏览器，我们需要对数学标签进行CSS重定义，此时就需要用到math通用字体族：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">math &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Cambria Math, Latin Modern Math;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，Cambria Math是Windows操作系统中的数学字体，Latin Modern Math是macOS中的数学字体。</p><h4 id="fangsong通用字体族"><a href="#fangsong通用字体族" class="headerlink" title="fangsong通用字体族"></a>fangsong通用字体族</h4><blockquote><p>个字体族来自中文字体“仿宋”，仿宋是介于宋体（衬线字体）和楷体（手写字体）之间的一种字体。和宋体相比，仿宋笔画的水平线通常是倾斜的，端点修饰较少，笔画宽度变化较小。一般非常正式的公告才会用到这个字体，平常开发项目中很少用到</p></blockquote><h4 id="local-函数与系统字体的调用"><a href="#local-函数与系统字体的调用" class="headerlink" title="local()函数与系统字体的调用"></a>local()函数与系统字体的调用</h4><blockquote><p>从IE9浏览器开始，@font-face规则开始支持使用local()函数调用系统安装的字体。使用local()函数主要有两大好处。</p></blockquote><p>（1）简化字体调用。例如我们要使用等宽字体，但是不同操作系统中的等宽字体不一样。为了兼容，我们需要一长串不同的字体名称作为font-family属性值，但是根本就记不住这么多字体，没关系，有了local()函数，使用这些字体的方法就一下子变得简单了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Mono;</span><br><span class="line">    <span class="comment">/*每个单词可不加引号*/</span>、</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;Menlo&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Monaco&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Consolas&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Liberation Mono&#x27;</span>),</span><br><span class="line">        ...;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Mono;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）在自定义字体场景下提高性能。例如我们希望在各个平台都能使用Roboto字体，则可以像下面这样重新定义下Roboto字体</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Roboto;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&quot;Roboto&quot;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&quot;Roboto-Regular&quot;</span>),</span><br><span class="line">        <span class="built_in">url</span>(<span class="string">&quot;./Roboto.woff2&quot;</span>) <span class="built_in">format</span>(<span class="string">&quot;woff2&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时local()函数可以让已经安装了Roboto字体的用户无须发起额外的Roboto字体请求，优化了这部分用户的使用体验。</p><h4 id="unicode-range属性"><a href="#unicode-range属性" class="headerlink" title="unicode-range属性"></a>unicode-range属性</h4><blockquote><p>我们在使用@font-face规则自定义字体的时候，还可以通过使用unicode-range属性来决定自定义的字体作用在哪些字符上。例如设置emoji字体的作用范围</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Emoji;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;Apple Color Emoji&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Segoe UI Emoji&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Segoe UI Symbol&#x27;</span>),</span><br><span class="line">        <span class="built_in">local</span>(<span class="string">&#x27;Noto Color Emoji&#x27;</span>);</span><br><span class="line">    unicode-range: U+<span class="number">1</span>F000-<span class="number">1</span>F644,U+<span class="number">203</span>C-<span class="number">3299</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在前端领域，使用Unicode编码显示字符在各种语言中都是可以的，不过前缀各有不同。</p><p>（1）在HTML中，字符输出可以使用&amp;#x加上Unicode编码。</p><p>（2）在JavaScript文件中，为了避免中文乱码需要转义，应使用\u加上Unicode编码。</p><p>（3）在CSS文件中，如CSS伪元素的content属性，就直接使用\加上对应字符的Unicode编码值。</p><p>（4）unicode-range属性则是使用U+加上Unicode编码。</p><p><strong>unicode-range属性常用的Unicode编码值对中文用户而言，最常用的Unicode编码值有下面这些。</strong></p><p>● 基本二次汉字：[0x4e00,0x9fa5]（或十进制[19968,40869]）。</p><p>● 数字：[0x30,0x39]（或十进制[48, 57]）。</p><p>● 小写字母：[0x61,0x7a]（或十进制[97, 122]）。</p><p>● 大写字母：[0x41,0x5a]（或十进制[65, 90]）。</p><p>如果想获取某一个具体字符的Unicode编码值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">U = <span class="string">&#x27;℃&#x27;</span>.<span class="title function_">codePointAt</span>().<span class="title function_">toString</span>(<span class="number">16</span>) <span class="comment">// 2103</span></span><br></pre></td></tr></table></figure><h4 id="woff-woff2字体"><a href="#woff-woff2字体" class="headerlink" title="woff/woff2字体"></a><strong>woff/woff2字体</strong></h4><blockquote><p>为了方便在网页中高效使用自定义字体，woff和woff2应运而生，它们是两个专门用在Web中的字体。其中，woff字体在2012年12月被World Wide Web Consortium（W3C）推荐使用，IE9+浏览器支持该字体。woff2字体最早在2013年7月的Chrome Canary版本上就可以使用了，发展到现在，几乎已经成为自定义图标字体使用的标准配置，目前浏览器对它的兼容性已经相当不错了。</p><p>woff2字体没有必要再开启GZIP，因为这个字体文本本身就是压缩过的。</p><p>最后说一下woff字体的MIME type值。关于这一点有点小争议，拿woff2字体举例，Google使用的是font/woff2，而W3C则推荐使用application/font-woff2。我个人的建议是，在Web中使用的时候采用font/woff2，在服务器端进行MIME type配置的时候采用application/font- woff2。</p></blockquote><h4 id="font-display"><a href="#font-display" class="headerlink" title="font-display"></a>font-display</h4><blockquote><p>假设我们定义一个名为MyFont的自定义字体，并且采用url()函数外链的方式引入..这时浏览器的字体加载行为表现为，应用MyFont字体的文本会先被隐藏，直到字体加载结束才会显示，但是这个隐藏最多持续3s，3s后字体仍未加载结束则会使用其他字体代替。这种加载体验利弊参半。</p></blockquote><blockquote><p><strong>字体显示时间线</strong></p><p>字体显示时间线开始于浏览器尝试下载字体的那一刻，整个时间线分为3个时段，浏览器会在这3个时段让元素表现出不同的字体渲染行为。</p><p>● 字体阻塞时段：如果未加载字体，任何试图使用它的元素都必须以不可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</p><p>● 字体交换时段：如果未加载字体，任何试图使用它的元素都必须以可见的方式渲染后备字体；如果在此期间字体成功加载，则正常使用它。</p><p>● 字体失败时段：如果未加载字体，则浏览器将其视为加载失败，并使用正常字体进行回退渲染。font-display的属性值就是围绕字体显示时间线展开的。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-display</span>: [auto | block | swap | fallback | optional]</span><br></pre></td></tr></table></figure><p>● auto：字体显示策略由浏览器决定，大多数浏览器的字体显示策略类似block。</p><p>● block：字体阻塞时段较短（推荐3s），字体交换时段无限。此值适合图标字体场景。</p><p>● swap：字体阻塞时段极短（不超过100ms），字体交换时段无限。此值适合用在小段文本，同时文本内容对页面非常重要的场景。</p><p>● fallback：字体阻塞时段极短（不超过100ms），字体交换时段较短（推荐3s）。此值适合用于大段文本，例如文章正文，同时对字体效果比较看重的场景，例如广告页面、个人网站等。</p><p>● optional：字体阻塞时段极短（不超过100ms），没有字体交换时段。此值的作用可以描述为，如果字体可以瞬间被加载（例如已经被缓存了），则浏览器使用该字体，否则使用回退字体。optional是日常Web产品开发更推荐的属性值，因为无论任何时候，网页内容在用户第一次访问时快速呈现是最重要的，不能让用户等待很长时间后再看到你认为的完美效果。</p><blockquote><p>如果自定义字体的大小在30 KB以内，建议直接用Base64将其内联在页面中。不过只有woff2字体采取内联处理，woff字体依旧采用url()函数外链体验最佳，因为此时现代浏览器中的字体都是瞬间渲染，根本无须使用font-display属性进行字体加载优化</p></blockquote><h3 id="字符单元的中断与换行"><a href="#字符单元的中断与换行" class="headerlink" title="字符单元的中断与换行"></a>字符单元的中断与换行</h3><p>字符单元默认的中断与换行规则如下。</p><p>● Space普通空格、Enter（回车）空格和Tab（制表符）空格这3种空格无论怎样组合都会合并为单个普通空格。</p><p>● 文字可以在CJK文本、普通空格和短横线连字符处换行，连续英文单词和数字不换行。</p><p>word-break</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">word-break</span>: normal | break-all | keep-all | break-word;</span><br></pre></td></tr></table></figure><p>keep-all这个属性值可以让CJK文本不换行排版，同时又不影响非CJK文本的排版行为<a href="https://demo.cssworld.cn/new/3/6-1.php">效果预览</a></p><p><a href="https://demo.cssworld.cn/new/3/6-2.php">word-break 属性效果</a></p><p>hyphens属性与连字符</p><blockquote><p>hyphens是专为英文场景设计的一个属性，这个属性可以让英文单词断开换行的时候带上连字符（也就是短横线），这样可以让读者知道上一行的尾部和下一行的头部连起来是一个完整的单词</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hyphens</span>: none| manual|auto;</span><br></pre></td></tr></table></figure><blockquote><p>属性值auto可以让英文单词在行尾自动换行，同时带上短横线。需要注意的是，英文单词换行不需要设置word-break或者word-wrap属性，hyphens属性自带换行能力。如果你设置了word-break:break-all声明，反而不会有短横线效果。</p></blockquote><blockquote><p>连字符总共分两种。</p><p>一种是“硬连字符”（U+2010），称为可见的换行机会。这个字符就是我们键盘上的短横线“-”，是可见的。</p><p>另一种是“软连字符”（U+00AD），称为不可见的换行机会。这个字符很有意思，通常情况是隐藏的，但是，如果浏览器觉得有必要在软连字符所在位置打断单词，则连字符又会变为可见。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好，我叫zhang<span class="symbol">&amp;shy;</span>xin<span class="symbol">&amp;shy;</span>xu，感谢大家购买我的书。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/6-3.php">hyphens:manual与软连字符优化排版效果实例页面</a></p><blockquote><p>不过由于在<strong>Chrome浏览器中不支持hyphens:none这个声明</strong>，因此其没有实用价值。</p></blockquote><h4 id="lt-wbr-gt-与精确换行的控制"><a href="#lt-wbr-gt-与精确换行的控制" class="headerlink" title="&lt;wbr&gt;与精确换行的控制"></a>&lt;wbr&gt;与精确换行的控制</h4><blockquote><p>HTML中有一个&lt;wbr&gt;元素标签，可以实现连续英文和数字的精准换行，具体效果如下：如果宽度足够，不换行；如果宽度不足，则在&lt;wbr&gt;元素所在的位置进行换行。也就是说，&lt;wbr&gt;元素提供了一个换行机会。</p></blockquote><p>[&lt;wbr&gt;标签与排版效果优化实例页面](<a href="https://demo.cssworld.cn/new/3/6-4">https://demo.cssworld.cn/new/3/6-4</a>. php)</p><p><strong>&lt;wbr&gt;实现换行原理</strong></p><blockquote><p>&lt;wbr&gt;之所以能够创造新的换行机会，是因为其创建了一个带有换行特性的宽度为0px的空格。该空格的Unicode编码是U+200B，因此&lt;wbr&gt;标签也可以替换为&#x200b;，例如下面HTML代码实现的效果和标签的效果是一样的</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好，我叫zhang<span class="symbol">&amp;#x200B;</span>xin<span class="symbol">&amp;#x200B;</span>xu，感谢大家购买我的书。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>大家好，我叫zhang<span class="tag">&lt;<span class="name">wbr</span>&gt;</span>xin<span class="tag">&lt;<span class="name">wbr</span>&gt;</span>xu，感谢大家购买我的书。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>IE不兼容处理</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wbr<span class="selector-pseudo">:after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="string">&#x27;\00200B&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>&lt;wbr&gt;与&lt;br&gt;换行的区别</strong></p><blockquote><p>&lt;wbr&gt;是“Word Break Opportunity”的缩写，表示有机会就断开换行；而&lt;br&gt;则是直接换行显示，无论宽度是否足够。</p></blockquote><blockquote><p>● 动态文本内容换行使用word-break:break-all和word-wrap:break-word组合代码，如果要彻底换行，还可以使用line-break:anywhere。</p><p>● 静态内容排版不建议使用word-break属性、word-wrap属性或者line-break属性，如果是英文单词，则使用&shy;软连字符优化排版；如果是非英文单词，则使用&lt;wbr&gt;标签优化排版。</p></blockquote><h4 id="overflow-wrap-anywhere声明有什么用"><a href="#overflow-wrap-anywhere声明有什么用" class="headerlink" title="overflow-wrap:anywhere声明有什么用"></a>overflow-wrap:anywhere声明有什么用</h4><blockquote><p>这里主要讲一下属性值anywhere的作用。在展开讲解之前，先给大家讲解一个概念，关于“硬换行”和“软换行”。硬换行会在文本的换行点处插入实际换行符；而软换行的文本实际上仍在同一行，但看起来它被分成了多行，例如通过word-break:break-all让长英文单词换行就属于软换行。</p><p>属性值anywhere正常状态下的效果和属性值break-word类似，具体描述为：如果行中没有其他可接受的断点，则可以在任何点断开原本不可断开的字符串（如长单词或URL），并且在断点处不插入连字符。</p><p>属性值anywhere和属性值break-word的不同之处在于，overflow-wrap:anywhere在计算最小内容尺寸的时候会考虑软换行，而overflow-wrap:break-word则不会考虑软换行</p></blockquote><p>overflow-wrap属性的正式语法如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow-wrap</span>: normal | break-word | anywhere;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/6-5.php">overflow-wrap:anywhere和break-word的区别实例页面</a></p><blockquote><p>由于overflow-wrap:anywhere的兼容性不佳，因此它目前的实用性远不及line- break:anywhere，大家了解即可。</p></blockquote><h4 id="text-align属性相关的新特性"><a href="#text-align属性相关的新特性" class="headerlink" title="text-align属性相关的新特性"></a>text-align属性相关的新特性</h4><blockquote><p>text-align属性支持常用的属性值left、right、center、justify，也支持逻辑属性值start、end，除此之外，还新增了多个其他属性值。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-align</span>: match-parent| justify-all| &lt;string&gt;;</span><br></pre></td></tr></table></figure><blockquote><p>不过这几个新增的属性值的兼容性都不太好，因此不适合在生产环境中使用，大家先简单了解一下即可。</p></blockquote><p>match-parent</p><blockquote><p>match-parent视觉表现类似inherit，由于text-align属性本身就具有继承性，因此，match-parent不是用来改变视觉上的对齐效果的，而是用来改变“看不见”的对齐计算值。</p></blockquote><p>justify-all属性</p><blockquote><p>它和justify属性值的区别在于justify-all属性值可以让最后一行也表现为两端对齐。可惜目前还没有浏览器支持justify-all属性值</p></blockquote><p><strong>CSS Text Module Level 4规范中，text-align属性还新增了对字符属性值的支持。</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">td</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: <span class="string">&#x27;.&#x27;</span> center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">col</span> <span class="attr">width</span>=<span class="string">&quot;40&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>长途电话费<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥1.30<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥2.50<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥10.80<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥111.02<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥85<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>￥.30<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时，单元格的数值会按照字符“.”进行对齐</p><h4 id="text-decoration属性全新升级"><a href="#text-decoration属性全新升级" class="headerlink" title="text-decoration属性全新升级"></a>text-decoration属性全新升级</h4><blockquote><p>text-decoration属性则是一个CSS缩写属性，完整的CSS属性包括text-decoration-line、text-decoration- style、text-decoration-color和text-decoration-thickness。</p></blockquote><ul><li><p>text-decoration-line</p><p>  表示装饰线的类型。支持多个值一起使用</p><ol><li>none 没有装饰线</li><li>underline 下划线</li><li>overline 上划线</li><li>line-through 贯穿线</li></ol></li><li><p>text-decoration-style</p><p>  表示装饰线的样式风格，</p><ol><li>solid    实线</li><li>double 双实线</li><li>dotted 点线</li><li>dashed 虚线</li><li>wavy 波浪线</li></ol></li><li><p>text-decoration-color：表示装饰线的颜色。</p></li><li><p>text-decoration-thickness：表示装饰线的粗细</p></li></ul><p>正式语法：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">text-decoration</span>: &lt;text-decoration-line&gt; || &lt;text-decoration-style&gt; || &lt;text-decoration-color&gt; || &lt;text-decoration-thinckness&gt;</span><br></pre></td></tr></table></figure><p>意思就是，4个子属性值位置随机、组合随机</p><p><a href="https://demo.cssworld.cn/new/3/8-1.php">text-decoration 属性叠加</a></p><p><a href="https://demo.cssworld.cn/new/3/8-2.php">宽度100%自适应的波浪线效果实现实例页面</a></p><p><strong>text-underline-position:under声明</strong></p><p>text-underline-position属性可以用来设置下划线的位置。</p><p><a href="https://demo.cssworld.cn/new/3/8-3.php">text-underline-position属性实例页面</a></p><blockquote><p>text-underline-position属性除了支持under，还支持left、right和from-font这几个CSS规范定义的属性值。</p><p>● left和right这两个属性值平常根本用不到，只有在使用writing-mode属性让文字垂直排版，并且需要控制下划线左右位置的时候才会用到。</p><p>● from-font是CSS文本装饰规范Level 4新增的属性值，表示优先使用字体文件中设置的下划线位置，如果字体没有设置下划线对齐信息，就使用auto效果。大家目前可以无视from-font这个属性值，因为就算不考虑其目前糟糕的兼容性，这个属性值也是非常不实用的，限制太多了。</p><p>总而言之，如果使用了文字的下划线效果，你可能需要text-underline-position: under来优化下划线的显示位置。</p></blockquote><p><strong>text-underline-offset属性</strong></p><blockquote><p>text-underline-position属性虽然可以调整下划线的位置，但是调整的位置都是固定的，不能满足多变的开发需求。此时，你更需要text-underline-offset属性。</p></blockquote><p><a href="https://demo.cssworld.cn/new/3/8-4.php">text-underline-offset属性实例页面</a></p><blockquote><p>百分比值表示偏移量相对于1em的大小。因此，text-underline-offset: 100%等同于text-underline-offset:1em。text-underline-offset支持负值，此时下划线就会向上偏移。text-underline-offset属性只对下划线类型的装饰线有效，对删除线和上划线都无效</p></blockquote><p><strong>text-decoration-skip属性</strong></p><blockquote><p>text-decoration-skip属性可以用来控制装饰线和文字之间的重叠关系，这里的装饰线专指下划线。因为一些英文字符（如“g”“q”）的“小尾巴”会和下划线重叠，所以需要使用text -decoration-skip属性设置装饰线是跳过文字，还是和文字连在一起。虽然删除线（text-decoration:line-through）也会和文字重叠，但是它并不是text-decoration- skip属性的目标装饰线，因为删除线必须贯穿文字。</p></blockquote><h3 id="color属性与颜色设置"><a href="#color属性与颜色设置" class="headerlink" title="color属性与颜色设置"></a>color属性与颜色设置</h3><p>148<strong>个颜色关键字</strong></p><blockquote><p><a href="https://demo.cssworld.cn/new/3/9-1.php">查看</a></p></blockquote><p>（1）HTML中color属性算法和CSS中的color属性算法是不一样的。同样是一个无法识别的颜色关键字，在HTML中这个无法识别的颜色关键字会渲染成另外一个颜色，而在CSS中会直接忽略这个颜色关键字。具体案例参见《CSS世界》一书的9.1.1节。</p><p>（2）颜色关键字设置的颜色都是实色，不带透明度。目前没有CSS语法可以直接让颜色关键字带有透明度，唯一可行的方式是借助animation-delay负值实现。</p><p>（3）颜色关键字不区分大小写。例如下面语法也是可以正常解析的</p><p>（4）有一些颜色关键字是互相等同的</p><p>（5）所有颜色关键字中，只有两个颜色关键字是以“deep”开头的，分别是深天蓝色deepskyblue和深粉色deeppink，这是我最喜爱的两个颜色关键字。</p><p>（6）暗灰色darkgray的颜色要比灰色gray更浅，因此，并不是有“dark”前缀的颜色关键字控制的颜色就更深。</p><p>（7）在148个颜色关键字中，只有CSS Color Level 4新增的颜色关键字rebeccapurple不是规范的颜色名词，有人或许会奇怪为什么会有这样“不规范”的命名，实际上，这个命名的背后有一段你不知道的温情故事</p><h4 id="transparent关键字"><a href="#transparent关键字" class="headerlink" title="transparent关键字"></a><strong>transparent关键字</strong></h4><blockquote><p>透明色</p></blockquote><h4 id="currentColor关键字"><a href="#currentColor关键字" class="headerlink" title="currentColor关键字"></a><strong>currentColor关键字</strong></h4><blockquote><p>currentColor关键字非常实用，且无可替代，它表示当前元素（或伪元素）所使用的color属性的计算值，currentColor关键字从IE9浏览器开始被支持。比较常用的全局设置是：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">fill: currentColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>需要注意的是，CSS中很多属性的默认颜色就是color属性值，没有必要专门指定currentColor关键字，包括border-color、outline-color、caret-color、text-shadow、box-shadow等CSS属性</p></blockquote><h4 id="RGB颜色和HSL颜色的新语法"><a href="#RGB颜色和HSL颜色的新语法" class="headerlink" title="RGB颜色和HSL颜色的新语法"></a><strong>RGB颜色和HSL颜色的新语法</strong></h4><p><strong>HSL颜色</strong></p><blockquote><p>HSL颜色是由色调（Hue）、饱和度（Saturation）和亮度（Lightness）这3个元素组成的。HSL就是由这3个元素对应的英文单词的首字母组成的。色调值的大小是任意的，因为CSS世界中与色调相关的数值都是角度值，其单位是deg，所以无论设置什么值，最终都会在0～360deg这个范围中解析，例如−120deg=240deg、480deg=120deg。</p></blockquote><p><strong>RGBA颜色</strong></p><blockquote><p>从IE9浏览器开始，支持设置颜色的透明度了，RGBA和HSLA中的字母A指的就是Alpha透明通道，透明度取值范围任意，但是渲染范围是0～1，也就是小于0的透明度会当作0渲染，大于1的透明度会当作1渲染</p></blockquote><p><strong>#RRGGBBAA颜色</strong></p><blockquote><p>目前现代浏览器已经全面支持#RRGGBBAA颜色。其中R、G、B还是原来的十六进制表示的RGB色值，范围从00～FF，至于这里新出现的AA，则表示透明度，范围也是00～FF。</p><p>#RRGGBBAA颜色虽然很实用，但是透明度的转换却没有RGB色值那么方便，因为透明度范围是0%～100%，而00～FF的十进制范围是0～255，所以需要转换</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Alpha 范围 0~1</span></span><br><span class="line"><span class="variable constant_">AA</span> = (<span class="title class_">Alpha</span> * <span class="number">255</span>).<span class="title function_">toString</span>(<span class="number">16</span>)</span><br></pre></td></tr></table></figure><p>透明度50%就等于(0.5*255).toString(16)，结果是7f.8，约等于80。因此#FF000080就表示透明度约为50%的红色。</p><blockquote><p>同样，#RRGGBBAA颜色也支持缩写，例如#f308等同于#ff330088</p></blockquote><h3 id="必学必会的background属性新特性"><a href="#必学必会的background属性新特性" class="headerlink" title="必学必会的background属性新特性"></a>必学必会的background属性新特性</h3><h4 id="background-size属性"><a href="#background-size属性" class="headerlink" title="background-size属性"></a>background-size属性</h4><ol><li><p>cover和contain</p><p> cover和contain是两个关键字属性值，两者都不会改变背景图的原始比例，非常适合背景图像高宽不确定的场景。</p><p> <a href="https://demo.cssworld.cn/new/3/10-1.php">效果示例</a></p></li><li><p>理解auto关键字下的尺寸渲染规则</p><blockquote><p>在深入理解auto关键字的尺寸渲染规则之前，我们需要先了解一下常见图像的内在尺寸和内在比例。在CSS世界中，常见的图像有以下几种。</p></blockquote><p> ● 位图。例如JPG或者PNG图片都属于位图，这些图像总是有自己的<strong>内在尺寸（原始图像大小）</strong>和<strong>内在比例（原始图像比例）</strong>。</p><p> ● 矢量图。例如SVG图像就属于矢量图，这些图像不一定具有内在尺寸。如果水平尺寸和垂直尺寸都设置了，那么它就具有内在的比例；如果没有设置尺寸，或者只设置了一个方向的尺寸，它可能有比例，也可能没有比例，要视SVG内部代码而定，如有些SVG元素内部只有&lt;defs&gt;元素，此时矢量图就没有比例。</p><p> ● 渐变图像。就是使用CSS渐变语法绘制的图像，这些图像是没有内在尺寸和内在比例的。</p><p> ● 元素图像。例如使用element()函数把DOM元素作为背景图，此时的内在尺寸就是这个DOM元素的尺寸。</p><p> <strong>auto关键字的尺寸渲染规则</strong></p><p> （1）如果图像水平和垂直方向同时具有内在尺寸，则按照图像原始大小进行渲染。例如一个PNG图片尺寸是800px×600px，那么背景图的尺寸就是800px×600px，这就是多倍图一定要设置background-size属性的原因，否则只能显示部分图像内容。</p><p> （2）如果图像没有内在尺寸，也没有内在比例，则按照背景定位区域的大小进行渲染，等同于设置属性值为100%。所以，CSS渐变图像默认都是覆盖整个背景定位区域的，</p><p> （3）如果图像没有内在尺寸，但具有内在比例，则渲染效果等同于设置属性值为contain <a href="https://demo.cssworld.cn/new/3/10-2.php">效果示例</a></p><blockquote><p>preserveAspectRatio=”none”可以去除SVG图像的内在比例，根据我的测试，除Firefox浏览器的渲染有问题外，IE、Edge和Chrome浏览器都可以达到预期效果。</p></blockquote><p> （4）如果图像只有一个方向有内在尺寸，但又具有内在比例，则图像会拉伸到该内在尺寸的大小，同时宽高比符合内在比例</p><p> （5）如果图像只有一个方向有内在尺寸而没有内在比例，则图像有内在尺寸的一侧会拉伸到该内在尺寸大小，没有设置内在尺寸的一侧会拉伸到背景定位区域大小。</p></li><li><p>数值或百分比值</p><p> background-size属性值无论是数值还是百分比值，都不能是负值，其中百分比值是相对于元素的背景定位区域计算的。背景定位区域是由background-origin属性决定的，默认值是padding box。<a href="https://demo.cssworld.cn/new/3/10-3.php">效果展示</a></p></li></ol><h4 id="background属性最成功的设计——多背景"><a href="#background属性最成功的设计——多背景" class="headerlink" title="background属性最成功的设计——多背景"></a>background属性最成功的设计——多背景</h4><p>语法很简单，就是使用逗号分隔多个独立的背景定位语法。</p><p>、</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.multiple-backgrounds</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">1.jpg</span>) no-repeat top,<span class="built_in">url</span>(<span class="string">1.jpg</span>) no-repeat bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>CSS渐变本质上也是一种图像，它也可以作为background-image的属性值。为什么CSS渐变的出现让多背景重获新生了呢？</strong></p><p>（1）CSS渐变可以实现纯色效果，只要渐变起止颜色一样即可。</p><p>（2）background-size属性也支持多背景，且可以任意控制尺寸。</p><p>[css渐变和多背景实现加减图标按钮效果](<a href="https://demo.cssworld.cn/new/3/10-">https://demo.cssworld.cn/new/3/10-</a> 4.php)</p><p><a href="https://demo.cssworld.cn/new/3/10-5.php">多背景实现灰白网格效果</a></p><p>更复杂、更“炫酷”的背景图案和纹理效果可以访问Css3 Patterns Gallery网站</p><p>如果想让语句合法，则需要使用CSS多背景语法，并且颜色值必须放在最后</p><h4 id="background-clip"><a href="#background-clip" class="headerlink" title="background-clip"></a>background-clip</h4><p>支持以下属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-clip</span>:border-box|padding-box|content-box|text;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>其中border-box是默认值，表示背景图像或者背景颜色的显示区域是整个border-box，也就是边框的下方也会显示背景内容。</p></blockquote><p>background-clip属性最实用的应用场景之一就是控制背景颜色的显示范围</p><p>举个例子，我们想要模拟一个复选框效果，设计师设计的复选框尺寸只有18px×18px，区域太小了，不容易点中，尤其是在移动端，此时我们就可以借助透明边框增大点击区域的范围，</p><ul><li><h5 id="HTML：-1"><a href="#HTML：-1" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认：<span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span> </span><br><span class="line">选中：<span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;checkbox checked&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-1"><a href="#CSS：-1" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.checkbox</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">18px</span>; <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">3px</span> solid transparent;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span>, inset -<span class="number">1px</span> <span class="number">0</span>, inset <span class="number">0</span> -<span class="number">1px</span>, inset <span class="number">1px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: gray;</span><br><span class="line">    user-select: none;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.checked</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: deepskyblue;</span><br><span class="line">    <span class="attribute">background</span>: currentColor;</span><br><span class="line">    <span class="attribute">background-clip</span>: padding-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.checked</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>; <span class="attribute">height</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> auto <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://demo.cssworld.cn/new/3/10-6.php">效果展示</a></p><h4 id="background-clip-text声明与渐变文字效果"><a href="#background-clip-text声明与渐变文字效果" class="headerlink" title="background-clip:text声明与渐变文字效果"></a>background-clip:text声明与渐变文字效果</h4><blockquote><p>background-clip:text原本是webkit内核浏览器的私有声明，只在Safari浏览器和Chrome浏览器中有效。后来，因为这个特性还挺实用，所以其被加入了最新的CSS边框和背景模块规范，目前Firefox浏览器和Edge15+浏览器也提供了支持。background-clip:text可以让背景图像按照字符形状进行剪裁，此时我们只要隐藏文字，就可以看到字符形状的背景效果了。这个特性可以用来实现文字纹理效果和更常见的文字渐变效果</p></blockquote><p>[文字渐变效果](<a href="https://demo.cssworld.cn/">https://demo.cssworld.cn/</a> new/3/10-7.php)</p><blockquote><p>另外，如果使用background-clip:text声明实现渐变文字效果，那么原本彩色的emoji字符的颜色会丢失。</p></blockquote><h4 id="background-origin属性与背景定位原点控制"><a href="#background-origin属性与背景定位原点控制" class="headerlink" title="background-origin属性与背景定位原点控制"></a><strong>background-origin属性与背景定位原点控制</strong></h4><p>background-origin属性支持下面几个属性值：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background</span>: border-box|padding-box|content-box;</span><br></pre></td></tr></table></figure><h4 id="background-repeat属性新增了space和round这两个关键字属性值"><a href="#background-repeat属性新增了space和round这两个关键字属性值" class="headerlink" title="background-repeat属性新增了space和round这两个关键字属性值"></a>background-repeat属性新增了space和round这两个关键字属性值</h4><ol><li><p>space 平铺</p><p> 让背景图像尽可能地重复，而不进行剪裁，每个重复单元的尺寸不会变化。其中第一张和最后一张图像固定在元素的两边，然后通过拉伸空白区域让剩余的图像均匀分布</p></li><li><p>round 拉伸</p><p> 背景图像会被拉伸，并保证不留间隙。随着定位区域空间的增加，如果（假设图像都是原始尺寸下的）剩余空间大于图像宽度的一半，则添加另外一张图像。在添加下一张图像时，当前的所有图像都会压缩以留出空间放下这个新添加的图像</p></li></ol><p><a href="https://demo.cssworld.cn/new/3/10-8.php">效果展示</a></p><h4 id="可以指定background-position的起始方位了"><a href="#可以指定background-position的起始方位了" class="headerlink" title="可以指定background-position的起始方位了"></a>可以指定background-position的起始方位了</h4><blockquote><p>由于background-position的百分比定位的计算比较特殊（详见《CSS世界》一书的9.2.2节），因此，在过去，我们想要实现一个距离元素右下方特定距离的定位就不太容易，唯一的方法就是借助透明边框帮助定位。好在IE9浏览器已经开始支持指定background-position的起始位置了，于是我们想要让背景图像在距离右下方20px的位置就非常简单了：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid deepskyblue;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">1.jpg</span>) no-repeat right <span class="number">20px</span> bottom <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/new/3/10-9.php">效果展示</a></p><p>也有这种写法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">1.jpg</span>) no-repeat <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">20px</span>) <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">20px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>虽然这种写法也有效果，但是性能不够好，而且这种写法可能会让IE9浏览器崩溃</p></blockquote><blockquote><p><strong>如果只有1个值</strong>，无论是具体的数值、百分比值，还是关键字属性值，<strong>则另外一个值一定是center</strong></p></blockquote><blockquote><p>总结一下，IE浏览器从IE9版本开始就已经支持background-position属性的3值和4值语法，因此不要再使用calc()函数实现相对于右下方的定位了。</p></blockquote><h3 id="outline相关新属性outline-offset"><a href="#outline相关新属性outline-offset" class="headerlink" title="outline相关新属性outline-offset"></a>outline相关新属性outline-offset</h3><p>outline-offset属性用于改变outline属性设置的轮廓的偏移位置。</p><p>以我的经验来看，outline-offset属性使用负值来缩小轮廓的频率要比使用正值来扩大轮廓的频率高很多。</p><p><a href="https://demo.cssworld.cn/new/3/11-1.php">outline轮廓被覆盖out-offset优化示例</a></p><p>让合适的outline尺寸配合合适的outline-offset负值，我们可以通过颜色覆盖的方式实现渐变边框效果，或者绘制一个加号图案</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.example</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>; <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(deepskyblue, deeppink);</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">40px</span> solid <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">outline-offset</span>: -<span class="number">92px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="cursor属性新增的手形效果"><a href="#cursor属性新增的手形效果" class="headerlink" title="cursor属性新增的手形效果"></a>cursor属性新增的手形效果</h3><blockquote></blockquote><h4 id="放大手形zoom-in和缩小手形zoom-out简介"><a href="#放大手形zoom-in和缩小手形zoom-out简介" class="headerlink" title="放大手形zoom-in和缩小手形zoom-out简介"></a>放大手形zoom-in和缩小手形zoom-out简介</h4><p>cursor:zoom-in的鼠标指针是[插图]形状，cursor:zoom-out的鼠标指针是[插图]形状，多用于在桌面端的网页中查看大图的交互场景中</p><p><a href="https://demo.cssworld.cn/new/3/12-1.php">效果展示</a></p><h4 id="抓取手形grab和放手手形grabbing"><a href="#抓取手形grab和放手手形grabbing" class="headerlink" title="抓取手形grab和放手手形grabbing"></a>抓取手形grab和放手手形grabbing</h4><p>cursor:grab的鼠标指针是一个五指张开的手的形状[插图]，cursor:grabbing的鼠标指针是一个五指收起的手的形状[插图]，它们多用在元素预览空间不足并需要拖动元素的交互场景中</p><p>[效果展示](<a href="https://demo.cssworld.cn/new/">https://demo.cssworld.cn/new/</a> 3/12-2.php)</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;strong&gt;CSS世界已经有了CSS2和CSS3，那会有CSS4吗？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;答案是：不会有CSS4！&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;实际上，现在连CSS3这个词都已经名存实亡了，因为CSS3已经解体了。为什么说CSS3解体了呢？因为CSS按照大版本的方式进行迭代实在是太低效了。低效的原因其实很好理解，如果CSS这门语言必须按照大版本迭代发布的话，只要其中一个版本有一个CSS特性存在极大的争议，那这个版本的CSS的发布时间就会延后。例如，CSS2.1的规范在2002年开始制定，而一直到2011年才成为推荐规范，整个过程足足花费了10年的时间，就是因为一些次要的CSS特性拖了后腿。&lt;/p&gt;
&lt;p&gt;为了加速没有争议的CSS特性的标准化，W3C的CSS工作组做出了一项被称为“Beijing doctrine”的决定，该决定将CSS划分为更小的组件，并把这些组件称为模块。这些模块互相独立，各自按照自己的速度走向标准化。例如，CSS选择器模块已经到了Level 4了，弹性布局模块还是Level 1。&lt;/p&gt;
&lt;p&gt;将CSS划分为独立的模块是一个非常明智的决定，浏览器厂商可以根据对自己需求的判断决定究竟对哪些模块进行支持，哪怕这个模块还处于草案状态。例如CSS的env()函数的规范还是草案状态，但是Chrome和Safari浏览器的厂商却快速响应，对其进行了支持。对开发者而言，如此迅速地支持新特性犹如一场及时雨。&lt;/p&gt;
&lt;p&gt;当然，这种模块化的设计也不是没有弊端，最大的问题就是设计冗余。例如，弹性布局和网格布局中的对齐属性其实可以统一，但它们却是分离的，这就会徒增学习成本；分栏布局、弹性布局和网格布局中的间隙其实可以统一，但它们也都是分离的，各有各的间隙属性。好在纠正及时，现在这三大布局全部开始改用gap属性表示间隙，减少了因为模块化带来的设计冗余。&lt;/p&gt;
&lt;p&gt;模块化策略带来的好处远远大于弊端，正所谓瑕不掩瑜，与带来的好处相比，模块化设计的弊端几乎可以忽略不计。从这个角度看，CSS2.1之后的CSS世界就是模块化的新世界，所以我称之为CSS新世界。这个CSS新世界带来了新的CSS属性，并让很多CSS2中模糊的概念有了明确的定义，如尺寸体系、逻辑属性、CSS值类型划分等。CSS新世界中各模块虽然发展独立，但是相互间还是有很多共性和联系的。因此，CSS新世界不仅是一个模块化的世界，还是一个缤纷多彩，同时又自成一体的严谨的世界。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="htmlcss" scheme="https://wyf195075595.github.io/categories/htmlcss/"/>
    
    
    <category term="CSS" scheme="https://wyf195075595.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>CSS 2.1</title>
    <link href="https://wyf195075595.github.io/2022/10/20/programming/htmlcss/css2/"/>
    <id>https://wyf195075595.github.io/2022/10/20/programming/htmlcss/css2/</id>
    <published>2022-10-20T10:00:00.000Z</published>
    <updated>2022-10-20T09:49:57.098Z</updated>
    
    <content type="html"><![CDATA[<p>本章内容来自于《css的世界》-张鑫旭，类似于读书笔记吧。主要介绍css2.1的语法。本书主要用于进阶学习，不适用于初学者，书中也默认忽略一些基础的知识.</p><p>CSS2.1中的CSS属性的设计初衷是展示图文</p><h3 id="css-的世界"><a href="#css-的世界" class="headerlink" title="css 的世界"></a>css 的世界</h3><blockquote><p>已操作系统划分世界，不同的操作系统就是平行世界。每种浏览器就是一个王国。</p><p>在CSS世界中，HTML是魔法石，选择器就是选择法器，CSS属性就是魔法师，CSS各种属性值就是魔法师的魔法技能，浏览器就是他们所在的“王国”，“王国”会不断更新法律法规（版本升级），决定是否允许使用新的魔法石（HTML5新标签新属性），是否允许新的魔法师入“国籍”（CSS3新属性），或者允许魔法师使用某些新技能（CSS新的属性值），以及是否舍弃某些魔法技能（如display:run-in）；操作系统就是他们所在的世界，不同的操作系统代表不同的平行世界，所以，CSS世界有这么几个比较大的平行世界，即Windows世界、OS X世界以及移动端的iOS世界和Android世界。不同世界的浏览器王国的命运不一样，例如，在OS X世界中，IE王国是不存在的，而Safari王国却异常强大，但在Windows世界中，Safari王国却异常落寞。以上这一切就构成了完整的CSS世界的“世界观”。</p></blockquote><h3 id="专业术语"><a href="#专业术语" class="headerlink" title="专业术语"></a>专业术语</h3><ol><li><p>属性</p></li><li><p>值</p></li><li><p>关键字</p></li><li><p>变量</p></li><li><p>长度单位</p><p> 时间单位（如s、ms），还有角度单位（如deg、rad等）</p><p> 相对长度单位：如em,rem(相对字体),vh,vw,vmin,vmax(相对视区)</p><p> 绝对长度单位：px</p></li><li><p>功能符</p><p> 值以函数的形式指定（就是被括号括起来的那种），主要用来表示颜色（rgba和hsla）、背景图片地址（url）、元素属性值、计算（calc）和过渡效果等，如rgba(0,0,0, .5)、url(‘css-world.png’)、attr(‘href’)和scale(-1)。</p></li><li><p>属性值</p></li><li><p>声明</p><p> 属性名加上属性值就是声明</p></li><li><p>声明块</p><p> 就是选择器 {} 区域</p></li><li><p>规则或规则集</p><p>选择器后面的声明块就是一个规则集</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    ... 规则集</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>选择器</p></li><li><p>关系选择器</p><p>常见的符号有空格、&gt;、～，还有+等，这些都是非常常用的选择器。</p></li><li><p>@规则</p><p>@规则指的是以@字符开始的一些规则，像@media、@font-face、@page或者@support，诸如此类</p></li></ol><span id="more"></span><h3 id="未定义行为"><a href="#未定义行为" class="headerlink" title="未定义行为"></a>未定义行为</h3><blockquote><p>不同浏览器对某一行为可能没制定规则，或规则不一致。结果会出现的问题。</p><p>狭隘的说法就是浏览器出现bug了</p></blockquote><h3 id="流（文档流）"><a href="#流（文档流）" class="headerlink" title="流（文档流）"></a>流（文档流）</h3><blockquote><p>默认的流规则： 自上而下，从左到右</p></blockquote><p>在流中只有两种元素，内联，块级元素。块级元素具有换行属性,也就是一个水平流上只能单独显示一个元素，多个块级元素则换行显示。</p><p>理论上都能通过清除浮动去除影响</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;// 也可以是 block,list-item(使用这个要去除项目符号，IE不支持)</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对-liet-item及-display-其他属性的理解"><a href="#对-liet-item及-display-其他属性的理解" class="headerlink" title="对  liet-item及 display 其他属性的理解"></a>对  liet-item及 display 其他属性的理解</h3><blockquote><p>为啥 list-item 会出现 项目符号，将其理解为附加盒子。只有它是特殊的</p><p>display: inline-block; 可以理解为 嵌套盒子，外边是内联盒子里边是块级盒子</p></blockquote><h3 id="widh-默认值是-auto"><a href="#widh-默认值是-auto" class="headerlink" title="widh 默认值是 auto"></a>widh 默认值是 auto</h3><p>包含了至少4种不同的表现</p><ol><li><p>充分利用空间</p><p> div,p这些元素宽度默认是100%于父级容器</p></li><li><p>收缩于包裹</p><p> 典型代表：浮动，绝对定位，inner-block元素或table元素。会收缩到合适宽度</p></li><li><p>收缩到最小</p><p> 容易出现在 table-layout为 auto 的表格中</p></li><li><p>超出容器限制</p><p> 除非明确width相关设置，否则上边3种情况尺寸都不会超过父级容器宽度。特殊情况长连续字母，数字或设置了 white-space: nowrap;</p></li></ol><h4 id="“鑫三无准则”，即“无宽度，无图片，无浮动”"><a href="#“鑫三无准则”，即“无宽度，无图片，无浮动”" class="headerlink" title="“鑫三无准则”，即“无宽度，无图片，无浮动”"></a>“鑫三无准则”，即“无宽度，无图片，无浮动”</h4><blockquote><p>内部尺寸：元素宽度由内部元素大小控制</p><p>外部尺寸：元素大小由外部容器大小绝定，就是上边 with auto 四种表现得第一种</p></blockquote><p>外部尺寸：<a href="http://demo.cssworld.cn/3/2-3.php">宽度设置后会丧失流动性</a></p><p>内部尺寸：</p><ol><li><a href="http://demo.cssworld.cn/3/2-4.php">包裹性</a> 实现文本少时居中显示，超出一行则居左显示</li><li><a href="http://demo.cssworld.cn/3/2-6.php">首选最小宽度</a> 实现一个凹凸文字效果</li><li><a href="http://demo.cssworld.cn/3/2-7.php">最大宽度</a> iScroll 根据元素尺寸和容器关系改变内部关系实现滚动</li></ol><h4 id="CSS流体布局下得宽度分离原则"><a href="#CSS流体布局下得宽度分离原则" class="headerlink" title="CSS流体布局下得宽度分离原则"></a>CSS流体布局下得宽度分离原则</h4><blockquote><p>就是CSS中的width属性不与影响宽度的padding/border（有时候包括margin）属性共存</p><p>但是css3 有 box-sizing属性可以改变盒模型就不需要这么麻烦了</p></blockquote><p>不能这样写</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;<span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">border</span>: <span class="number">1px</span> solid;&#125;</span><br><span class="line">或</span><br><span class="line"><span class="selector-class">.box</span> &#123;<span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">padding</span>: <span class="number">10px</span>;&#125;</span><br></pre></td></tr></table></figure><p>这样写</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="height-100-不生效"><a href="#height-100-不生效" class="headerlink" title="height: 100% 不生效"></a>height: 100% 不生效</h3><blockquote><p>对于普通文档流中的元素，百分比高度值要想起作用，其父级必须有一个可以生效的高度值！</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 页面设置全屏红色背景，不生效</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        .main &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        heiht: 100%;</span><br><span class="line">        background: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">// 除非 给 body,html 也同时设置了 height: 100%;</span><br></pre></td></tr></table></figure><h4 id="为啥宽度设置100-可以，高度就不行？"><a href="#为啥宽度设置100-可以，高度就不行？" class="headerlink" title="为啥宽度设置100%可以，高度就不行？"></a>为啥宽度设置100%可以，高度就不行？</h4><p>规范中其实给出了答案。</p><p>​    如果包含块的高度没有显式指定（即高度由内容决定），并且该元素不是绝对定位，则计算值为auto。一句话总结就是：因为解释成了auto。要知道，auto和百分比计算，肯定是算不了的</p><p>​    宽度的解释却是：如果包含块的宽度取决于该元素的宽度，那么产生的布局在CSS 2.1中是未定义的。</p><blockquote><p>还记不记得本书第2章最后的“未定义行为”吗？这里的宽度布局其实也是“未定义行为”，也就是规范没有明确表示该怎样，浏览器可以自己根据理解去发挥。好在根据我的测试，布局效果在各个浏览器下都是一致的。这里和高度的规范定义就区别明显了，高度明确了就是auto，高度百分比计算自然无果，width却没有这样的说法，因此，就按照包含块真实的计算值作为百分比计算的基数。</p></blockquote><h4 id="如何让元素支持-hieght-100-效果"><a href="#如何让元素支持-hieght-100-效果" class="headerlink" title="如何让元素支持 hieght: 100% 效果"></a>如何让元素支持 hieght: 100% 效果</h4><ol><li><p>设置显式得高度值</p></li><li><p>使用绝对定位</p><p> 需要注意的是，绝对定位元素的百分比计算和非绝对定位元素的百分比计算是有区别的，区别在于绝对定位的宽高百分比计算是相对于padding box的，也就是说会把padding大小值计算在内，但是，非绝对定位元素则是相对于content box计算的</p></li></ol><h4 id="为流体而生的min-width-max-width"><a href="#为流体而生的min-width-max-width" class="headerlink" title="为流体而生的min-width/max-width"></a>为流体而生的min-width/max-width</h4><blockquote><p>改变其值不会触发过度动画。</p><p>min-width/min-height的初始值是auto, max-width/max-height的初始值是none。</p><p>max-width/max-height的初始值为何是none而不是auto呢？</p><p>这个问题的答案其实与下面小节的内容有关。我们不妨举个简单的例子解释一下，已知父元素宽度400像素，子元素设置宽度800像素，假如说max-width初始值是auto，那自然使用和width一样的解析渲染规则，此时max-width的计算值就应该是父元素的400像素，此时，你就会发现，子元素的800像素直接完蛋了，因为max-width会覆盖width。于是，我们的width永远不能设置为比auto计算值更大的宽度值了，这显然是有问题的，这就是为什么max-width初始值是none的原因。</p></blockquote><p>权重 <strong>!important</strong> 在max-* 属性面前黯然失色</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;<span class="number">1</span><span class="selector-class">.jpg</span>&quot; style=&quot;<span class="attribute">width</span>: <span class="number">480px</span> <span class="meta">!important</span>;&quot;&gt;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line"><span class="attribute">max-width</span>: <span class="number">256px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 结果是 max-width 覆盖了 width</p><h4 id="min-width-max-width-冲突"><a href="#min-width-max-width-冲突" class="headerlink" title="min-width/max-width 冲突"></a>min-width/max-width 冲突</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line"><span class="attribute">min-width</span>: <span class="number">1400px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">1200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果是 min-width 存活，没有后来居上</p><h4 id="height-变化动画"><a href="#height-变化动画" class="headerlink" title="height 变化动画"></a>height 变化动画</h4><p>一个下拉框如果下拉内容不确定，设置 height:auto;  那么从0 -&gt; auto 的动画怎么计算展示</p><p>height使用的值是默认的auto，应该都知道的auto是个关键字值，并非数值，正如height:100%的100%无法和auto相计算一样，从0px到auto也是无法计算的，因此无法形成过渡或动画效果。</p><p>解决办法：</p><p>​    通过设置 max-height </p><p>但是 max-height 的值设置的过大则会导致延迟效果，建议max-height使用足够安全的最小值，这样，收起时即使有延迟，也会因为时间很短，很难被用户察觉，并不会影响体验。</p><h3 id="深入理解content"><a href="#深入理解content" class="headerlink" title="深入理解content"></a>深入理解content</h3><p><strong>内联盒子（inline box）</strong></p><p>  <strong>“内联盒子”</strong>不会让内容成块显示，而是排成一行，这里的<strong>“内联盒子”</strong>实际指的就是元素的<strong>“外在盒子”</strong>，用来决定元素是内联还是块级。该盒子又可以细分为<strong>“内联盒子”</strong>和<strong>“匿名内联盒子”</strong>两类：</p><p><img src="https://upload-images.jianshu.io/upload_images/11794918-7f5b2f269ef80945.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/603/format/webp" alt="img"></p><p>内联盒子</p><p><strong>行框盒子（line box）</strong></p><p><img src="https://upload-images.jianshu.io/upload_images/11794918-f1889ebe5b82b2da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/590/format/webp" alt="img"></p><p>行框盒子</p><p>  每一行就是一个<strong>“行框盒子”</strong>（实线框标注），每个<strong>“行框盒子”</strong>又是由一个一个<strong>“内联盒子”</strong>组成的。每个行框盒子都前面有一个宽度为0的具有该元素的字体和行高属性的看不见的“幽灵空白节点”（strut）</p><p><strong>包含盒子（containing box）</strong></p><p><img src="https://upload-images.jianshu.io/upload_images/11794918-3561f2dc90a8ead3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/577/format/webp" alt="img"></p><p>包含盒子</p><p>标签就是一个“包含盒子”（实线框标注），此盒子由一行一行的“行框盒子”组成。<p>  需要补充说明一点，在CSS 规范中，并没有<strong>“包含盒子”</strong>的说法，更准确的称呼应该是<strong>“包含****块”</strong>（containing block）。这里之所以把它称为盒子，一是为了与其他盒子名称统一，二是称为盒子更形象、更容易理解。</p><p><strong>替换元素</strong></p><blockquote><p>什么是替换元素？</p><p>通过修改某个属性值呈现的内容就可以被替换的元素就称为“替换元素”。因此，<strong>img</strong>、<strong>替换元素</strong>、<strong>video</strong>、<strong>iframe</strong>或者表单元素<strong>textarea</strong>和<strong>input</strong>都是典型的替换元素。</p></blockquote><p>特性：</p><ol><li>内容的外观不受页面上的 CSS 的影响</li><li>有自己的尺寸。</li><li>在很多CSS属性上有自己的一套表现规则。</li></ol><p>替换元素的 display 属性值</p><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221010174705251.png" alt="image-20221010174705251"></p><h4 id="替换元素的尺寸计算"><a href="#替换元素的尺寸计算" class="headerlink" title="替换元素的尺寸计算"></a>替换元素的尺寸计算</h4><p>将替换元素的尺寸从内而外分为3类：固有尺寸、HTML尺寸和CSS尺寸。</p><ol><li><p>固有尺寸指的是替换内容原本的尺寸（简单说就是原文件的尺寸）</p><p> 例如，图片、视频作为一个独立文件存在的时候，都是有着自己的宽度和高度的</p></li><li><p>HTML尺寸这个概念略微抽象 （简单来说就是标签自带的width,hieght等属性）</p><p> 我们不妨将其想象成水煮蛋里面的那一层白色的膜，里面是“固有尺寸”这个蛋黄蛋白，外面是“CSS尺寸”这个蛋壳。“HTML尺寸”只能通过HTML原生属性改变，这些HTML原生属性包括<strong>img</strong>的width和height属性、<strong>input</strong>的size属性、<strong>textarea</strong>的cols和rows属性等。</p></li><li><p>CSS尺寸</p><p> 特指可以通过CSS的width和height或者max-width/min-width和max-height/min-height设置的尺寸，对应盒尺寸中的content box。</p></li></ol><p>权重： css尺寸&gt;HTML尺寸&gt;固有尺寸</p><h4 id="元素，图片的固定尺寸不受CSS宽高控制，那为何我们设定img的-width和height-属性会影响图片的尺寸呢？"><a href="#元素，图片的固定尺寸不受CSS宽高控制，那为何我们设定img的-width和height-属性会影响图片的尺寸呢？" class="headerlink" title="元素，图片的固定尺寸不受CSS宽高控制，那为何我们设定img的 width和height 属性会影响图片的尺寸呢？"></a><img>元素，图片的固定尺寸不受CSS宽高控制，那为何我们设定img的 width和height 属性会影响图片的尺寸呢？</h4><p>​    因为图片中的<strong>content</strong>替换内容默认的适配方式是填充（fill），也就是外部设定的尺寸多大，我就填满、跟着一样大。换句话说，尺寸变化的本质并不是改变固有尺寸，而是采用了填充作为适配HTML尺寸和CSS尺寸的方式，且在CSS3之前，此适配方式是不能修改的。</p><p>object-fit 属性就是用来修改图片设配方式的</p><blockquote><p>替换元素具有固定的宽高比例，所以如果只设置宽/高， 另一个属性会俺比例自动计算</p></blockquote><blockquote><p>如果任何尺寸都没有，则元素应该是300像素×150像素，这条规则 <strong>video</strong>、<strong>canvas</strong>和<strong>iframe</strong>这些元素都符合，唯独图片例外。</p><p>结果不仅不是这个尺寸，而且各个浏览器下的尺寸还不一样。IE浏览器下是28×30，如图4-2所示。Chrome浏览器下是0×0，如图4-3所示。Firefox浏览器下显示的是0×22</p></blockquote><blockquote><p>关于图片的src 属性：除非没有 src 属性，否则不管是空值还是其他值，很多浏览器下还是会发送请求</p></blockquote><blockquote><p>对于Firefox浏览器，src默认的<strong>img</strong>不是替换元素，而是一个普通的内联元素，所以使用的就不是替换元素的尺寸规则，而是类似<strong>span</strong>的内联元素尺寸规则，宽高会无效</p><p>修复需设置</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123; <span class="attribute">display</span>: inline-block; &#125;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>chrome 浏览器中 img 要想表象的像替换元素一样要设置 alt=”任意值”，否者就是一个普通的内联标签</p></blockquote><h4 id="src缺省时，img元素的alt信息展示"><a href="#src缺省时，img元素的alt信息展示" class="headerlink" title="src缺省时，img元素的alt信息展示"></a>src缺省时，img元素的alt信息展示</h4><ul><li><h5 id="HTML："><a href="#HTML：" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;美女沉思图&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;1.jpg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>设置src属性显示图片<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS："><a href="#CSS：" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">256px</span>; <span class="attribute">height</span>: <span class="number">192px</span>;</span><br><span class="line">    <span class="comment">/* 隐藏Firefox alt文字 */</span></span><br><span class="line">    <span class="attribute">color</span>: transparent;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[src]</span>) &#123;</span><br><span class="line">    <span class="comment">/* 隐藏Chrome alt文字以及银色边框 */</span></span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="comment">/* 淡蓝色占位背景 */</span></span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f3f9</span>;</span><br><span class="line">    <span class="attribute">visibility</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="comment">/* 黑色alt信息条 */</span></span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(alt);</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">100%</span>);</span><br><span class="line">    <span class="comment">/* 来点过渡动画效果 */</span></span><br><span class="line">    <span class="attribute">transition</span>: transform .<span class="number">2s</span>;</span><br><span class="line">    <span class="attribute">visibility</span>: visible;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h5 id="JS："><a href="#JS：" class="headerlink" title="JS："></a>JS：</h5>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eleButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>),</span><br><span class="line">    eleImg = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (eleButton &amp;&amp; eleImg) &#123;</span><br><span class="line">    <span class="keyword">var</span> initValueButton = eleButton.<span class="property">innerHTML</span>;</span><br><span class="line">    <span class="comment">// 图片地址</span></span><br><span class="line">    <span class="keyword">var</span> srcImage = eleImg.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">    <span class="comment">// 移除该属性</span></span><br><span class="line">    eleImg.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">    <span class="comment">// 按钮点击事件</span></span><br><span class="line">    eleButton.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">innerHTML</span> == initValueButton) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;移除src属性&#x27;</span>;</span><br><span class="line">            <span class="comment">// 图片显示</span></span><br><span class="line">            eleImg.<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, srcImage);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">innerHTML</span> = initValueButton;</span><br><span class="line">            <span class="comment">// src属性移除</span></span><br><span class="line">            eleImg.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;src&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>技巧：图片从普通元素变成替换元素，原本都还支持的：:before和：:after此时全部无效</p><p>兼容性问题</p><p>根据我的测试，目前Chrome和Firefox等浏览器支持，但IE浏览器不支持；其次，要想让Chrome或Firefox等浏览器生效，还有其他一些需要注意的技术点。</p><p>（1）不能有src属性（证明观点的关键所在）；</p><p>（2）不能使用content属性生成图片（针对Chrome）；</p><p>（3）需要有alt属性并有值（针对Chrome）；</p><p>（4）Firefox下：:before伪元素的content值会被无视，::after无此问题，应该与Firefox自己占用了：:before伪元素的content属性有关。</p></blockquote><blockquote><p>Chrome浏览器的渲染表现帮助我们更好地理解了替换元素。什么表现呢？就是在Chrome浏览器下，所有的元素都支持content属性，而其他浏览器仅在：:before/::after伪元素中才有支持</p></blockquote><p>实现设置默认图片</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:not</span>(<span class="selector-attr">[src]</span>) &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">1.jpg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="content与替换元素关系剖析"><a href="#content与替换元素关系剖析" class="headerlink" title="content与替换元素关系剖析"></a>content与替换元素关系剖析</h4><blockquote><p>content属性生成的内容都是替换元素？没错，就是替换元素！</p></blockquote><ol><li><p>content生成的文本是无法选中、无法复制的</p></li><li><p>content生成的文本无法被屏幕阅读设备读取，也无法被搜索引擎抓取</p></li><li><p>不能左右：empty伪类 。content 中有内容也会被当成 空</p></li><li><p>content动态生成值无法获取</p><p> 计算动态值</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.total</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line"><span class="attribute">content</span>: <span class="built_in">counter</span>(icecrean)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 试图获取计算值时却只能拿到 “counter(icecrean)”</p></li></ol><blockquote><p>辅助实现“两端对齐”以及“垂直居中/上边缘/下边缘对齐”效果</p></blockquote><p>content换行符与打点loading效果实例页面</p><ul><li><h5 id="HTML：-1"><a href="#HTML：-1" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正在加载中<span class="tag">&lt;<span class="name">dot</span>&gt;</span>...<span class="tag">&lt;/<span class="name">dot</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-1"><a href="#CSS：-1" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">dot &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">vertical-align</span>: -.<span class="number">25em</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line">dot<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;...\A..\A.&#x27;</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: pre-wrap;</span><br><span class="line">    <span class="attribute">animation</span>: dot <span class="number">3s</span> infinite step-start both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> dot &#123;</span><br><span class="line">    <span class="number">33%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">2em</span>); &#125;</span><br><span class="line">    <span class="number">66%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">1em</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>（1）为什么使用<dot>这个元素？</p><p>​    <dot>是自定义的一个标签元素，除了简约、语义化明显外，更重要的是方便向下兼容，IE8等低版本浏览器不认识自定义的HTML标签，因此，会乖乖地显示里面默认的3个点，对我们的CSS代码完全忽略。</p><p>（2）为什么使用：:before，可不可以使用：:after？</p><p>​    伪元素使用：:before同时display设置为block，是为了在高版本浏览器下原来的3个点推到最下面，不会影响content的3行内容显示，如果使用：:after怕是效果就很难实现了。</p><p>（3）从content属性值来看，是3个点在第1行，而1个点反而在最后一行，为什么这么处理？</p><p>​    3个点在第一行的目的在于兼容IE9浏览器，因为IE9浏览器认识<dot>以及：:before，但是不支持CSS新世界的animation属性，所以，为了IE9也能正常显示静态的3个点，故而把3个点放在第一行。</p><p>（4）这里white-space值为何使用的是pre-wrap而不是pre？</p><p>​    这里的white-space:pre-wrap改成white-space:pre效果其实是一样的</p><h4 id="深入理解content计数器"><a href="#深入理解content计数器" class="headerlink" title="深入理解content计数器"></a>深入理解content计数器</h4><blockquote><p>所谓CSS计数器效果，指的是使用CSS代码实现随着元素数目增多，数值也跟着变大的效果</p></blockquote><p>计数器有两个属性，一个方法</p><p>属性：</p><ul><li><p>counter-reset</p><p>  计数器-重置: 默认是0，可以设置初始值，可以是负整数，小数，不过，IE和Firefox对此都不识别，Chrome 小数向下取整</p></li><li><p>counter-increment</p><p>  计数器递增：值为counter-reset的1个或多个关键字</p></li></ul><p>方法：</p><ul><li><p>counter()/counters()</p><p>  -counter(name, style)</p><p>  name是计数器名， style 它支持lst-style-type支持的哪些值。作用：我们递增/减的不一定是数字，还可以是英文字母，罗马文等</p><p>  -counters(name, string, style)</p><p>  ​    此方法用于生成子序号 如 1-1，1-1-1</p><p>  ​    name: 计数器名， string:  表示子序号的连接字符串。</p></li></ul><p>counter 计算实例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.one &#123;</span><br><span class="line">    counter-reset: one 10 two 20;</span><br><span class="line">&#125;</span><br><span class="line">.one:before &#123;</span><br><span class="line">    content: counter(one) &#x27;~&#x27; counter(two);</span><br><span class="line">    counter-increment: one;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;one&quot;</span>&gt;</span>《计数器》<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>counters 计算实例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">counter-reset</span>: two <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">list-style-type</span>: none;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>: <span class="built_in">counters</span>(two, <span class="string">&#x27;-&#x27;</span>) <span class="string">&#x27;：&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">counter-increment</span>: two;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        第一章</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>结束<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第二章<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        第三章</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>结束<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        第四章</span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>结束<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>第五章<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="padding-属性"><a href="#padding-属性" class="headerlink" title="padding 属性"></a>padding 属性</h3><p>设置了 box-sizing: border-box; 后元素的 content 区域会自动计算。也就是说padding就可以随意设置。但是如果padding 足够大的花 元素的尺寸也是会发生变化的。</p><p>例如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此时的width 会无效，最终宽度为120px ,而里面的内容则表现为 ”首选最小宽度“</p><blockquote><p>padding 对于内联元素的高度的影响。 对于内联元素padding 可以撑开元素的宽（影响布局尺寸）。但是高度却不行。虽然高度可以撑开（不影响布局尺寸）但是撑开的上下部分会与其他元素发生重叠</p></blockquote><h4 id="设置实例分割线"><a href="#设置实例分割线" class="headerlink" title="设置实例分割线"></a>设置实例分割线</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">a</span> href=&quot;&quot;&gt;登录&lt;/<span class="selector-tag">a</span>&gt;&lt;<span class="selector-tag">a</span> href=&quot;&quot;&gt;注册&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span> + <span class="selector-tag">a</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">3px</span> <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> solid gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="padding-的百分比值"><a href="#padding-的百分比值" class="headerlink" title="padding 的百分比值"></a>padding 的百分比值</h4><p>与margin 不同 ，padding 不支持 负值，支持%但是，和高度等属性%计算规则有些差异。</p><p>padding百分比值无论是水平方向还是垂直方向均是相对于宽度（父级宽度）计算的！</p><h4 id="按钮-button-的padding"><a href="#按钮-button-的padding" class="headerlink" title="按钮 button 的padding"></a>按钮 button 的padding</h4><p>按钮padding与高度计算不同浏览器下千差万别</p><p>如何统一：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line">button &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">clip: react(0 0 0 0);</span><br><span class="line">&#125;</span><br><span class="line">label &#123;</span><br><span class="line">display: inline-block;</span><br><span class="line">line-height: 20px;</span><br><span class="line">padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="padding-实现三道杠-双层圆点图形效果小图标"><a href="#padding-实现三道杠-双层圆点图形效果小图标" class="headerlink" title="padding  实现三道杠 ,双层圆点图形效果小图标"></a>padding  实现三道杠 ,双层圆点图形效果小图标</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-menu</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">140px</span>; <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">35px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">10px</span> solid;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">10px</span> solid;</span><br><span class="line">    <span class="attribute">background-color</span>: currentColor;</span><br><span class="line">    <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-dot</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid;    </span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: currentColor;</span><br><span class="line">    <span class="attribute">background-clip</span>: content-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="padding-兼容性问题"><a href="#padding-兼容性问题" class="headerlink" title="padding 兼容性问题"></a>padding 兼容性问题</h4><blockquote><p>如果容器可以滚动，在IE和Firefox浏览器下是会忽略padding-bottom值的，Chrome等浏览器则不会。</p><p>本质区别在于：Chrome浏览器是子元素超过content box尺寸触发滚动条显示，而IE和Firefox浏览器是超过padding box尺寸触发滚动条显示。</p></blockquote><p>如 非Chrome浏览器中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100px; padding: 50px 0;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;0.jpg&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>底部没有50像素的padding-bottom间隙</p><p>兼容写法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;0.jpg&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 50px 0;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="margin-属性"><a href="#margin-属性" class="headerlink" title="margin 属性"></a>margin 属性</h3><p>只要元素的尺寸表现符合“充分利用可用空间”，无论是垂直方向还是水平方向，都可以通过margin改变尺寸。</p><p>CSS世界默认的流方向是水平方向，因此，对于普通流体元素，margin只能改变元素水平方向尺寸；但是，对于具有拉伸特性的绝对定位元素，则水平或垂直方向都可以，因为此时的尺寸表现符合“充分利用可用空间”</p><ul><li><p>元素尺寸</p><p>  $().width()，$().height()方法 包括 padding和border。也就是元素的border-box尺寸。元素DOM API中 写作 offsetWidth和offsetHeight 也称为“元素偏移尺寸”</p></li><li><p>元素内部尺寸</p><p>  $().innerWidth()和$().innerHeight()方法，表示元素的内部区域尺寸，包括padding但不包括border，也就是元素的padding box的尺寸。在原生的DOM API中写作clientWidth和clientHeight，所以，有时候也称为“元素可视尺寸”</p></li><li><p>元素外部尺寸</p><p>  $().outerWidth(true)和$().outerHeight (true)方法，表示元素的外部尺寸，不仅包括padding和border，还包括margin，也就是元素的margin box的尺寸。没有相对应的原生的DOM API。</p></li></ul><blockquote><p>margin对尺寸没有影响，只有元素是“充分利用可用空间”状态的时候，margin才可以改变元素的可视尺寸。</p><p>因为只要宽度设定，margin就无法改变元素尺寸，这和padding是不一样的。</p></blockquote><h4 id="margin-实现-等高布局效果示意"><a href="#margin-实现-等高布局效果示意" class="headerlink" title="margin 实现 等高布局效果示意"></a><a href="http://demo.cssworld.cn/4/3-2.php">margin 实现 等高布局效果示意</a></h4><p>这里我们设置了margin-bottom:-9999px意味着元素的外部尺寸在垂直方向上小了9999px。默认情况下，垂直方向块级元素上下距离是0，一旦margin-bottom:-9999px就意味着后面所有元素和上面元素的空间距离变成了-9999px，也就是后面元素都往上移动了9999px。此时，通过神来一笔padding-bottom:9999px增加元素高度，这正负一抵消，对布局层并无影响，但却带来了我们需要的东西—视觉层多了9999px高度的可使用的背景色。但是，9999px太大了，所以需要配合父级overflow:hidden把多出来的色块背景隐藏掉，于是实现了视觉上的等高布局效果。</p><p>优点：兼容性好，可兼容IE6</p><p>缺点：如果需要有子元素定位到容器之外，父级的overflow:hidden是一个棘手的限制；其次，当触发锚点定位或者使用DOM.scrollIntoview()方法的时候，可能就会出现奇怪的定位问题</p><p>其他方法实现：例如使用display:table-cell布局，左右两栏作为单元格处理，或者使用border边框来模拟</p><ul><li><h5 id="HTML：-2"><a href="#HTML：-2" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;colLeft&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column-left&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>正方观点<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>观点1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;colRight&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column-right&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>反方观点<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>观点1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;leftMore&quot;</span> <span class="attr">value</span>=<span class="string">&quot;更多正方观点&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;rightMore&quot;</span> <span class="attr">value</span>=<span class="string">&quot;更多反方观点&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-2"><a href="#CSS：-2" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.column-left</span>,</span><br><span class="line"><span class="selector-class">.column-right</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: -<span class="number">9999px</span>;</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">9999px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-left</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#34538b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-right</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#cd0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h5 id="JS：-1"><a href="#JS：-1" class="headerlink" title="JS："></a>JS：</h5>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="keyword">function</span> (<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 分栏元素</span></span><br><span class="line"><span class="keyword">var</span> colLeft = $(<span class="string">&#x27;colLeft&#x27;</span>), colRight = $(<span class="string">&#x27;colRight&#x27;</span>);</span><br><span class="line"><span class="comment">// 按钮元素</span></span><br><span class="line"><span class="keyword">var</span> leftMore = $(<span class="string">&#x27;leftMore&#x27;</span>), rightMore = $(<span class="string">&#x27;rightMore&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 序号</span></span><br><span class="line"><span class="keyword">var</span> indexLeft = <span class="number">1</span>, indexRight = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (colLeft &amp;&amp; colRight &amp;&amp; leftMore &amp;&amp; rightMore) &#123;</span><br><span class="line">    leftMore.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        indexLeft = indexLeft + <span class="number">1</span>;</span><br><span class="line">        colLeft.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeend&#x27;</span>, <span class="string">&#x27;&lt;p&gt;观点&#x27;</span>+ indexLeft +<span class="string">&#x27;&lt;/p&gt;&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    rightMore.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        indexRight = indexRight + <span class="number">1</span>;</span><br><span class="line">        colRight.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&#x27;beforeend&#x27;</span>, <span class="string">&#x27;&lt;p&gt;观点&#x27;</span>+ indexRight +<span class="string">&#x27;&lt;/p&gt;&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="margin-的百分比值"><a href="#margin-的百分比值" class="headerlink" title="margin 的百分比值"></a>margin 的百分比值</h4><blockquote><p>和padding属性一样，margin的百分比值无论是水平方向还是垂直方向都是相对于宽度计算的</p></blockquote><h4 id="margin-合并"><a href="#margin-合并" class="headerlink" title="margin 合并"></a>margin 合并</h4><blockquote><p>块级元素的上外边距（margin-top）与下外边距（margin-bottom）有时会合并为单个外边距，这样的现象称为“margin合并”</p></blockquote><ol><li><p>块级元素，但不包括浮动和绝对定位元素</p></li><li><p>只发生在垂直方向</p><p> 不考虑 writing-mode 的情况下才正确</p></li></ol><p><strong>margin 合并的3种场景</strong></p><ul><li><p>相邻兄弟元素margin合并</p></li><li><p><a href="http://demo.cssworld.cn/4/3-3.php">父级和第一个/最后一个子元素</a></p><p>  下面三种设置等效</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 80px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 80px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 80px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 80px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>如何阻止 margin 合并？</strong></p><p>对于margin-top 可以进行如下操作（满足一个条件即可）</p><ul><li><p> 父元素设置为块状格式化上下文元素；</p></li><li><p> 父元素设置border-top值；</p></li><li><p> 父元素设置padding-top值；</p></li><li><p> 父元素和第一个子元素之间添加内联元素进行分隔。</p></li></ul><p>对于margin-bottom 合并，可以进行如下操作（满足一个条件即可）：</p><ul><li><p>父元素设置为块状格式化上下文元素；</p></li><li><p>父元素设置border-bottom值；</p></li><li><p>父元素设置padding-bottom值；</p></li><li><p>父元素和最后一个子元素之间添加内联元素进行分隔；</p></li><li><p>父元素设置height、min-height或max-height。</p></li></ul><p>在尝试设置 元素之间添加 空 div 阻止合并时还需如下设置</p><ul><li><p>设置垂直方向的border；</p></li><li><p>设置垂直方向的padding；</p></li><li><p>里面添加内联元素（直接Space键空格是没用的）；</p></li><li><p>设置height或者min-height。</p></li></ul><p><strong>margin 合并的规则</strong></p><blockquote><p>计算规则总结为“正正取大值”“正负值相加”“负负最负值”</p></blockquote><p><strong>margin 合并的意义</strong></p><p>让我们的页面结构容错性更强了，比方说最后一个元素移除或位置调换，均不会破坏原来的布局，也就是我们的CSS无须做任何调整。</p><p><strong>margin: auto;</strong></p><p>在父元素有富余宽度时，可设置 margin: 0 auto; 左右居中。要设置垂直居中可以改变流方向(writing-mode: vertical-lr)。要做到垂直居中则需要借助定位.如下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.father</span> &#123;</span><br><span class="line">hieght<span class="selector-class">.father</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f3f9</span>;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span> &#123; </span><br><span class="line">    <span class="attribute">position</span>: absolute; </span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>; <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#cd0000</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果son 太大超过了father ，则margin会变化为0</p><p><strong>margin 无效的情况</strong></p><ol><li><p>display计算值inline的非替换元素的垂直margin是无效的</p><p> 对于内联替换元素，垂直margin有效，并且没有margin合并的问题，所以图片永远不会发生margin合并。</p></li><li><p>表格中的<tr>和<td>元素或者设置display计算值是table-cell或table-row的元素的margin都是无效的</p></li><li><p>margin合并的时候，更改margin值可能是没有效果的。除非超过当前最值</p></li><li><p>绝对定位元素非定位方位的margin值“无效”。</p><p> 如：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123; <span class="attribute">top</span>: <span class="number">10%</span>; <span class="attribute">left</span>: <span class="number">30%</span>; &#125;</span><br></pre></td></tr></table></figure><p> 此时right和bottom值属于auto状态，也就是右侧和底部没有进行定位，此时，这两个方向设置margin值我们在页面上是看不到定位变化的</p></li><li><p>定高容器的子元素的margin-bottom或者宽度定死的子元素的margin-right的定位“失效”。</p><p> 例如，一个普通元素，在默认流下，其定位方向是左侧以及上方，此时只有margin-left和margin-top可以影响元素的定位。但是，如果通过一些属性改变了定位方向，如float:right或者绝对定位元素的right右侧定位，则反过来margin-right可以影响元素的定位，margin-left只能影响兄弟元素。</p></li><li><p>鞭长莫及导致的margin无效</p><p> 如下例子：</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;mml.jpg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.box &gt; img &#123;</span><br><span class="line">float: left;</span><br><span class="line">width: 256px;</span><br><span class="line">&#125;</span><br><span class="line">.box &gt; p &#123;</span><br><span class="line">overflow: hidden;</span><br><span class="line">margin-left: 200px;// 此时设置无效，准确地讲，此时的<span class="tag">&lt;<span class="name">p</span>&gt;</span>的margin-left从负无穷到256px都是没有任何效果的</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>）内联特性导致的margin无效 <strong>(*)</strong></p><p> 如下：</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">clss</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;mml.jpg&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">.box &gt; img &#123;</span><br><span class="line">height: 96px;</span><br><span class="line">margin-top: -200px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 一个容器里面有一个图片，然后这张图片设置margin-top负值，让图片上偏移。但是，随着我们的负值越来越负，结果达到某一个具体负值的时候，图片不再往上偏移了。比方说，本例margin-top设置的是-200px，如果此时把margin-top设置成-300px，图片会再往上偏移100px吗？不会！它会微丝不动，margin-top变得无效了。要解释这里为何会无效，需要对vertical-align和内联盒模型有深入的理解</p></li></ol><h3 id="border-属性"><a href="#border-属性" class="headerlink" title="border 属性"></a>border 属性</h3><p><strong>为啥 border-width 不支持百分比值？</strong></p><p>margin，padding都是相对于宽度计算。假设如果boder支持%，那么不同宽度屏幕的相同%值的边框大小就不一样，显然不合边框的语义， 同时设计之初也没有需要使用%值得场景</p><p>支持得关键字：</p><ul><li>thin: 相当于px</li><li>medium: 相当于 3px (默认)</li><li>think: 相当于4px</li></ul><p>为啥 默认是medium，应为 border-style:double至少3px才有效果！</p><p><strong>border-style</strong></p><ul><li>solid 实线</li><li>dashed 虚线</li><li>dotted 虚点（IE中渲染为圆点，IE9一下不支持border-raduis,so…）</li><li>doble 双线边框</li><li>其他 inset（内凹）、outset（外凸）、groove（沟槽）、ridge（山脊）风格老土过时，且兼容性惨不忍睹</li></ul><p>计巧</p><ul><li><p><a href="https://demo.cssworld.cn/4/4-1.php">border绘制带加号的上传按钮</a></p></li><li><p>通过透明border 设置左右间距</p></li><li><p><a href="http://demo.cssworld.cn/4/4-2.php">增加点击区域大小</a></p></li><li><p>绘制三角形 (通过不同的 border-style 可绘制更多形状)</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">10px</span> solid;</span><br><span class="line">    <span class="attribute">border-color</span>: $f30 transparent transparent transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><a href="http://demo.cssworld.cn/4/4-4.php">border实现等高布局</a> 通过border-left/right只持支2-3栏</p></li></ul><h3 id="内联与流"><a href="#内联与流" class="headerlink" title="内联与流"></a>内联与流</h3><h4 id="字母X与CSS世界的基线"><a href="#字母X与CSS世界的基线" class="headerlink" title="字母X与CSS世界的基线"></a>字母X与CSS世界的基线</h4><blockquote><p>在各种内联相关模型中，凡是涉及垂直方向的排版或者对齐的，都离不开最基本的基线（baseline）。例如，line-height行高的定义就是两基线的间距，vertical-align的默认值就是基线</p></blockquote><p><strong>CSS中有一个概念叫作x-height，指的是字母x的高度。</strong></p><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221012165319074.png" alt="image-20221012165319074"></p><ul><li><p>ascender height：上下线高度。</p></li><li><p>cap height：大写字母高度。</p></li><li><p>median：中线。</p></li><li><p>descender height：下行线高度。</p></li></ul><p><strong>vertical-align:middle</strong></p><p>这里的middle是中间的意思。注意，跟上面的median（中线）不是一个意思。在CSS世界中，middle指的是基线往上1/2 x-height高度。我们可以近似理解为字母x交叉点那个位置。</p><p><strong>字母中的x与CSS中的ex</strong></p><blockquote><p>ex是CSS中的一个相对单位，指的是小写字母x的高度，没错，就是指x-height。</p><p>ex的价值就在其副业上—不受字体和字号影响的内联元素的垂直居中对齐效果。</p></blockquote><p><a href="https://demo.cssworld.cn/5/1-1.php">基于ex单位的天然垂直居中对齐效果</a></p><ul><li><h5 id="CSS：箭头图标垂直对齐文字"><a href="#CSS：箭头图标垂直对齐文字" class="headerlink" title="CSS：箭头图标垂直对齐文字"></a>CSS：箭头图标垂直对齐文字</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon-arrow</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1ex</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">/images/5/arrow.png</span>) no-repeat center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="内联元素的高度之本—line-height"><a href="#内联元素的高度之本—line-height" class="headerlink" title="内联元素的高度之本—line-height"></a><strong>内联元素的高度之本—line-height</strong></h4><p>一个空div 写上几个文字，请问div的高度是由什么决定的?</p><p>一般人都会觉得是文字font-size决定的，但本质上是由line-height属性全权决定的</p><p><a href="http://demo.cssworld.cn/5/2-1.php">例子如下</a>：</p><ul><li><h5 id="HTML：-3"><a href="#HTML：-3" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test1&quot;</span>&gt;</span>我的高度是？<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test2&quot;</span>&gt;</span>我的高度是？<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-3"><a href="#CSS：-3" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test1</span>,</span><br><span class="line"><span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">24px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.test2</span> &#123; </span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>行距，半行距、内容区域</strong></p><p>一般业界的共识是：行距= 行高 - em-box（一个概念）</p><p>转换成CSS语言就是：行距= line-height - font-size</p><p>内容区域：Firefox/IE浏览器下文本选中带背景色的区域</p><p><a href="http://demo.cssworld.cn/5/2-2.php%E3%80%82">半行间距</a></p><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221012171416152.png" alt="image-20221012171416152"></p><p>当字体是是宋体时，em-box 等高与 内容区域</p><p>假设line-height是1.5, font-size大小是14px，那么我们的半行距大小就是（套用上面的行距公式再除以2）:(14px ＊ 1.5-14px) / 2= 14px ＊ 0.25 = 3.5px。border以及line-height等传统CSS属性并没有小数像素的概念（从CSS3动画的细腻程度可以看出），因此，这里的3.5px需要取整处理，如果标注的是文字上边距，则向下取整；如果是文字下边距，则向上取整，因为绝大多数的字体在内容区域中都是偏下的。所以，假设设计师标注了文字字形上边缘到图片下边缘间距20px，则我们实际的margin-top值应该是17px，因为3.5px向下取整是3px。</p><p><a href="http://demo.cssworld.cn/5/2-3.php">line-height通过控制行距实现文字排版</a></p><blockquote><p>对于块级元素，line-height对其本身是没有任何作用的，我们平时改变line-height，块级元素的高度跟着变化实际上是通过改变块级元素里面内联级别元素占据的高度实现的。</p></blockquote><p><strong>line-height可以让内联元素“垂直居中”</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面样式可以实现单行文字垂直居中，这似乎是众所周知的。但实际上这种说法不够严谨，准确来说是近似垂直居中</p><p>垂直居中的原理就是 <strong>行距的上下等分机制</strong>，如果行距的添加规则是在文字的上方或者下方，则行高是无法让文字垂直居中的。</p><p>说“近似”是因为文字字形的垂直中线位置普遍要比真正的“行框盒子”的垂直中线位置低</p><p><strong><a href="http://demo.cssworld.cn/5/2-4.php">实现多行文字垂直居中</a></strong></p><p>这里的垂直居中其实也是近似</p><ul><li><h5 id="HTML：-4"><a href="#HTML：-4" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>基于行高实现的...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-4"><a href="#CSS：-4" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">280px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f3f9</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">    // 创建一个独立的“行框盒子.既能重置外部的<span class="attribute">line-height</span>为正常的大小，又能保持内联元素特性</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    // 产生一个非常关键的“行框盒子”,每个“行框盒子”都会附带的一个产物—“幽灵空白节点”，即一个宽度为<span class="number">0</span>、表现如同普通字符的看不见的“节点”</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>line-height 属性的值</strong></p><ul><li><p>normal</p><p>  计算值，只要字体相同，各个浏览器下的默认line-height解析值基本上都是一样的。</p></li><li><p>数值</p><p>  其最终的计算值是和当前font-size相乘后的值，数值(1.5) * fontSize</p></li><li><p>百分比值</p><p>  如line-height:150%，其最终的计算值是和当前font-size相乘后的值。</p></li><li><p>长度值</p><p>  也就是带单位的值，如line-height:21px或者line-height:1.5em等。最终的计算值也是和当前font-size相乘后的值</p></li></ul><blockquote><p><a href="http://demo.cssworld.cn/5/2-5.php">继承细节有所差别</a>。如果使用数值作为line-height的属性值，那么所有的子元素继承的都是这个值；但是，如果使用百分比值或者长度值作为属性值，那么所有的子元素继承的是最终的计算值</p></blockquote><p><strong>内联元素line-height的大值特性</strong></p><blockquote><p>无论内联元素line-height如何设置，最终父级元素的高度都是由数值大的那个line-height决定的</p></blockquote><h4 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a><strong>vertical-align</strong></h4><blockquote><p>它是line-height 的好朋友，为啥这么说呢？应为line-height 生效的地方，vertical-align 也一定起作用</p></blockquote><p>很多人认为 单行文本只要设置行高是多少，其占据的高度就是多少。<a href="http://demo.cssworld.cn/5/3-1.php">看下面一个例子</a></p><ul><li><h5 id="HTML：-5"><a href="#HTML：-5" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-5"><a href="#CSS：-5" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">32px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  box 盒子高度是多少？</p></li></ul><p>很多人认为 box 高度是32px, 因为没有设置高度，高度由line-height 决定。然而实际上确实要大那么几像素（受字体影响，增加高度不一样），比方说36px</p><p>为啥会这样呢？其实这里是vertical-align 下了黑手</p><p>其中一个关键点，那就是 fontSize 设置在span ,这就导致 box的fontSize 与 span 有差异。这时我们可以通过设置: 字体大小统一，或者设置对齐方式来 解决这个问题</p><h4 id="vertical-align-的属性值"><a href="#vertical-align-的属性值" class="headerlink" title="vertical-align 的属性值"></a><a href="http://demo.cssworld.cn/5/3-2.php">vertical-align 的属性值</a></h4><ul><li>数值百分比类，如20px、2em、20%等。•</li><li>上标下标类，如sub、super；•</li><li>文本类，如text-top、text-bottom；•</li><li>线类，如baseline（默认值）、top、middle、bottom；</li></ul><p>经过一番测试我们可以发现负值全部都是往下偏移，正值全部都是往上偏移，而且数值大小全部都是相对于基线位置计算的，因此，从这一点来看，<strong>vertical-align:baseline 等同于 vertical-align:0</strong>。</p><blockquote><p>margin和padding是相对于宽度计算的，line-height是相对于font-size计算的，而这里的vertical-align属性的百分比值则是相对于line-height的计算值计算的。</p></blockquote><p><strong>vertical-align 作用的前提</strong></p><p>有时候我们想设置 vertical-align 但是却不生效，为啥？</p><p>因为vertical-align起作用是有前提条件的，这个前提条件就是：<strong>只能应用于内联元素以及display值为table-cell的元素。</strong>换句话说，vertical-align属性只能作用在display计算值为inline、inline-block, inline-table或table-cell的元素上。因此，默认情况下，<strong>span</strong>、<strong>strong</strong>、<strong>em</strong>等内联元素，<strong>img</strong>、<strong>button</strong>、<strong>input</strong>等替换元素，非HTML规范的自定义标签元素，以及<td>单元格，都是支持vertical-align属性的，其他块级元素则不支持。</p><blockquote><p>如果设置了元素 浮动，定位 会让元素块状化。然后导致vertical-align不起作用</p></blockquote><p><strong>另一种不生效情况如下：</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">128px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;<span class="number">1</span><span class="selector-class">.jpg</span>&quot; &gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br></pre></td></tr></table></figure><p>这种情况 图片顶着 box 上边缘，为啥不起作用？实际上是行框盒子前面的 <strong>幽灵空包节点</strong>高度太小，如果我们设置足够大的行高让 ”<strong>幽灵节点</strong>“ 高度足够，就会看到效果了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">128px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">128px</span>; // 关键</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>为啥 diaplay: table-cell 可以无视行高？</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">128px</span>;</span><br><span class="line">    <span class="attribute">display</span>: table-cell;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;box&quot;&gt;</span><br><span class="line">&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;<span class="number">1</span><span class="selector-class">.jpg</span>&quot; &gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br></pre></td></tr></table></figure><p>对table-cell元素而言，vertical-align起作用的是table-cell元素自身</p><p><strong><a href="http://demo.cssworld.cn/5/3-5.php">消除底部间隙</a></strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">280px</span>;</span><br><span class="line"><span class="attribute">outline</span>: <span class="number">1px</span> solid <span class="number">#aaa</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>结果 box 元素 高度肯能就无缘无故多了5 px.</p><p>间隙产生的三大元凶就是“幽灵空白节点”、line-height和vertical-align属性</p><ol><li>图片块状化。可以一口气干掉“幽灵空白节点”、line-height和vertical-align。</li><li>容器line-height足够小。只要半行间距小到字母x的下边缘位置或者再往上，自然就没有了撑开底部间隙高度空间了。比方说，容器设置line-height:0。</li><li>容器font-size足够小。此方法要想生效，需要容器的line-height属性值和当前font-size相关，如line-height:1.5或者line-height:150%之类；否则只会让下面的间隙变得更大，因为基线位置因字符x变小而往上升了。</li><li>图片设置其他vertical-align属性值。间隙的产生原因之一就是基线对齐，所以我们设置vertical-align的值为top、middle、bottom中的任意一个都是可以的。</li></ol><p><strong>内联特性导致的margin无效</strong></p><blockquote><p>而在CSS世界中，非主动触发位移的内联元素是不可能跑到计算容器外面的，导致图片的位置被“幽灵空白节点”的vertical-align:baseline给限死了</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    x<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/b2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在幽灵节点处使用X代替，因为字符x下边缘和图片下边缘对齐，字符x非主动定位，不可能跑到容器外面，所以图片就被限死在此问题，margin-top失效。</p><p><strong>inline-block与baseline</strong></p><blockquote><p>vertical-align属性的默认值<strong>baseline</strong>在<strong>文本之类的内联元素</strong>那里就是<strong>字符x的下边缘</strong>，对于<strong>替换元素</strong>则是<strong>替换元素的下边缘</strong>。但是，如果是<strong>inline-block元素</strong>，则规则要复杂了：一个inline-block元素，如果里面<strong>没有内联元素，或者overflow不是visible</strong>,则该元素的基线就是其<strong>margin底边缘</strong>；否则其基线就是元素里面<strong>最后一行内联元素的基线</strong>。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;dib-baseline&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;dib-baseline&quot;</span>&gt;</span>x-baselinex-baselinex-baselinex-baselinex-baseline<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dib-baseline</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>; <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221013154058106.png" alt="image-20221013154058106"></p><p><a href="http://demo.cssworld.cn/5/3-6.php">text-align:jusitfy声明可以帮助我们实现兼容的列表两端对齐效果</a></p><p><a href="http://demo.cssworld.cn/5/3-7.php">处理图标对齐</a></p><p><strong><a href="http://demo.cssworld.cn/5/3-8.php">vertical-align middle 近似垂直居中的原因</a>)</strong></p><ul><li><p>内联元素：元素的垂直中心点和行框盒子基线往上1/2 x-height处对齐（就是字符x的交叉点位置）。</p></li><li><p>table-cell元素：单元格填充盒子相对于外面的表格行居中对齐。</p></li></ul><blockquote><p>基本上所有的字体中，字符x的位置都是偏下一点儿的，font-size越大偏移越明显，这才导致默认状态下的vertial-align:middle实现的都是“近似垂直居中”。</p><p>如果想要实现真正意义上的垂直居中对齐，只要想办法让字符x的中心位置就是容器的垂直中心位置即可，通常的做法是设置font-size:0。</p></blockquote><p><strong><a href="http://demo.cssworld.cn/5/3-9.php">vertical-align 的顶部，底部对齐</a></strong></p><ul><li>vertical-align:text-top：盒子的顶部和父级内容区域的顶部对齐。</li><li>vertical-align:text-bottom：盒子的底部和父级内容区域的底部对齐。</li></ul><p><strong><a href="http://demo.cssworld.cn/5/3-10.php">基于vertical-align属性的水平垂直居中弹框</a></strong></p><ul><li><h5 id="HTML：-6"><a href="#HTML：-6" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>内容占位<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-6"><a href="#CSS：-6" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* for IE8 */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">data:image/png;base64,iVB...g==</span>);</span><br><span class="line">    <span class="comment">/* for IE9+ */</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>), none;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dialog</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: left;</span><br><span class="line">    <span class="attribute">white-space</span>: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="流的破坏与保护"><a href="#流的破坏与保护" class="headerlink" title="流的破坏与保护"></a>流的破坏与保护</h3><h4 id="float"><a href="#float" class="headerlink" title="float"></a>float</h4><blockquote><p>设计初衷：浮动的本质就是为了实现文字环绕效果（即“父级高度塌陷”和“行框盒子区域限制”）</p><p>float属性有个著名的特性表现，就是会让父元素的高度塌陷。</p></blockquote><ul><li><p>浮动锚点</p><p>  浮动锚点是float元素所在的“流”中的一个点，这个点本身并不浮动，就表现而言更像一个没有margin、border和padding的空的内联元素。</p></li><li><p>浮动参考</p><p>  指的是浮动元素对齐参考的实体</p></li></ul><blockquote><p>浮动锚点其作用就是产生“行框盒子”，因为“浮动锚点”表现如同一个空的内联元素，有内联元素自然就有“行框盒子”，于是，float元素对齐的参考实体“行框盒子”对于块状元素也同样适用了，只不过这个“行框盒子”由于没有任何内容，所以无尺寸，看不见也摸不着罢了。</p></blockquote><p>例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">右边新增一个a标签</span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>更多<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">a 标签设置 float: right;</span><br><span class="line"></span><br><span class="line">当标题文字出现换行时，更多 显示的位置？</span><br><span class="line">IE6/7中浮动元素会在第二行显示，IE8以上的浏览器会显示在第一行</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在CSS世界中，float元素的“浮动参考”是“行框盒子”，也就是float元素在当前“行框盒子”内定位</p><p>每一行内联元素都有一个“行框盒子”，这个例子中标题文字比较多，两行显示了，因此有上下两个“行框盒子”，而“更多”所在的<strong>a</strong>元素是在标题文字后面，位于第二行，因此，这里设置了float:right的<strong>a</strong>元素是相对于第二行的“行框盒子”对齐的。</p><p>那如果标题文字刚好够两行，那么 <strong>更多</strong>显示的位置是？</p><p>会单独展示在第三行？</p><p><strong><a href="http://demo.cssworld.cn/6/1-2.php">利用float 破坏流特性的两栏自适应布局</a></strong></p><p><strong>clear 属性</strong></p><blockquote><p>用来专门处理float 属性带来的塌陷问题</p><p>官方对clear属性的解释是：“元素盒子的边不能和前面的浮动元素相邻。”</p><p>就是设置了clear属性的元素自身如何如何，而不是让float元素如何如何</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clear</span>: none | left| right | both;</span><br></pre></td></tr></table></figure><p>我们一般常用 both 几乎不使用 right/left,应为 用它们时肯定可以用 both 代替</p><p>因为clear属性只有块级元素才有效，而 :after的伪类元素都是内联水平， 所以需要手动设置display</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: table;// block/list-item</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>由于clear:both的作用本质是让自己不和float元素在一行显示，并不是真正意义上的清除浮动，因此float元素一些不好的特性依然存在，于是，会有类似下面的现象。</p></blockquote><p>由于clear:both的作用本质是让自己不和float元素在一行显示，并不是真正意义上的清除浮动，因此float元素一些不好的特性依然存在，于是，会有类似下面的现象。</p><ul><li>如果clear:both元素前面的元素就是float元素，则margin-top负值即使设成-9999px，也不见任何效果。</li><li>clear:both后面的元素依旧可能会发生文字环绕的现象</li></ul><h4 id="css世界的结界"><a href="#css世界的结界" class="headerlink" title="css世界的结界"></a><strong>css世界的结界</strong></h4><blockquote><p>BFC全称为block formatting context，中文为“块级格式化上下文”。</p><p>表现原则：如果一个元素具有BFC，内部子元素再怎么翻江倒海、翻云覆雨，都不会影响外部的元素。</p></blockquote><p><strong>触发BFC</strong></p><p>满足下面条件之一即可：</p><ul><li><html>根元素；</li><li>float的值不为none；</li><li>overflow的值为auto、scroll或hidden；</li><li>display的值为table-cell、table-caption和inline-block中的任何一个；</li><li>position的值不为relative和static。</li></ul><p>总结一下，我们对BFC声明家族大致过了一遍，能担任自适应布局重任的也就是以下几个。</p><ul><li>• overflow:auto/hidden，适用于IE7及以上版本浏览器；</li><li>• display:inline-block，适用于IE6和IE7；</li><li>• display:table-cell，适用于IE8及以上版本浏览器。</li></ul><p>最后，我们可以提炼出两套IE7及以上版本浏览器适配的自适应解决方案。</p><p>（1）借助overflow属性，如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lbf-content</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）融合display:table-cell和display:inline-block，如下：[插图]</p><p>单元格有一个非常神奇的特性，就是宽度值设置得再大，实际宽度也不会超过表格容器的宽度.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lbf-content</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table-cell; <span class="attribute">width</span>: <span class="number">9999px</span>;</span><br><span class="line">    <span class="comment">/*如不需要兼容IE7 下面样式可省略*/</span></span><br><span class="line">    <span class="attribute">display</span>: inline-block; <span class="attribute">width</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关于 display: table-cell; 元素内连续英文无法换行。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.word-break</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: table;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">    <span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="最佳结界-overflow"><a href="#最佳结界-overflow" class="headerlink" title="最佳结界 overflow"></a><strong>最佳结界 overflow</strong></h4><blockquote><p>要想彻底清除浮动的影响，最适合的属性不是clear而是overflow。一般使用overflow:hidden，利用BFC的“结界”特性彻底解决浮动对外部或兄弟元素的影响</p></blockquote><p><strong>overflow-x和overflow-y</strong></p><blockquote><p>如果overflow-x和overflow-y属性中的一个值设置为visible而另外一个设置为scroll、auto或hidden，则visible的样式表现会如同auto。也就是说，除非overflow-x和overflow-y的属性值都是visible，否则visible会当成auto来解析。换句话说，永远不可能实现一个方向溢出剪裁或滚动，另一方向内容溢出显示的效果。</p></blockquote><p><strong>overflow与滚动条</strong></p><p>HTML 中默认产生滚动的条的标签： html,textarea. 应为它们的overflow 属性默认值不是 visible，而是 auto</p><p><strong>关于浏览器滚动条</strong></p><ul><li>针对PC端：无论是啥浏览器，默认滚动条均来自 html,而不是body .如需去除页面默认滚动条只需</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;<span class="attribute">overflow</span>: hidden;&#125;</span><br></pre></td></tr></table></figure><ul><li>滚动条会占用容器的可用宽度或高度。（移动端不会）</li></ul><p>实现表头固定，表格内容可滚动效果，一般使用双表格实现，但是当表格内容出现滚动条时，页面可能出现晃动，应为一开始没有滚动条后面出现滚动条，此时页面可用宽度发生变化，水平居中重新计算，导致页面发生晃动，体验非常不好。下边推荐一剂良药</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">    <span class="attribute">overflow-x</span>: hide;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">:root</span> <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>基本上药到病除，而且后遗症非常少，大家不妨试试！</p><p>对于Chrome浏览器：</p><p>• 整体部分，::-webkit-scrollbar；</p><p>• 两端按钮，::-webkit-scrollbar-button；</p><p>• 外层轨道，::-webkit-scrollbar-track；</p><p>• 内层轨道，::-webkit-scrollbar-track-piece；</p><p>• 滚动滑块，::-webkit-scrollbar-thumb；</p><p>• 边角，::-webkit-scrollbar-corner</p><p>但平时开发只用下面3个属性：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="comment">/*血槽厚度*/</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="comment">/*拖动条*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>)</span><br><span class="line">        boorder-radius: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="comment">/*背景槽*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>依赖overflow 的文字溢出</strong></p><p>单行超出隐藏</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.overfolw</span> &#123;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    <span class="attribute">overflow</span>: hide;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最多显示2行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ell-rows-2</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    -webkit-box-orient: vertical;</span><br><span class="line">    -webkit-line-clamp: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>overflow与锚点定位</strong></p><p>锚点定位： 通过 元素Id 属性，与a标签 href属性联动</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#1&quot;</span>&gt;</span>发展历程<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    发展历程</span><br><span class="line"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:&quot;</span>&gt;</span>返回顶部<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>锚点定位行为的发生，本质上是通过改变容器滚动高度或者宽度来实现的</p><p><a href="https://demo.cssworld.cn/6/4-2.php#four">URL锚链锚点定位和overflow的选项卡切换效果实例页面</a></p><blockquote><p>通过URL锚点定位有一个问题，如果页面有滚动条，切换时页面会发生滚动，而focus定位却不会（overflow:hiden;只是没有显示滚动条不影响锚点定位）</p></blockquote><p><a href="https://demo.cssworld.cn/6/4-3.php">focus锚点定位和overflow的选项卡切换效果实例页面</a></p><blockquote><p>原理其实很简单，就是在每个列表里塞入一个肉眼看不见的<input>输入框，然后选项卡按钮变成<label>元素，并通过for属性与<input>输入框的id相关联，这样，点击选项按钮会触发输入框的focus行为，触发锚点定位，实现选项卡切换效果</p></blockquote><h4 id="float的兄弟position-absolute"><a href="#float的兄弟position-absolute" class="headerlink" title="float的兄弟position:absolute"></a><strong>float的兄弟position:absolute</strong></h4><blockquote><p>都兼具“块状化”“包裹性”“破坏性”等特性，不少布局场合甚至可以相互替代</p><p>absolute和float可以看作是“同父异母”的兄弟关系</p></blockquote><p><strong>absolute的包含块</strong></p><blockquote><p>就是元素用来计算和定位的一个框</p><p>有经验的人应该都知道，普通元素的百分比宽度是相对于父元素的content box宽度计算的，而绝对定位元素的宽度是相对于第一个position不为static的祖先元素计算的。</p></blockquote><ol><li><p>根元素（大多数场景下html就是）被称为“初始包含快”，其尺寸等同于浏览器窗口大小</p></li><li><p>如果元素position: fixed; 则包含块是初始包含快</p></li><li><p>如果该元素的position是relative或者static，则“包含块”由其最近的块容器祖先盒的content box边界形成。</p></li><li><p>如果元素position:absolute，则“包含块”由最近的position不为static的祖先元素建立</p><p> 如果该祖先是纯inline元素则规则略微复杂：</p><ul><li>假设给内联元素的前后各生成一个宽度为0的内联盒子（inline box），则这两个内联盒子的padding box外面的包围盒就是内联元素的“包含块”；</li><li>如果该内联元素被跨行分割了，那么“包含块”是未定义的，也就是CSS2.1规范并没有明确定义，浏览器自行发挥。</li><li>否则，“包含块”由该祖先的padding box边界形成。如果没有符合条件的祖先元素，则“包含块”是“初始包含</li></ul></li></ol><p>和常规元素相比，absolute绝对定位元素的“包含块”有以下3个明显差异：</p><p>（1）内联元素也可以作为“包含块”所在的元素；</p><p>（2）“包含块”所在的元素不是父块级元素，而是最近的position不为static的祖先元素或根元素；</p><p>（3）边界是padding box而不是content box。</p><blockquote><p>position: absolute;<a href="http://demo.cssworld.cn/6/5-1.php">定位元素的最大宽度会受到包含块宽度的影响</a>。</p></blockquote><blockquote><p>元素padding值可能会影响 到 内部 absolute 定位元素的位置 </p></blockquote><p><strong>对 absolute 的误区</strong></p><p><a href="http://demo.cssworld.cn/6/5-4.php">一个绝对定位元素，没有任何left/top/right/bottom属性设置，并且其祖先元素全部都是非定位元素，其位置在哪里？</a></p><p>很多人都会认为是在浏览器窗口左上方，其实不是的，还是当前位置。</p><blockquote><p>正是这种错误认知导致凡是使用absolute绝对定位的地方，一定父容器position:relative，同时left/top等属性定位，甚至必同时使用z-index属性设置层级。</p></blockquote><blockquote><p>我把这种没有设置left/top/right/bottom属性值的绝对定位称为“无依赖绝对定位”</p><p>“无依赖绝对定位”本质上就是一个不占据任何空间的相对定位元素</p><p><a href="https://demo.cssworld.cn/6/5-5.php">无依赖绝对定位的强大之处</a></p><p><a href="http://demo.cssworld.cn/6/5-6.php">“无依赖绝对定位”与超越常规布局的排版实例页面</a></p><p><a href="http://demo.cssworld.cn/6/5-7.php">下拉列表定位</a></p></blockquote><p>虽然“无依赖绝对定位”好处多多，但建议只用在静态交互效果上，比方说，导航二级菜单的显示与定位。如果是动态呈现的列表，建议还是使用JavaScript来计算和定位。</p><p><strong>无依赖绝对定位 对内联，块级元素表现</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.follow</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;follow&quot;</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;follow&quot;</span>&gt;</span>div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>那么由于非绝对定位状态下span和div都在“标题”的下面，因此，这里最后的效果也同样是都在“标题”的下面。</p><p><strong>浮动与无依赖绝对定位 不一致的表现</strong></p><p>当“浮动”和“无依赖绝对定位”相遇的时候，就会发生一些不愉快的事情</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>+&quot;<span class="attr">nav</span>&quot;&gt;</span> 导航1 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;new.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;follow&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span> &gt;</span>导航2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.follow</span> &#123;</span><br><span class="line">    posotion: absolute;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.nav</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果在IE和Chrome浏览器下，夹在中间的<strong>img</strong>在中间显示，但是Firefox浏览器却是在最后显示</p><p>对于上述场景，如果希望各个浏览器的表现都是一样的，<strong>img</strong>外层嵌套一层标签并浮动即可，注意，是外层标签浮动。由于浮动和绝对定位水火不容，本身设置浮动是没有任何效果的。</p><hr><p><strong>absolute与text-align</strong></p><p>按道理讲，absolute 与 float 一样，都可以让元素块状化，应该不会受到内联元素对齐的text-align属性的影响。但 <a href="http://demo.cssworld.cn/6/5-8.php">text-align 可以改变absolute元素位置</a></p><ul><li><h5 id="HTML：-7"><a href="#HTML：-7" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-7"><a href="#CSS：-7" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>; <span class="attribute">height</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eef0f6</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>这里之所以产生了位置变化，本质上是“幽灵空白节点”和“无依赖绝对定位”共同作用的结果。</p></blockquote><p>img是内联水平， 所以p标签内 存在行框盒子，会存在幽灵节点。由于 img 设置了absolute 不占据位置，所以幽灵节点就居中了。根据无依赖绝对定位规则 图片就跟在幽灵节点后面。设置幽灵节点位置对齐间接影响了 img</p><p><a href="http://demo.cssworld.cn/6/5-10.php">通过幽灵节点影响定位元素实现返回顶部</a></p><ul><li><h5 id="HTML：-8"><a href="#HTML：-8" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;constr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;alignright&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;follow&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;circle.png&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;backtop.png&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-8"><a href="#CSS：-8" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.constr</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f0f3f9</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.alignright</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.alignright</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\2002&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.follow</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.follow</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="absolute与overflow"><a href="#absolute与overflow" class="headerlink" title="absolute与overflow"></a><strong>absolute与overflow</strong></h4><p>上边示例代码中， 设置了hieght: 0; 又设置了overflow: hidden;那岂不是内容会被剪裁至不可见？</p><blockquote><p>官方：绝对定位元素不总是被父级overflow属性剪裁，尤其当overflow在绝对定位元素及其包含块之间的时候。</p><p>换一种方法表述就是：如果overflow 不是定位元素，同时绝对定位元素和 overflow 容器之间也没有定位元素，则overflow无法对absolute元素进行剪裁。</p></blockquote><p>下面HTML中图片不会被裁剪</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absollute;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>overflow 元素父级是定位元素也不会被裁决</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果overflow属性所在的元素同时也是定位元素，里面的绝对定位元素会被剪裁：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden; position: relative;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absollute;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果overflow元素和绝对定位元素之间有定位元素，也会被剪裁：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;overflow: hidden;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>最后，非常有必要补充一点，那就是由于position:fixed固定定位元素的包含块是根元素，因此，除非是窗体滚动，否则上面讨论的所有overflow剪裁规则对固定定位都不适用。</p><p>overflow元素自身transform的时候，Chrome和Opera浏览器下的overflow剪裁是无效的</p><p>transform除了改变overflow属性原有规则，对层叠上下文以及position:fixed的渲染都有影响</p></blockquote><h4 id="absolute与clip"><a href="#absolute与clip" class="headerlink" title="absolute与clip"></a><strong>absolute与clip</strong></h4><p>普通元素可以使用 overflow 进行裁剪，但是 fixed 元素 包含快是根元素，所以只能使用clip</p><p>clip属性要想起作用，元素必须是绝对定位或者固定定位，也就是position属性值必须是absolute或者fixed。</p><p>语法如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clip</span>: <span class="built_in">rect</span>(top right bottom left)</span><br></pre></td></tr></table></figure><p>实际语法应该是：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">clip</span>: <span class="built_in">rect</span>(top, right, bottom, left)</span><br></pre></td></tr></table></figure><blockquote><p>就顺序而言，top→right→bottom→left在CSS世界中是一脉相承的，和margin/border-width等属性的4个值的顺序一样，都是从top开始，顺时针旋转。</p><p>这里的4个值有一个明显不一样的地方，就是不能缩写，且和border-width类似，是不支持百分比值的。</p></blockquote><p>场景：很多网站左上角都有包含自己网站名称的标识（logo），而这些标识一般都是图片，为了更好地SEO以及无障碍识别，我们一般会使用<h1>标签写上网站的名称，代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        css 世界</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如何隐藏<h1>标签中的“CSS世界”这几个文字，通常有以下一些技术选型。</p><ul><li><p>下策是display:none或者visibility:hidden隐藏，因为屏幕阅读设备会忽略这里的文字。</p></li><li><p>text-indent缩进是中策，但文字如果缩进过大，大到屏幕之外，屏幕阅读设备也是不会读取的。</p></li><li><p>color:transparent是移动端上策，但却是桌面端中策，因为原生IE8浏览器并不支持它。color:transparent声明，很难用简单的方式阻止文本被框选。</p></li><li><p>clip剪裁隐藏是上策，既满足视觉上的隐藏，屏幕阅读设备等辅助设备也支持得很好。</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="comment">/*无依赖绝对定位，nice*/</span></span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">clip</span>: <span class="built_in">rect</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>这里使用的clip剪裁隐藏是我工作这么多年大浪淘沙筛选后的最佳实践，有对比才能显出好在何处</p><ul><li><p>display:none或者visibility:hidden隐藏有两个问题，一个是按钮无法被focus了，另外一个是IE8浏览器下提交行为丢失，原因应该与按钮focus特性丢失有关。</p></li><li><p>透明度0覆盖也是一个不错的实践。如果是移动端项目，建议这么做；但如果是桌面端项目，则完全没有必要。使用透明度0覆盖的问题是每一个场景都需要根据环境的不同重新定位，以保证点击区域的准确性，成本较高，但clip隐藏直接用一个类名加一下就好。</p></li><li><p>还有一种比较具有适用性的“可访问隐藏”是下面这种屏幕外隐藏：</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.abs-out</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">999px</span>;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">999px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>当一个控件元素被focus的时候，浏览器会自动改变滚动高度，让这个控件元素在屏幕内显示。假如说我们的<label>“提交”按钮在第二屏，则点击按钮的时候浏览器会自动跳到第一屏置顶，因为按钮隐藏在了屏幕外，于是发生了非常糟糕的体验问题。而clip就地剪裁，就不会有“页面跳动”的体验问题。于是，权衡成本和效果，clip隐藏成为了最佳选择，特别是对于桌面端项目。</p></blockquote><blockquote><p><strong>clip隐藏仅仅是决定了哪部分是可见的，非可见部分无法响应点击事件等</strong></p><p><strong>使用clip进行剪裁的元素其clientWidth和clientHeight包括样式计算的宽高都还是原来的大小</strong></p></blockquote><h4 id="absolute的流体特性"><a href="#absolute的流体特性" class="headerlink" title="absolute的流体特性"></a><strong>absolute的流体特性</strong></h4><p>当absolute遇到left/top/right/bottom属性的时候，absolute元素才真正变成绝对定位元素。此时原本的相对特性丢失</p><p>说到流体特性，我们通常第一反应就是**<div>之类的普通块级元素<strong>。实际上，绝对定位元素也具有类似的流体特性，当然，不是默认就有的，而是在</strong>特定条件下才具有<strong>，这个条件就是“</strong>对立方向同时发生定位的时候**”。</p><p>例如：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>而绝对定位元素的这种流体特性比普通元素要更强大，<strong>普通元素流体特性只有一个方向</strong>，默认是水平方向，但是<strong>绝对定位元素可以让垂直方向和水平方向同时保持流动性</strong>。</p></blockquote><h4 id="position-relative"><a href="#position-relative" class="headerlink" title="position:relative"></a><strong>position:relative</strong></h4><blockquote><p>虽然说relative/absolute/fixed都能对absolute的“包裹性”以及“定位”产生限制，但只有relative可以让元素依然保持在正常的文档流中。</p><p>relative的定位有两大特性：</p><ul><li><p>一是相对自身</p><p>  相对定位元素的left/top/right/bottom的百分比值是相对于包含块计算的，而不是自身.如果包含块的高度是auto，那么计算值是0，偏移无效</p><p>  各方向的值相对自身偏移</p></li><li><p>二是无侵入</p><p>  当relative进行定位偏移的时候，一般情况下不会影响周围元素的布局。</p></li></ul></blockquote><p>当相对定位元素同时应用对立方向的定位值得时候，，也就是<strong>top/bottom和left/right同时使用</strong>的时候，其表现和绝对定位差异很大。<strong>绝对定位是尺寸拉伸，保持流体特性</strong>，但是<strong>相对定位却是“你死我活”的表现</strong>，也就是说，<strong>只有一个方向的定位属性会起作用</strong>。而孰强孰弱则是与文档流的顺序有关的，<strong>默认的文档流是自上而下、从左往右</strong>，因此<strong>top/bottom同时使用的时候，bottom被干掉</strong>；<strong>left/right同时使用的时候，right毙命</strong>。</p><p><a href="https://demo.cssworld.cn/6/6-1.php">relative定位和margin定位对比实例页面</a></p><p><strong>relative的最小化影响原则</strong></p><p>（1）尽量不使用relative，如果想定位某些元素，看看能否使用“无依赖的绝对定位”；</p><p>（2）如果场景受限，一定要使用relative，则该relative务必最小化。</p><p>最小化影响 示例：</p><p>给img添加一层相对定位盒子，而不是给最外层盒子添加相对定位</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute;top:0;left:0;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容2<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容4<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="position-fixed固定定位"><a href="#position-fixed固定定位" class="headerlink" title="position:fixed固定定位"></a>position:fixed固定定位</h4><blockquote><p>position:fixed固定定位元素的“包含块”是根元素，我们可以将其近似看成<html>元素。换句话说，唯一可以限制固定定位元素的就是<html>根元素</p></blockquote><p>实现将目标元素定位到某个模块的右上角：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">        <span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.father &#123;</span><br><span class="line">width: 300px; height: 200px;</span><br><span class="line">position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.right &#123;</span><br><span class="line">height: 0;</span><br><span class="line">text-align: right;</span><br><span class="line">overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.son &#123;</span><br><span class="line">display: inline;</span><br><span class="line">width: 40px; height: 40px;</span><br><span class="line">position: fixed;</span><br><span class="line">margin-left: -40px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>position:fixed的absolute模拟</strong></p><blockquote><p>有时候我们希望元素既有不跟随滚动的固定定位效果，又能被定位元素限制和精准定位，那该怎么办呢？</p></blockquote><p>把需要固定的元素，放置到出现滚动条元素的外面即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">            固定定位元素</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fixed&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    hmtl, <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.page</span>: &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.fixed</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>position:fixed与背景锁定</strong></p><blockquote><p>蒙层弹窗是网页中常见的交互，其中黑色半透明全屏覆盖的蒙层基本上都是使用position:fixed定位实现的。但是，如果细致一点儿就会发现蒙层无法覆盖浏览器右侧的滚动栏，并且鼠标滚动的时候后面的背景内容依然可以被滚动，并没有被锁定，体验略打折扣。如果希望背景锁定，该如何实现呢？</p></blockquote><p>position:fixed蒙层之所以出现背景依然滚动，那是因为滚动元素是根元素，正好是position:fixed的“包含块”。所以，如果希望背景被锁定，可以借鉴“absolute模拟fixed定位”的思路，让页面滚动条由内部的普通元素产生即可。</p><p>如果是移动端项目，阻止touchmove事件的默认行为可以防止滚动；如果是桌面端项目，可以让根元素直接overflow:hidden</p><h3 id="CSS世界的层叠规则"><a href="#CSS世界的层叠规则" class="headerlink" title="CSS世界的层叠规则"></a>CSS世界的层叠规则</h3><blockquote><p>默认情况下，网页内容是没有偏移角的垂直视觉呈现，当内容发生层叠的时候，一定会有一个前后的层叠顺序产生，有点儿类似于真实世界中“论资排辈”的感觉。</p></blockquote><h4 id="z-index只是CSS层叠规则中的一叶小舟"><a href="#z-index只是CSS层叠规则中的一叶小舟" class="headerlink" title="z-index只是CSS层叠规则中的一叶小舟"></a>z-index只是CSS层叠规则中的一叶小舟</h4><p>说到层叠，很多人第一 反应就是z-index 属性。z-index属性只有和定位元素（position不为static的元素）在一起的时候才有作用，可以是正数也可以是负数。理论上说，数值越大层级越高，但实际上其规则要复杂很多。</p><p>但随着CSS3新世界的到来，z-index已并非支队定位元素有效，flex盒子的子元素也可以设置。</p><p>网页中绝大多数元素是非定位元素，并影响层叠顺序属性远不止z-index， 因此大家千万不要认为z-index 属性就可以代表css世界的层叠规则</p><h4 id="理解CSS世界的层叠上下文和层叠水平（概念）"><a href="#理解CSS世界的层叠上下文和层叠水平（概念）" class="headerlink" title="理解CSS世界的层叠上下文和层叠水平（概念）"></a>理解CSS世界的层叠上下文和层叠水平（概念）</h4><blockquote><p>层叠上下文</p><p>英文称作stacking context，是HTML中的一个三维的概念。如果一个元素含有层叠上下文，我们可以理解为这个元素在z轴上就“高人一等”。</p></blockquote><blockquote><p>层叠水平</p><p>英文称作stacking level，决定了同一个层叠上下文中元素在z轴上的显示顺序。</p></blockquote><p>需要注意的是，诸位<strong>千万不要把层叠水平和CSS的z-index属性混为一谈</strong>。尽管某些情况下z-index确实可以影响层叠水平，但是只限于定位元素以及flex盒子的孩子元素；而层叠水平所有的元素都存在。</p><h4 id="理解元素的层叠顺序（规则）"><a href="#理解元素的层叠顺序（规则）" class="headerlink" title="理解元素的层叠顺序（规则）"></a>理解元素的层叠顺序（规则）</h4><blockquote><p>在CSS 2.1的年代，在CSS3新世界还没有到来的时候（注意这里的前提），层叠顺序规则如图7-2所示</p></blockquote><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221018082705146.png" alt="image-20221018082705146"></p><ol><li>位于最下面的background/border特指层叠上下文元素的边框和背景色。每一个层叠顺序规则仅适用于当前层叠上下文元素的小世界。</li><li>inline水平盒子指的是包括inline/inline-block/inline-table元素的“层叠顺序”，它们都是同等级别的。</li><li>单纯从层叠水平上看，实际上z-index:0和z-index:auto是可以看成是一样的。注意这里的措辞—“单纯从层叠水平上看”，实际上，两者在层叠上下文领域有着根本性的差异</li></ol><p><strong>为啥 inline水平盒子层叠顺序比浮动元素还要高？</strong></p><p>background/border为装饰属性，浮动和块状元素一般用作布局，而内联元素都是内容。网页中最重要的是什么？当然是内容了</p><p>下面这两条是层叠领域的黄金准则。当元素发生层叠的时候，其覆盖关系遵循下面两条准则：</p><ul><li><p>谁大谁上：当具有明显的层叠水平标识的时候，如生效的z-index属性值，在同一个层叠上下文领域，层叠水平值大的那一个覆盖小的那一个。</p></li><li><p>后来居上：当元素的层叠水平一致、层叠顺序相同的时候，在DOM流中处于后面的元素会覆盖前面的元素。</p></li></ul><h4 id="层叠上下文的特性"><a href="#层叠上下文的特性" class="headerlink" title="层叠上下文的特性"></a>层叠上下文的特性</h4><ul><li>层叠上下文的层叠水平要比普通元素高（原因后面会说明）。</li><li>层叠上下文可以阻断元素的混合模式（参见<a href="http://www.zhangxinxu.com/wordpress/">http://www.zhangxinxu.com/wordpress/</a>? p=5155的这篇文章的第二部分说明）。</li><li> 层叠上下文可以嵌套，内部层叠上下文及其所有子元素均受制于外部的“层叠上下文”。</li><li> 每个层叠上下文和兄弟元素独立，也就是说，当进行层叠变化或渲染的时候，只需要考虑后代元素。</li><li>每个层叠上下文是自成体系的，当元素发生层叠的时候，整个元素被认为是在父层叠上下文的层叠顺序中。</li></ul><h4 id="层叠上下文的创建"><a href="#层叠上下文的创建" class="headerlink" title="层叠上下文的创建"></a>层叠上下文的创建</h4><p>（1）天生派：页面根元素天生具有层叠上下文，称为根层叠上下文。</p><p>（2）正统派：z-index值为数值的定位元素的传统“层叠上下文”。</p><p>（3）扩招派：其他CSS3属性。</p><h4 id="根层叠上下文"><a href="#根层叠上下文" class="headerlink" title="根层叠上下文"></a>根层叠上下文</h4><p>根层叠上下文指的是页面根元素，可以看成是<html>元素。因此，页面中所有的元素一定处于至少一个“层叠结界”中。</p><h4 id="定位元素与传统层叠上下文"><a href="#定位元素与传统层叠上下文" class="headerlink" title="定位元素与传统层叠上下文"></a>定位元素与传统层叠上下文</h4><p>对于position值为relative/absolute以及Firefox/IE浏览器（不包括Chrome浏览器）下含有position:fixed声明的定位元素，当其z-index值不是auto的时候，会创建层叠上下文。</p><p>HTML：</p><p>比较图片层级谁大谁先上，结果图片在上</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:auto;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 美女 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute; z-index:2;&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:auto;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 美景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;2.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:1;&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此时 父级z-index 层级为0，创建层叠上下文。比较父级层级，相同，后来居上，背景在上</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:0;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 美女 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute; z-index:2;&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:0;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 美景 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;2.jpg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:relative; z-index:1;&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>Chrome等WebKit内核浏览器下，position:fixed元素天然层叠上下文元素，无须z-index为数值。根据我的测试，目前IE和Firefox仍是老套路。</p></blockquote><h4 id="css3与新时代的层叠上下文"><a href="#css3与新时代的层叠上下文" class="headerlink" title="css3与新时代的层叠上下文"></a>css3与新时代的层叠上下文</h4><p>（1）元素为flex布局元素（父元素display:flex|inline-flex），同时z-index值不是auto。</p><p>（2）元素的opacity值不是1。</p><p>（3）元素的transform值不是none。</p><p>（4）元素mix-blend-mode值不是normal。</p><p>（5）元素的filter值不是none。</p><p>（6）元素的isolation值是isolate。</p><p>（7）元素的will-change属性值为上面2～6的任意一个（如will-change:opacitg、will-chang:transform等）。</p><p>（8）元素的-webkit-overflow-scrolling设为touch。</p><h4 id="层叠上下文与层叠顺序"><a href="#层叠上下文与层叠顺序" class="headerlink" title="层叠上下文与层叠顺序"></a>层叠上下文与层叠顺序</h4><p>普通元素具有了层叠上下文，其层叠顺序就会不见高，那它的层叠顺序究竟在哪个位置、哪个级别呢？</p><p>这里需要分两种情况讨论：</p><p>（1）如果层叠上下文元素不依赖z-index数值，则其层叠顺序是z-index:auto，可看成z:index:0级别；</p><p>（2）如果层叠上下文元素依赖z-index数值，则其层叠顺序由z-index值决定。</p><blockquote><p>元素一旦成为定位元素，其z-index就会自动生效，此时其z-index就是默认的auto，也就是0级别，根据上面的层叠顺序表，就会覆盖inline或block或float元素。而不支持z-index的层叠上下文元素天然是z-index:auto级别，也就意味着，层叠上下文元素和定位元素是一个层叠顺序的，于是当它们发生层叠的时候，遵循的是“后来居上”准则。</p></blockquote><p><a href="https://demo.cssworld.cn/7/5-1.php">图片淡出，文字跑到图片后面</a></p><ul><li><h5 id="HTML：-9"><a href="#HTML：-9" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>               </span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>只有图片淡出，文案一直100%透明<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;fade&quot;</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-9"><a href="#CSS：-9" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> fadeIn &#123;</span><br><span class="line">  <span class="number">0%</span> &#123; <span class="attribute">opacity</span>: <span class="number">0</span>; &#125;</span><br><span class="line">  <span class="number">100%</span> &#123; <span class="attribute">opacity</span>: <span class="number">1</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">256px</span>; <span class="attribute">height</span>: <span class="number">192px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute; <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.fade</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn <span class="number">2s</span> <span class="number">2s</span> infinite; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>opacity的值不是1的时候，是具有层叠上下文的，层叠顺序是z-index:auto级别，跟没有z-index值的absolute绝对定位元素是平起平坐的。而本实例中的文字元素在图片元素的前面，于是，只要CSS3动画不是最终一瞬间的opacity:1，位于DOM流后面的图片就会遵循“后来居上”准则而覆盖文字。</p><p>知道原因，想要解决这个问题就很简单了：</p><p>（1）调整DOM流的先后顺序；</p><p>（2）提高文字的层叠顺序，例如，设置z-index:1。</p><h4 id="z-index-的负值"><a href="#z-index-的负值" class="headerlink" title="z-index 的负值"></a>z-index 的负值</h4><blockquote><p>一开始的时候，以为一个定位元素设置z-index负值，就会跑到页面的背后，隐藏掉，看不到了。结果实际上是有时候确实隐藏了，但有时候又隐藏不掉。为什么会这样？</p></blockquote><p>z-index负值元素的层级：层叠上下文元素上面 &lt;  z-index负值  &lt; block元素的下面</p><p><a href="https://demo.cssworld.cn/7/6-1.php">一个栗子</a></p><ul><li><h5 id="HTML：-10"><a href="#HTML：-10" class="headerlink" title="HTML："></a>HTML：</h5>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/* 此时图片被.box背景遮挡*/</span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>.box非层叠上下文元素<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">/* 此时图片在.box背景上方*/</span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>.box是层叠上下文元素<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box context&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><h5 id="CSS：-10"><a href="#CSS：-10" class="headerlink" title="CSS："></a>CSS：</h5>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-tag">img</span> &#123; </span><br><span class="line">    <span class="attribute">position</span>: relative; </span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>; </span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.context</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>负值的应用：</p><ol><li><p>IE8下的多背景模拟</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: (<span class="number">1</span>.jpg);</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">0</span>; <span class="comment">/*创建层叠上下文*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: (<span class="number">2</span>.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: (<span class="number">3</span>.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 此时，就算．box元素里面是纯文字，伪元素图片照样在文字下面，如此广泛的适用场景使上面的处理几乎可以作为通用的多背景模拟实现准则来实现了</p></li><li><p><a href="http://demo.cssworld.cn/7/6-2.php">定位在元素的后面</a></p></li><li><p>可访问性隐藏</p><p> z-index负值可以隐藏元素，只需要层叠上下文内的某一个父元素加个背景色就可以</p></li></ol><h4 id="z-index-”不犯二“准则"><a href="#z-index-”不犯二“准则" class="headerlink" title="z-index ”不犯二“准则"></a>z-index ”不犯二“准则</h4><blockquote><p>对于非浮层元素，避免设置z-index值，z-index值没有任何道理需要超过2。由于z-index不能超过2，因此，我称其为“不犯二”准则。</p></blockquote><p><strong>为啥需要设置这个准则？</strong></p><p>（1）定位元素一旦设置了z-index值，就从普通定位元素变成了层叠上下文元素，相互间的层叠顺序就发生了根本的变化，很容易出现设置了巨大的z-index值也无法覆盖其他元素的问题。</p><p>（2）避免z-index“一山比一山高”的样式混乱问题。此问题多发生在多人协作以及后期维护的时候。例如，A小图标定位，习惯性写了个z-index:9; B一看，自己原来的实现被覆盖了，立马写了个z-index:99；结果比弹框组件层级还高，那还得了，立马弹框组件来一个z-index:999999；谁知后来，弹框中又要有出错提示效果……显然，最后项目的z-index层级管理就是一团糟。</p><blockquote><p>很重要的一点，我这里的“不犯二”准则，并不包括那些在页面上飘来飘去的元素定位，弹框、出错提示、一些下拉效果等都不受这一准则限制。</p><p>对于这类JavaScript驱动的浮层组件，我会借助“层级计数器”来管理</p><p>（1）总会遇到意想不到的高层级元素；</p><p>（2）组件的覆盖规则具有动态性。</p></blockquote><p><strong>层级计数器</strong></p><p>实际上就是一段JavaScript脚本，会遍历所有 <strong>body</strong> <strong>处于显示状态的子元素</strong>，并得到最大z-index值，和默认的z-index做比较。如果超出，则显示的组件的z-index自动加1，这样就不会出现有组件被其他组件覆盖的问题；如果不超出，就使用默认的z-index值，</p><h3 id="强大的文本处理能力"><a href="#强大的文本处理能力" class="headerlink" title="强大的文本处理能力"></a>强大的文本处理能力</h3><h4 id="font-size和vertical-align"><a href="#font-size和vertical-align" class="headerlink" title="font-size和vertical-align"></a>font-size和vertical-align</h4><blockquote><p>line-height的部分类别属性值是相对于font-size计算的，vertical-align百分比值属性值又是相对于line-height计算的，于是，看上去八辈子都搭不上边的vertical-align和font-size属性背后其实也有有着关联的。</p></blockquote><p>如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span> &gt; <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: -<span class="number">25%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此时 img 的vertical-align 的值是多少？</p><blockquote><p>16 * 1.5 * -25% = -6px</p></blockquote><h4 id="理解font-size与ex、em和rem的关系"><a href="#理解font-size与ex、em和rem的关系" class="headerlink" title="理解font-size与ex、em和rem的关系"></a>理解font-size与ex、em和rem的关系</h4><blockquote><p>ex是字符x高度，显然和font-size关系密切，font-size值越大，自然ex对应的大小也就大</p><p>某元素 font-size 大小是多少，其1em 就是font Size 大小，em就是’中’等汉字的高度</p><p>根元素 font-size 大小就是 1rem 的大小</p></blockquote><h4 id="font-size的关键字属性值"><a href="#font-size的关键字属性值" class="headerlink" title="font-size的关键字属性值"></a>font-size的关键字属性值</h4><ol><li><p>相对尺寸关键字</p><p> • larger：大一点，是<big>元素的默认font-size属性值。</p><p> • smaller：小一点，是<small>元素的默认font-size属性值。</p></li><li><p>绝对尺寸关键字</p><p> 与当前元素font-size无关，仅受浏览器设置的字号影响。注意这里的措辞，是“浏览器设置”，而非“根元素”，两者是有区别的。</p><p> • xx-large：好大好大，和<h1>元素计算值一样。</p><p> • x-large：好大，和<h2>元素计算值一样。</p><p> • large：大，和<h3>元素计算值近似（“近似”指计算值偏差在1像素以内，下同）。</p><p> • medium：不上不下，是font-size的初始值，和<h4>元素计算值一样</p><p> • small：小，和<h5>元素计算值近似。</p><p> • x-small：好小，和<h6>元素计算值近似。• xx-small：好小好小，无对应的HTML元素。</p></li></ol><h4 id="font-size-0与文本的隐藏"><a href="#font-size-0与文本的隐藏" class="headerlink" title="font-size:0与文本的隐藏"></a>font-size:0与文本的隐藏</h4><blockquote><p>桌面Chrome浏览器下有个12px的字号限制，就是文字的font-size计算值不能小于12px，我猜是因为中文，如宋体，要是小于12px，就会挤成成一团，略丑，Chrome看不下去，就直接禁用了。</p></blockquote><p>如果font-size:0的字号表现就是0，那么文字会直接被隐藏掉，并且只能是font-size:0，哪怕设置成font-size:0.0000001px，都还是会被当作12px处理的。</p><h4 id="字体属性家族的大家长font-family"><a href="#字体属性家族的大家长font-family" class="headerlink" title="字体属性家族的大家长font-family"></a>字体属性家族的大家长font-family</h4><p>font-family支持两类属性值，</p><p>一类是“字体名”</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: simsun; <span class="comment">/*字体名称有空格就需要引号包起来*/</span></span><br><span class="line">    <span class="comment">/* 多字体 */</span></span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;PingFang SC&#x27;</span>,<span class="string">&#x27;Microsoft Yahei&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>一类是“字体族”</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-family</span>: serif;</span><br></pre></td></tr></table></figure><ul><li><p>serif：衬线字体</p><p>  通俗讲就是笔画开始、结束的地方有额外装饰而且壁画粗细会有所不同的字体</p></li><li><p>sans-serif：无衬线字体。</p></li><li><p>monospace：等宽字体。</p></li><li><p>cursive：手写字体。</p></li><li><p>fantasy：奇幻字体。</p></li><li><p>system-ui：系统UI字体。</p></li></ul><p>字体族与字体名一起时，要将字体名放在前面，不然字体名可能不会加载，应为字体族满足文本渲染就不会在往后面解析了</p><h4 id="等宽字体的实践价值"><a href="#等宽字体的实践价值" class="headerlink" title="等宽字体的实践价值"></a>等宽字体的实践价值</h4><blockquote><p>所谓等宽字体，一般是针对英文字体而言的。据我所知，东亚字体应该都是等宽的，就是每个字符在同等font-size下占据的宽度是一样的。但是英文字体就不一定了，我随便写一个单词，就iMac吧，大家很明显地发现这个字符i要比M占据的宽度小。</p></blockquote><p>首先等宽字体利于代码呈现。对于写代码的人来说，无论是什么语言，易读是第一位，使用等宽字体，我们阅读起来会更轻松舒服。因此，一般编辑器使用的字体或者Web上需要呈现源代码的字体都是等宽字体</p><p><a href="http://demo.cssworld.cn/8/2-1.php">等宽字体与图形呈现案例一则</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-family</span>: Consolas, Monaco, monospace;</span><br></pre></td></tr></table></figure><h4 id="ch单位与等宽字体布局"><a href="#ch单位与等宽字体布局" class="headerlink" title="ch单位与等宽字体布局"></a>ch单位与等宽字体布局</h4><blockquote><p>ch和em、rem、ex一样，是CSS中和字符相关的相对单位。和ch相关的字符是0，没错，就是阿拉伯数字0。1ch表示一个0字符的宽度</p></blockquote><p>但是我们网页内容的字符不可能都是0，所以这个单位乍看就显得很鸡肋。但是，如果和等宽字体在一起使用，它就可以发挥不一样的威力</p><h4 id="中文字体和英文名称"><a href="#中文字体和英文名称" class="headerlink" title="中文字体和英文名称"></a>中文字体和英文名称</h4><blockquote><p>虽然一些常见中文字体，如宋体、微软雅黑等，直接使用中文名称作为CSS font-family的属性值也能生效，但我们一般都不使用中文名称，而是使用英文名称，主要是为了规避乱码的风险。还有一些中文字体直接使用中文名称作为CSS font-family的属性值是没有效果的，如思源黑体、兰亭黑体等，需要使用字体对应的英文名称才可以生效。</p></blockquote><h4 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h4><blockquote><p>微软正黑体是一款全面支持ClearType技术的TrueType无衬线字体，用于繁体中文系统。相对应地，中国大陆地区用的是微软雅黑</p></blockquote><blockquote><p>“思源黑体”和“思源宋体”是Adobe与Google合作推出的开源字体。其设计目标是可以广泛用于多种用途的计算机字体，比如用于手机、平板或者桌面的用户界面、网页浏览或者电子书阅读等，均包含7个字重</p></blockquote><blockquote><p>文泉驿微米黑”是Google Droid的开源衍生字体。Droid字体系是Google包含在著名的开源手机平台Android系统中的默认字体，其中的Droid Sans Fallback包含CJK标准汉字16000余个，是目前所知为数不多的开源中文字体之一（也是继文泉驿正黑之后第二个开源中文黑体）</p></blockquote><h4 id="字体家族其他成员"><a href="#字体家族其他成员" class="headerlink" title="字体家族其他成员"></a>字体家族其他成员</h4><p><strong>font-weight</strong></p><p>关键字：normal 和 bold</p><p>属性值：</p><p>• 100：文字很细，细如发丝。</p><p>• 200：文字很轻，轻如鸿毛。</p><p>• 300：文字较轻，轻如飞燕。</p><p>• 400：文字正常，等同normal。</p><p>• 500：文字不粗不细，不轻不重。</p><p>• 600：文字略粗，粗如小腿。</p><p>• 700：文字加粗，等同bold。</p><p>• 800：文字超粗，粗如大腿。</p><p>• 900：文字很重，重如泰山。</p><blockquote><p>如果我们在设置属性值时发现文字没啥变化，那就是当前字体不行，可以换一个字体试试 （思源黑体）</p></blockquote><h4 id="具有近似姐妹花属性值的font-style"><a href="#具有近似姐妹花属性值的font-style" class="headerlink" title="具有近似姐妹花属性值的font-style"></a>具有近似姐妹花属性值的font-style</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-style</span></span><br><span class="line"></span><br><span class="line">italic/oblique 这两个关键字都表示“斜体”</span><br></pre></td></tr></table></figure><p>italic是使用当前字体的斜体字体，而oblique只是单纯地让文字倾斜。如果当前字体没有对应的斜体字体，则退而求其次，解析为oblique，也就是单纯形状倾斜。</p><h4 id="font属性"><a href="#font属性" class="headerlink" title="font属性"></a>font属性</h4><p>font属性进行文本相关样式的缩写。可以缩写在font属性中的属性非常多，包括font-style、font-variant、font-weight、font-size、line-height、font-family等。完整语法为：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[[font-style]</span> || <span class="attribute">font-variant</span> || <span class="attribute">font-weight</span>]? <span class="attribute">font-size</span> <span class="selector-attr">[/ line-hieght]</span>? <span class="attribute">font</span>-familly ]</span><br><span class="line"></span><br><span class="line">? 表示<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">|| 表示 或</span><br><span class="line"></span><br><span class="line"><span class="attribute">font-size</span>和<span class="attribute">font-family</span>后面没有问号，也就是说是必需的</span><br></pre></td></tr></table></figure><p>font-family 不能省略，而且很长，每次写都要带一大串就很不好，有啥技巧避免？</p><ul><li><p>方法1</p><p>  可以随便找一个系统根本不存在的字体名占位，如字母a，或者特殊一点，用笑脸表情☺，然后再设置font-family:inherit来重置这个占位字体</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.font</span> &#123;</span><br><span class="line">    <span class="attribute">font</span>: <span class="number">30px</span>/<span class="number">30px</span> <span class="string">&#x27;☺&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>利用@font face规则将我们的字体列表重定义为一个字体，这是兼容性很好、效益很高的一种解决方法</p></li></ul><p><strong>font 关键字</strong></p><p>• icon：包含图标内容所使用的字体，如所有文件夹名称、文件名称、磁盘名称，甚至浏览器窗口标题所使用的字体。</p><p>• caption：活动窗口标题栏使用的字体。</p><p>• status-bar：窗体状态栏使用的字体。</p><p>• small-caption：调色板标题所使用的字体。</p><p>• message-box：消息盒里面使用的字体。</p><p>• menu：菜单使用的字体，如文件夹菜单。</p><p>此外还有很多非标准关键字,略</p><h4 id="字体属性的应用价值"><a href="#字体属性的应用价值" class="headerlink" title="字体属性的应用价值"></a><strong>字体属性的应用价值</strong></h4><p>目前，非常多网站的通用font-family直接就是：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: <span class="string">&#x27;Microsoft YaHei&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样一设置，就意味着所有操作系统下的所有浏览器都要使用“微软雅黑”字体。假如说用户的iMac或者macbook因为某些原因安装了“微软雅黑”字体，那岂不是这些系统原本更加漂亮的中文字体就不能使用了？</p><p><strong>设置让字体跟随系统</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 三选一设置 */</span></span><br><span class="line"><span class="selector-tag">html</span> &#123; <span class="attribute">font</span>: menu; &#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123; <span class="attribute">font</span>: small-caption; &#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span> &#123; <span class="attribute">font</span>: status-bar; &#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="真正了解-font-face规则"><a href="#真正了解-font-face规则" class="headerlink" title="真正了解@font face规则"></a>真正了解@font face规则</h4><blockquote><p>很多人只要一提到@font face规则，心中就会不由自主“哦”地一声：“这个我知道，可以用来生成自定义字符小图标！”话是没错，问题在于很多人以为生成字符小图标就是@font face规则的全部，实际上这只是其功能之一，一旦真正了解@font face规则，你会发现，@font face规则可以做的事情其实非常多。</p></blockquote><p><strong>@font face的本质是变量</strong></p><blockquote><p>虽然说CSS3新世界中才出现真正意义上的变量var，但实际上，在CSS世界中已经出现了本质上就是变量的东西，@font face规则就是其中之一。@font face本质上就是一个定义字体或字体集的变量，这个变量不仅仅是简单地自定义字体，还包括字体重命名、默认字体样式设置等。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;example&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">example.ttf</span>);</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    unicode-range: U+<span class="number">0025</span>-<span class="number">00</span>FF;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p><strong>font-family</strong></p><p> 这里的 font-family 可以看成是一个字体变量，名称可以随意设置 如 “$”</p></li><li><p><strong>src</strong></p><p> src表示引入的字体资源可以是系统字体，也可以是外链字体。如果是使用系统安装字体，则使用local()【IE9以上支持】功能符；如果是使用外链字体，则使用url()功能符</p><p> 示例：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: ICON;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;icon.eot&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;eot&#x27;</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;icon.eot?#iefix&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embeded-opentype&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.ttf&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;typetrue&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.svg#icon&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;svg&#x27;</span>);</span><br><span class="line">    <span class="attribute">font-weight</span>: normal;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>出现的格式</strong></p><p> • svg格式是为了兼容iOS 4.1及其之前的版本，考虑到现如今iOS的版本数已经翻了一番，所以svg格式的兼容代码大可舍弃。</p><p> • eot格式是IE私有的。注意，目前所有版本的IE浏览器都支持eot格式，并不是只有IE6～IE8支持。只是，IE6～IE8仅支持eot这一种字体格式。</p><p> • woff是web open font format几个词的首字母简写，是专门为Web开发而设计的字体格式，显然是优先使用的字体格式，其字体尺寸更小，加载更快。Android 4.4开始全面支持。</p><p> • woff2是比woff尺寸更小的字体，小得非常明显。因此，Web开发第一首选字体就是woff2，只是此字体目前仅Chrome和Firefox支持得比较好。</p><p> • ttf格式作为系统安装字体比较多，Web开发也能用，就是尺寸大了点儿，优点在于老版本Android也支持。</p><p> <strong>综合上面的分析，我们可以得到如下的结论。</strong></p><blockquote><p>（1）svg格式果断舍弃。</p><p>（2）如果无须兼容IE8浏览器，eot格式果断舍弃。</p><p>（3）如果无须兼容Android 4.3之前版本手机，ttf格式果断舍弃。</p></blockquote><p> 之所以存在上面的写法，就是因为 <strong>兼容性</strong> </p><p> <strong>#iefix 有什么用？</strong></p><blockquote><p>实际上没啥用，真正有用的其实是前面的问号。是这样的，IE9之前的版本解析有一个严重的问题，当src属性包含多个url()时，会把长长的字符当作一个地址解析而返回404错误。因此把eot格式放在第一位，然后在字体文件url地址后加上问号，这样IE9之前的版本会把问号之后的内容当作url的参数。、</p></blockquote><p> <strong>为什么需要两个src?</strong></p><blockquote><p>如果是原生的IE7和IE8浏览器，第一个src实际上是多余的，为什么这么讲呢？之所以要放上来，很大一部分原因是为了测试工程师。因为现在测试工程师测试低版本的IE浏览器喜欢使用兼容模式，兼容模式的IE和原生同版本的IE的解析是有区别的，其中区别之一就是兼容模式的IE7和IE8不认识问号（?）解决方案，导致第二个src无法识别，不得已才多了第一行的src。</p></blockquote><p> <strong>font-weight:normal和font-style:normal是不是多余的？</strong></p><blockquote><p>如果你没有同字体名的多字体设置，则它就是多余的，至少我在常规项目中删掉这两行CSS没有出现任何异常。</p></blockquote><p> <strong>format()功能符有什么作用，可不可以省略？</strong></p><blockquote><p>我的回答是最好不要省略。format()功能符的作用是让浏览器提前知道字体的格式，以决定是否需要加载这个字体，而不是加载完了之后再自动判断。</p></blockquote><p> 例子：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: ICON;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;icon.eot&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line">        <span class="built_in">url</span>(<span class="string">&#x27;icon.ttf&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这种写法只会加载ttf这一种格式字体，因为浏览器提前知道了文件格式是自己无法识别的</p></blockquote><p> 于是乎最上面那种写法可以优化成：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: ICON;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;icon.eot&#x27;</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;😊&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.woff2&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.woff&#x27;</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>),</span><br><span class="line">     url (<span class="string">&#x27;icon.ttf&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>font-style</strong></p><blockquote><p>在Chrome浏览器下，@font face规则设置font-style:italic可以让文字倾斜，但是这并不是其作用所在。</p></blockquote><p> @font face规则中的font-style和font-weight类似，都是用来设置对应字体样式或字重下该使用什么字体。因为有些字体可能会有专门的斜体字体，注意这个斜体字体并不是让文字的形状倾斜，而是专门设计的倾斜的字体，所以很多细节会跟物理上的请求不一样:</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;I&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;FZYaoti&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;I&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-style</span>: italic;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;FZShuTi&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 制定一个字体，名叫’I’，当文字样式正常的时候，字体表现使用“方正姚体”；当文字设置了font-style:italic的时候，字体表现为“方正舒体”。</p></li><li><p><strong>font-weight</strong></p><blockquote><p>font-weight和font-style类似，只不过它定义了不同字重、使用不同字体</p></blockquote> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;QH&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;HYQihei 40S&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;QH&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">500</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;HYQihei 50S&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;QH&#x27;</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;HYQihei 60S&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 是一个全新的字体，名为’QH’。当字重font-weight为400的时候，使用“汉仪旗黑40S”字重字体；为500的时候，使用“汉仪旗黑50S”字重字体；为600的时候，使用“汉仪旗黑60S”字重字体。</p><p> <a href="https://demo.cssworld.cn/8/5-1.php">借助font-weight实现响应式图标实例页面</a></p></li><li><p><strong>unicode-range</strong></p><p> unicode-range的作用是可以让特定的字符或者特定范围的字符使用指定的字体。例如，“微软雅黑”字体的引号左右间隙不均，方向不明，实在是看着不舒服，此时我们就专门指定这两个引号使用其他字体，CSS代码如下：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: quote;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">local</span>(<span class="string">&#x27;SimSun&#x27;</span>);</span><br><span class="line">    unicode-range: U+<span class="number">201</span>c, U+<span class="number">201</span>d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.font</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: quote, <span class="string">&#x27;Mircorosoft Yahei&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="font-face与字体图标技术"><a href="#font-face与字体图标技术" class="headerlink" title="@font face与字体图标技术"></a>@font face与字体图标技术</h4><blockquote><p>从面向未来的角度讲，字体图标技术的使用会越来越边缘化，因为和SVG图标技术相比，其唯一的优势就是兼容一些老的IE浏览器。等再过几年，IE8等浏览器彻底被淘汰了，我们就没有任何使用字体图标技术的理由了。</p></blockquote><p><strong>字体的本质是什么?</strong></p><blockquote><p>所谓字体，本质上是字符集和图形的一种映射关系</p><p>一个字体文件就好比一个巨型商品房，里面有很多房间，每个房间都有一个唯一的门牌号，然后这些房间就专门用来挂名画。这里的“门牌号”就是“字符集”，“房间里的名画”就是我们的“字体图形”</p><p>举个例子，“家”这个汉字Unicode编码是5BB6，这个5BB6就是“门牌号”，在中文字体中，这个“门牌号”对应的房间里面的画作就长得是“家”这个肉眼所见的字符形状。也就是说，一个字符编码对应一个形状。</p></blockquote><p>现在如果我们通过一定的手段，把挂5BB6这个“门牌号”房间里面的画作改成一个房屋的形状，那岂不是使用这个字体文件的时候，“家”就不是“家”，而是房子了呢？</p><p>字体图标技术就是使用类似的原理实现的，即把通常的字符映射成为另外的图标形状，于是，虽然我们眼睛看到的是个图标，但是实际上它本质上就是一个普通的字符。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: ICON;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">icon.eot</span>);</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">icon.eot?#iefix</span>) <span class="built_in">format</span>(<span class="string">&#x27;embedded-opentype&#x27;</span>),</span><br><span class="line">        <span class="built_in">url</span>(<span class="string">icon.eot.woff2</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff2&#x27;</span>),</span><br><span class="line">        <span class="built_in">url</span>(<span class="string">icon.eot.woff</span>) <span class="built_in">format</span>(<span class="string">&#x27;woff&#x27;</span>);</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: ICON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.icon-microphone</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;\1f3a4&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这里，1f3a4就是一个唯一的“门牌号”，在通常的字体下，其字符展示的是一个斜的麦克风。但是，在ICON这个字体中，1f3a4的图形被映射成了一个正立的麦克风图形。</p></blockquote><p><strong>知道了字体图标技术的原理</strong>，我们就能很好地理解一些渲染现象了。</p><p>（1）因为原始字符和最终的图形表现相差很大，所以当我们的字体文件加载缓慢的时候，可以明显看到字符变图形的过程，这种加载体验是不太友好的，字体内联在CSS文件中可以有效避免这一问题，但往往字体文件体积都比较大，这样处理得不偿失。据我所知，除此之外并没有非常好的解决方法。</p><p>（2）原始的字符x-height和最终的图形x-height往往是不一样的，这会影响内联元素的垂直对齐，因此很容易出现页面高度闪动情况，这种加载体验也是不友好的。</p><p>（3）原始字符的ch宽度，也就是水平占据的宽度和最终的图形也是不一样的，因此很容易出现内联元素水平方向晃动的问题，这种加载体验也是不友好的，为此图标就需要设定具体宽度值</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-family</span>: ICON;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>我可不可以把映射字符直接写在页面中，而不是放在：before伪元素中？</strong></p><blockquote><p>从技术实现的角度来讲这是完全可以的，而且不支持伪元素的IE7等浏览器都支持这样做。但是在实际开发的时候，我并不建议这么做，有两点原因：一是不好维护，如果以后字符映射关系改变，而图标HTML是散布在各个页面中的，那么我们的改动就会很麻烦；二是从语义角度考虑，图标字符往往是不包含任何意义的，应该没有必要让搜索引擎知道，也无须让辅助设备读取，而伪元素恰好有这样的功能，如果内联在HTML中，则反而成了一种干扰。</p></blockquote><h4 id="文本的控制"><a href="#文本的控制" class="headerlink" title="文本的控制"></a>文本的控制</h4><p><strong>text-indent与内联元素缩进</strong></p><blockquote><p>，text-indent就是对文本进行缩进控制。但是这种缩进对内容要求比较高，如果段落掺杂英文、数字或者图片等内容，缩进反而可能会给人以参差不齐的感觉，加上现代Web形式更加多样，text-indent在实际项目中的应用已经脱离了它原本的设计初衷。</p></blockquote><p>首先用得比较多的是text-indent负值隐藏文本内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span> CSS世界 <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.logo &#123;</span><br><span class="line">width: 120px;</span><br><span class="line">background: url(logo.png);</span><br><span class="line">text-indent: -120px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>有些人喜欢设置一个很大的 text-indent 负值：如 -9999em;</p><blockquote><p>我是不建议这么做的。首先，这样做在某些设备下有潜在的性能风险，体现在滚屏的时候会发生卡顿；其次，对于一些智能设备的屏幕阅读软件，如VoiceOver，如果内容缩进在屏幕之外，它是不会读取的，这样就降低了页面的无障碍访问能力。另外，text-indent负值缩进在部分浏览器下会影响元素的outline区域，通常需要再设置overflow:hidden。</p></blockquote><p><strong>如果单看最终的CSS样式效果下面代码是否等同？</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: -<span class="number">120px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.logo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>答案是不等同，</p><p>text-indent的百分比值是相对于当前元素的“包含块”计算的，而不是当前元素。由于text-indent最终作用的是当前元素里的内联盒子，因此很容易让人误以为text-indent的百分比值是相对于当前元素宽度计算的。【补充：Chrome 72改变了百分比计算策略】</p><p><a href="http://demo.cssworld.cn/8/6-1.php">示例</a></p><p><a href="https://demo.cssworld.cn/8/6-2.php">实现百分比居中</a></p><p><strong>最后再说几个你可能不知道的小知识</strong>。</p><blockquote><p>（1）text-indent仅对第一行内联盒子内容有效。</p><p>（2）非替换元素以外的display计算值为inline的内联元素设置text-indent值无效，如果计算值是inline-block/inline-table则会生效。因此，如果父级块状元素设置了text-indent属性值，子inline-block/inline-table需要设置text-indent:0重置。</p><p>（3）<strong>input</strong>标签按钮text-indent值无效。</p><p>（4）<strong>button</strong>标签按钮text-indent值有效，但是存在兼容性差异，IE浏览器理解为单标签，百分比值按照容器计算，而Chrome和Firefox浏览器标签内还有其他Shadow DOM元素，因此百分比值是按照自身的尺寸计算的。</p><p>（5）<strong>input</strong>和<strong>textarea</strong>输入框的text-indent在低版本IE浏览器下有兼容问题。</p></blockquote><p><strong>letter-spacing与字符间距</strong></p><blockquote><p>letter-spacing可以用来控制字符之间的间距，这里说的“字符”包括英文字母、汉字以及空格等。</p></blockquote><p>（1）继承性。</p><p>（2）默认值是normal而不是0。虽然说正常情况下，normal的计算值就是0，但两者还是有差别的，在有些场景下，letter-spacing会调整normal的计算值以实现更好的版面布局。</p><p>（3）支持负值，且值足够大的时候，会让字符形成重叠，甚至反向排列（非IE浏览器)</p><p>（4）和text-indent属性一样，无论值多大或多小，第一行一定会保留至少一个字符。letter-spacing还有一个非常有意思的特性就是，在默认的左对齐情况下，无论值如何设置，第一个字符的位置一定是纹丝不动的。</p><p>（5）支持小数值，即使0.1px也是支持的，但并不总能看到效果，这与屏幕的密度有关。对普通的桌面显示器，设备像素比是1，最小渲染单位是1px，因此，需要至少连续10个字符，才能看到0.1px产生的1px间距变化，如果是9个字符，则不会有效果，这很可能会让人误以为letter-spacing不支持非常小的数值，实际上是支持的。</p><p>（6）暂不支持百分比值。在实际开发的时候，letter-spacing除了控制文字内容排版外，还可以修复一些布局上的问题。例如，清除inline-block列表由于换行符或者空格产生的空白间隙，使我们的布局控制更精准</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: -<span class="number">1em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.list</span> &#123;</span><br><span class="line">    <span class="attribute">letter-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于letter-spacing负值的字体重叠特性，我们还可以利用该属性实现一些文本动效</p><p><a href="http://demo.cssworld.cn/8/6-4.php">字符动效分步示意</a></p><p><strong>word-spacing与单词间距</strong></p><p>word-spacing和letter-spacing名称类似，其特性也有很多共通之处：</p><p>（1）都具有继承性。</p><p>（2）默认值都是normal而不是0。通常情况下，两者表现并无差异。</p><p>（3）都支持负值，都可以让字符重叠，但是对于inline-block和inline-table元素却存在兼容性差异，Chrome浏览器下可以重叠，IE和Firefox浏览器下则再大的负值也不会重叠，因此不适合使用word-spacing来清除空白间隙。</p><p>（4）都支持小数值，如word-spacing:0.5px。</p><p>（5）在目前的CSS2.1规范中，并不支持百分比值，但新的草案中新增了对百分值的支持，是根据相对于字符的“步进宽度”（advance width）计算的。这属于新世界内容，本书不做介绍。</p><p>（6）间隔算法都会受到text-align:justify两端对齐的影响。</p><p>letter-spacing作用于所有字符，但word-spacing仅作用于空格字符。注意，是作用在“空格”上，而不是字面意义上的“单词”。例如，假设有以下CSS和HTML：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.wp &#123;</span><br><span class="line">word-spacing: 20px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;wp&quot;</span>&gt;</span></span><br><span class="line">    我love前端！</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>love虽然是单词，但是没有空格，那么word-spacing 就无效</p><p><strong>如何设置CSS，让多按钮的时候中间自动有合适的间距呢？</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">word-spacing</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在IE6时代，这确实是个非常好的方法，但如今下面的做法可能要更合适些：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span> + <span class="selector-tag">button</span> &#123;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>了解word-break和word-wrap的区别</strong></p><blockquote><p>准确来讲是 了解word-break:break-all和word-wrap:break-word的区别</p></blockquote><p>word-break属性：</p><p>• normal：使用默认的换行规则。</p><p>• break-all：允许任意非CJK（Chinese/Japanese/Korean）文本间的单词断行。</p><p>• keep-all：不允许CJK文本中的单词换行，只能在半角空格或连字符处换行。非CJK文本的行为实际上和normal一致。【此属性兼容性不咋好】</p><p>word-wrap属性：</p><p>• normal：就是大家平常见得最多的正常的换行规则。</p><p>• break-word：一行单词中实在没有其他靠谱的换行点的时候换行。</p><blockquote><p>它之前由于和word-break长得太像，难免会让人记不住或搞混，于是在CSS3规范里，这个属性的名称被修改了，叫作overflow-wrap 【兼容性可能不佳】</p></blockquote><p><a href="http://demo.cssworld.cn/8/6-5.php">那两者的区别是什么呢？</a></p><blockquote><p>word-break:break-all的作用是所有的都换行，毫不留情，一点儿空隙都不放过，而word-wrap:break-word则带有怜悯之心，如果这一行文字有可以换行的点，如空格或CJK（中文/日文/韩文）之类的，就不打英文单词或字符的主意了，在这些换行点换行，至于对不对齐、好不好看则不关心，因此，很容易出现一片一片空白区域的情况。</p></blockquote><p><strong>white-space与换行和空格的控制</strong></p><blockquote><p>white-space属性声明了如何处理元素内的空白字符，这类空白字符包括Space（空格）键、Enter（回车）键、Tab（制表符）键产生的空白。因此，white-space可以决定图文内容是否在一行显示（回车空格是否生效），是否显示大段连续空白（空格是否生效）等。</p></blockquote><p>属性值:</p><p>• normal：合并空白字符和换行符。</p><p>• pre：空白字符不合并，并且内容只在有换行符的地方换行。</p><p>• nowrap：该值和normal一样会合并空白字符，但不允许文本环绕。</p><p>• pre-wrap：空白字符不合并，并且内容只在有换行符的地方换行，同时允许文本环绕。</p><p>• pre-line：合并空白字符，但只在有换行符的地方换行，允许文本环绕。</p><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221019154123966.png" alt="image-20221019154123966"></p><p>**text-align与元素对齐 **</p><blockquote><p>因为CSS是母语为英语的人发明的，所以在早期的时候，对中文或其他东亚语言并没有考虑得那么细致，从text-align:justify的表现上就可以窥见一斑。例如，IE浏览器（至少到IE11）到目前为止使用text-align:justify都无法让中文两端对齐，而Chrome、Firefox和Safari等浏览器都是可以的。</p><p>不过，好在IE有一个私有的CSS属性text-justify（目前也写入规范草案了）可以实现中文两端对齐的。</p></blockquote><p>通过下面的CSS代码组合就可以实现全部浏览器都兼容的中文两端对齐</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.justify</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: justify;</span><br><span class="line">    <span class="attribute">text-justify</span>: inter-ideograph;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，属性值inter-ideograph的字面意思是“国际象形文字”，非官方非标准，可以放心使用，不用担心以后其他浏览器也支持之后出现新旧渲染不一致的问题。</p><p><a href="http://demo.cssworld.cn/8/6-7.php">中文的两端对齐效果实现实例页面</a></p><p>CSS世界中有一个text-align-last属性，可以规定最后一行内联内容的排列方式，这是从IE浏览器过来的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.justify</span> &#123;</span><br><span class="line">    <span class="attribute">text-align-last</span>: justify;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>好一个及时雨！然而可惜，Safari浏览器，包括Safari 10，都不支持，以至于移动端和桌面端都不能使用，甚是遗憾。</p></blockquote><p><a href="http://demo.cssworld.cn/8/6-8.php">两端对齐案例</a></p><p><strong>如何解决text-decoration下划线和文本重叠的问题</strong></p><blockquote><p>如果对细节要求较高，就会发现，下划线经常会和中文文字的下边缘粘连在一起，英文的话甚至直接穿过，越看越有心痛的感觉。</p></blockquote><p>最佳实践就是使用 border 模拟下划线。另外，使用border-bottom模拟下划线的时候，border-color最好省略，这样就会使用文字的color颜色作为边框色，鼠标hover的时候，下划线会自动和文字一起变色</p><p>text-decoration还支持同时设置多个属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline overline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>一本万利的text-transform字符大小写</strong></p><blockquote><p>text-transform也是为英文字符设计的，要么全大写text-transform:uppercase，要么全小写text-transform:lowercase，似乎没什么值得挖掘的，但有一些场景使用它却会有一本万利的效果。</p></blockquote><ol><li><p>身份证输入</p><p> 我国的身份证最后一位有可能是字母X，且各种场合都是指定必须大写。如果我们给输入身份证的 <strong>input</strong> 输入框设置</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">text-transform</span>: uppercase;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 就算我们敲小写x,出现的也是大写</p></li><li><p>验证码输入</p><p> 如果验证码不区分大小写，那么设置全转大写起步爽歪歪</p></li></ol><h4 id="first-letter-first-line伪元素"><a href="#first-letter-first-line伪元素" class="headerlink" title="first-letter/:first-line伪元素"></a><strong>first-letter/:first-line伪元素</strong></h4><blockquote><p>很多年前，Chrome浏览器和IE9浏览器还未出现，那时候first-letter叫伪类选择器，写法是前面加一个冒号，如：first-letter。那时候的语义要更直白一些，选择第一个字符，然后设置一些样式。后来，伪类和伪元素被划分得更加明确和规范了，::after、::before、::backdrop、::first-letter、::first-line、::selection等是伪元素，:active、:focus、:checked等被称为伪类，这就导致：:first-letter的语义发生了一些变化—首字符作为元素的假想子元素。</p></blockquote><p>::first-letter<strong>伪元素生效的前提</strong></p><blockquote><p>首先，元素的display计算值必须是block、inline-block、list-item、table-cell或者table-caption，其他所有display计算值都没有用，包括display:table和display:flex等。</p></blockquote><p><strong>此外，不是所有的字符都能单独作为：:first-letter伪元素存在的。什么意思呢？我们看一个简单的例子，CSS和HTML代码如下：</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p:first-letter &#123; color: silver; &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>？？？？？？？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>按照我们的设想，第一个问号是银色，但实际上全部都是</p><blockquote><p>为什么呢？这是因为常见的标点符号、各类括号和引号在：:first-letter伪元素眼中全部都是“辅助类”字符，有点儿买东西送赠品的感觉，但是赠品本身却不能购买，这里的问号“? ”就属于赠品</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p:first-letter &#123; color: silver; &#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>？？？？？？？辅助<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这次我们发现，”？？？？？？？辅” 变成了银色。这就是<strong>赠品</strong>的表现</p><blockquote><p>有人可能会有疑问：那到底哪些字符属于“赠品”，哪些属于“商品”呢？我特意做了测试，总结下来就是，“赠品字符”包括·@#%&amp;＊()（）[]【】{}::”””; ; ‘’’》《, , .。? ? ! ! …＊、/\。</p><p>正常情况下可以直接作为伪元素的字符就是数字、英文字母、中文、$、一些运算符，以及非常容易被忽视的空格等。这里的“空格”有必要再加粗强调一下，因为它的确是很容易被忽视的一个字符。</p></blockquote><blockquote><p>最后说明一点，字符前面不能有图片或者inline-block/inline-table之类的元素存在</p></blockquote><p>如下：会导致不生效</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p:first-letter &#123;color: silver;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>银色<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>::before伪元素也参与：:first-letter伪元素</strong></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">p:before &#123;</span><br><span class="line">content: &#x27;新闻&#x27;;</span><br><span class="line">&#125;</span><br><span class="line">p:first-letter &#123;</span><br><span class="line">color: silver;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是新闻的标题......<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>结果“新”变成了银色,包括IE8在内的浏览器都是这样的表现。</p><p><strong>::first-letter伪元素可以生效的CSS属性</strong></p><p>• 所有字体相关属性：font、font-style、font-variant、font-weight、font-size、line-height和font-family。</p><p>• 所有背景相关属性：background-color、background-image、background-position、background-repeat、background-size和background-attachment。</p><p>• 所有margin相关属性：margin、margin-top、margin-right、margin-bottom和margin-left。</p><p>• 所有padding相关属性：padding、padding-top、padding-right、padding-bottom和padding-left。</p><p>• 所有border相关属性：缩写的border、border-style、border-color、border-width和普通书写的属性。</p><p>• color属性。</p><p>• text-decoration、text-transform、letter-spacing、word-spacing（合适情境下）、line-height、float和vertical-align（只有当float为none的时候）等属性。</p><blockquote><p>因此，如果妄图使用visibility:hidden或者display:none隐藏：:first-letter伪元素，还是省省吧。</p></blockquote><p><strong>::first-letter伪元素的一些有意思的特点</strong></p><ol><li><p>支持部分display属性值标签嵌套。::first-letter伪元素获取可以跨标签，也就是不仅能选择匿名内联盒子，还能透过层层标签进行选择，但是也有一些限制，并不是所有标签嵌套都是有用的。</p><blockquote><p>display值如果是inline、block、table、table-row、table-caption、table-cell、list-item都是可以的，但是不能是inline-block和inline-table，否则：:first-letter伪元素会直接无效；而display:flex则改变了规则，直接选择了下一行的字符内容。</p></blockquote><p> <a href="http://demo.cssworld.cn/8/7-1.php">眼见为实</a></p></li><li><p>颜色等权重总是多了一层。</p><p> 这是非常容易犯的一个错误，也是CSS世界十大不易理解问题之一。例如，下面这个问题是某同行发邮件问我的，我简单编辑了一下：</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p:first-letter &#123;</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line">p &gt; span &#123;</span><br><span class="line">color: blue!important;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>第一个<span class="tag">&lt;/<span class="name">span</span>&gt;</span>字符看看会不会变红？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 请问“第”这个字符的颜色是什么？</p></li></ol><blockquote><p>基本上，超过95%的前端人员会认为是blue，因为大家都是从CSS选择器权重的角度去考虑的。这个答案本身没问题，但是却忽略了很重要的一点，::first-letter伪元素其实是作为子元素存在的，或者说应当看出是子元素，于是就很好理解了。对于类似color这样的继承属性，子元素的CSS设置一定比父元素的级别要高，哪怕父级使用了重量级的！important，因为子元素会先继承，然后再应用自身设置。因此，上面CSS和HTML代码的最终结果是，第一个字符“第”字的颜色是red，红色！这就是：:first-letter伪元素的另外一个重要特性—颜色等权重总是多了一层。</p></blockquote><p><strong>::first-letter实际应用举例</strong></p><ul><li><p>电商产品经常会有价格，价格前面一般都有一个¥符号，这个符号字体往往会比较特殊，字号也比较大，同时和文字的数值有几像素的距离</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.price:first-letter &#123;</span><br><span class="line">maargin-right: 5px;</span><br><span class="line">font-size: xx-large;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    ￥399</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>故事相对较少的：first-line伪元素</strong></p><blockquote><p>它们长得类似，很多特性也类似。但是相比之下，:first-line的故事要少一些，没有“赠品字符”之类的梗存在。</p></blockquote><p>• :first-line和：first-letter伪元素一样，IE9及以上版本浏览器支持双冒号：:first-line{}写法，IE8浏览器只认识单冒号写法。</p><p>• :first-line和：first-letter伪元素一样，只能作用在块级元素上，也就是display为block、inline-block、list-item、table-cell或者table-caption的元素设置：first-line才有效，table、flex之类都是无效的。</p><p>• :first-line和：first-letter伪元素一样，仅支持部分CSS属性，例如：</p><p>所有字体相关属性；</p><ul><li><p>color属性；</p></li><li><p>所有背景相关属性；</p></li><li><p>text-decoration、text-transfor、letter-spacing、word-spacing、line-height和vertical-align等属性。</p></li></ul><p>• :first-line和：first-letter伪元素一样，color等继承属性的权重总是多了一层，毕竟称为“伪元素”，就好像里面还有个子元素。如果：first-line和：first-letter同时设置颜色，:first-letter级别比：first-line高，即使：first-line写在后面，甚至加！important（如果浏览器支持）也是如此。</p><p>• :first-line和：first-letter伪元素一样，也支持标签嵌套，但是具体细则和：first-letter出入较大，例如，它不支持table相关属性等。</p><p><a href="http://demo.cssworld.cn/8/7-2.php">眼见为实</a></p><blockquote><p>在Chrome 中inline-block 元素会阻断 first-line</p></blockquote><h3 id="元素装饰与美化"><a href="#元素装饰与美化" class="headerlink" title="元素装饰与美化"></a>元素装饰与美化</h3><h4 id="少得可怜的颜色关键字"><a href="#少得可怜的颜色关键字" class="headerlink" title="少得可怜的颜色关键字"></a>少得可怜的颜色关键字</h4><blockquote><p>CSS1的时候只支持16个基本颜色关键字</p><p>CSS2的时候，显然应该要新增一些颜色关键字。或许很多人满怀希望，总以为会有什么惊喜，结果果然很惊喜：居然只加入了一个颜色—橙色orange。</p><p>到了CSS3的时候，以为又会是“雷声大，雨点小”，结果这次却出人意料，一下子增加了100多个颜色关键字</p><p>到了CSS4的时候，以为又会有什么惊人之举，结果又仅增加了一个颜色关键字—rebeccapurple</p><p>[更多](<a href="http://www.zhangxinxu.com/wordpress/">http://www.zhangxinxu.com/wordpress/</a>? p=4859)</p></blockquote><blockquote><p>currentColor变量是个好东西，可以使用当前color计算值，即所谓颜色值。</p><p>IE9+浏览器才支持它。</p></blockquote><h4 id="CSS世界的background很单调"><a href="#CSS世界的background很单调" class="headerlink" title="CSS世界的background很单调"></a>CSS世界的background很单调</h4><blockquote><p>CSS世界中的background大部分有意思的内容都是在CSS3新世界中才出现的，如Multiple backgrounds（多背景）、background-size（背景尺寸）、background-origin（背景初始定位盒子）、background-clip（背景剪切盒子）等。</p></blockquote><p>background相关属性的集合，包括：</p><p>• background-image: none</p><p>• background-position: 0% 0%</p><p>• background-repeat: repeat</p><p>• background-attachment: scroll</p><p>• background-color: transparent</p><p>如果是IE9+浏览器，则还包括：</p><p>• background-size: auto auto</p><p>• background-origin: padding-box</p><p>• background-clip: border-box</p><p><strong>隐藏元素的background-image到底加不加载?</strong></p><blockquote><p>根据我的测试，一个元素如果display计算值为none，在IE浏览器下（IE8～IE11，更高版本不确定）依然会发送图片请求，Firefox浏览器不会，至于Chrome和Safari浏览器则似乎更加智能一点：如果隐藏元素同时又设置了background-image，则图片依然会去加载；如果是父元素的display计算值为none，则背景图不会请求，此时浏览器或许放心地认为这个背景图暂时是不会使用的。</p></blockquote><blockquote><p>如果想用background-image实现鼠标光标经过变换图片的效果（例如，灰色的关闭图片鼠标光标经过变成深色），则务必将这两张图片合并在一张图片上，除了减少请求外，这样做更重要的好处是交互体验更好了。如果图片不合在一起，当鼠标光标经过的时候，就会去请求另外一张图片的地址，如果这个图片没有被缓存，则请求发出去到图片显示是有一段时间的，很容易出现鼠标光标经过关闭图片，结果图片消失的情况，实际上图片不是消失了，而是还在请求的路上。</p></blockquote><p><strong>与众不同的background-position百分比计算方式</strong></p><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221020103129977.png" alt="image-20221020103129977"></p><p>IE8浏览器最多只支持同时出现2个值，从IE9开始支持同时出现3个值或4个值，<strong>作用是指定定位的偏移计算从哪个方位算起</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-position</span>: right <span class="number">40px</span> bottom <span class="number">20px</span>;</span><br></pre></td></tr></table></figure><p>表示距离右边缘40像素，距离底边缘20像素</p><p><strong>position值也支持百分比值</strong></p><p>position值的百分比值有着特殊的计算公式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">position = (容器的宽 - 图片的宽) * percentX</span><br><span class="line"></span><br><span class="line">position = (容器的高 - 图片的高) * percentY</span><br></pre></td></tr></table></figure><p>因此，当background-position:100% 100%时候，实际定位值就是容器尺寸和图片尺寸的差，于是就有了右下角所示的定位效果。</p><p><strong>当我们设置百分比负值时</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-position</span>: -<span class="number">50%</span> -<span class="number">50%</span>;</span><br></pre></td></tr></table></figure><p>结果他的效果类似于</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-position</span>: <span class="number">40px</span> <span class="number">10px</span>;</span><br></pre></td></tr></table></figure><blockquote><p>深受传统百分比定位迷惑的我们可能一时会想不通，明明是个负值百分比定位，怎么会是一个正值效果呢？</p><p>我们套用 <strong>position</strong> 百分比值计算公式，就豁然开朗了！此案例中容器尺寸是160×160，图片尺寸是256×192，图片尺寸大于容器尺寸，所以：</p><p>•（容器的宽度-图片的宽度）×（-50%）的结果是个正值；</p><p>•（容器的高度-图片的高度）×（-50%）的结果也是个正值。</p><p>因此，最终的表现并不是图片定位在容器外，而是定位在容器内。</p></blockquote><p>** background-repeat与渲染性能**</p><blockquote><p>background-repeat支持repeat、repeat-x、repeat-y这几个值，语义清晰，兼容性好，没什么有趣的故事。background-repeat以前用得很多，但如今设计趋势是喜欢扁平和纯色，其使用频率下降明显，反倒是在实现一些复杂纹理或者配合“蝉原则”实现随机背景这些比较新潮的地方见到的比较多。</p></blockquote><p>关于 background-repeat 性能，</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.overlay</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;alpha.png&#x27;</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">75</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>有些人为了追求极致，把 alpha.png 做成了1X1像素大小，，但是遮罩背景出现的时候会有明显的卡顿，体验非常不好。究其原因，就是平铺图片尺寸太小，平铺次数太多，渲染太吃力，其实我们大可把背景图保存成100像素×100像素大小，这样一来，图片尺寸并没有大多少，但是渲染性能却有明显提升。</p></blockquote><p><strong>外强中干的background-attachment:fixed</strong></p><blockquote><p>在CSS世界中，background-attachment支持scroll和fixed两个属性值，其中scroll是默认值，就是平常使用背景图的效果表现；fixed表示背景相对于当前文档视区定位，也就是页面再怎么滚动背景图片位置依旧纹丝不动，稳若泰山。</p><p>听上去，background-attachmen:fixed应该和position:fixed声明一样，是个很厉害的角色才对。但实际上其外强中干，在某些场合它确实很厉害，但是局限太大，没法实用。</p></blockquote><ul><li><p>要实现一个图片局部动态模糊效果</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">256px</span>; hieght: <span class="number">1192px</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">1.jpg</span>);</span><br><span class="line">    <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-class">.drag</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>; <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: inherit;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: grap;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>drag元素的background继承于父元素．box，同样的背景图，同样的background-attachment: fixed锁定，根本就不需要JavaScript动态改变background-position位置，因为元素都是相对于文档视区定位的。这看似美好，却有一个很大的局限性，那就是页面的高度不能超过一屏，因为页面一旦可以滚动，效果就完全被毁掉，背景图立马就显示不全了，因为元素被滚走了，但是背景图还是固定的。</p><p>而绝大多数网页都是可滚动的，这就让background-attachment:fixed只能局限于窗体背景图的使用上。当然，也有不太好的支持方法，就是background-attachment:fixed交互做出一个独立的小页面，然后主页面使用一个小的iframe嵌套。</p><p>IE9及以上版本浏览器新增了一个background- attachment属性值local，难道它就是用来解决上面的“不合乎预期”的现象的？不好意思，你想多了，它们不是一路的。local的作用是，如果．box元素可以滚动，则．box元素的背景图也可以被滚走，默认的scroll值是固定的，和fixed无半点儿关系。</p></blockquote></li></ul><p><strong>background-color背景色永远是最低的</strong></p><blockquote><p>什么意思呢？就是background无论是单背景图还是多背景图，背景色一定是在最底下的位置。</p><p>知道这一特性有什么作用呢？为了及时准确反馈用户的点击行为，我们会在链接或按钮元素上增加：active样式，通常的思路是：active时变换一下背景色，但是这样有一个很大的问题，即每个按钮的背景色都是不一样的，那岂不是要写很多个：active样式？有没有什么整站通用的简单代码呢？当然有。我们可以试试使用背景图片代替背景色</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href]</span><span class="selector-pseudo">:active</span>, <span class="selector-tag">button</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to top, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">05</span>), <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">05</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>因为背景色一定是在最底下的位置，所以这里的background-image一定是覆盖在按钮等元素背景色之上的，不会影响按钮原来的背景色。</p><p>如果是桌面端Web项目，需要兼容IE8和IE9浏览器，我的建议是使用一个同等效果的PNG图片代替，具体代码如下：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-attr">[href]</span><span class="selector-pseudo">:active</span>, <span class="selector-tag">button</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">    <span class="comment">/*IE8,IE9*/</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">xxx</span>);</span><br><span class="line">    <span class="comment">/*IE10+*/</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to top, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">05</span>), <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, .<span class="number">05</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>利用多背景的属性hack小技巧</strong></p><blockquote><p>虽然IE8浏览器并不支持多背景，但是并不表示IE8浏览器和多背景效果无缘。因为IE8浏览器支持：before和：after两个伪元素，所以配合z-index负值，我们可以实现最多3个图片的多背景效果，对绝大部分的需求来说足够了。</p></blockquote><p><strong>IE9浏览器不支持背</strong></p><blockquote><p>IE9浏览器不支持背景渐变，不过，也是有手段可以做兼容的，那就是使用IE私有的渐变滤镜。例如，一个红蓝渐变，可以使用下面的代码：</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">filter</span>: progid: DXImageTransform.Micorosoft.<span class="built_in">gradient</span>(startcolorstr=red, encolorstr=blue, gradientType=<span class="number">1</span>);</span><br></pre></td></tr></table></figure><blockquote><p>这行滤镜代码主要有3个参数，依次是startcolorstr、endcolorstr和gradient Type。其中gradientType=1代表横向渐变，gradientType=0代表纵向淅渐变，startcolorstr代表渐变起始的色彩。除了使用颜色关键字，还可以使用十六进制颜色表示法，如startcolorstr=#FF0000; endcolorstr代表渐变结尾的色彩，也支持十六进制颜色表示法，如endcolorstr=#0000FF。</p></blockquote><blockquote><p>想要渐变半透明怎么办？可以使用IE浏览器的8字符的十六进制颜色表示法，其格式为#AARRGGBB, AA、RR、GG、BB均为十六进制正整数，取值范围为00～FF。RR指定红色值，GG指定绿色值，BB指定蓝色值，AA指定透明度。00表示完全透明，FF表示完全不透明。超出取值范围的值将被恢复为默认值。例如，渐变起始红色可以写成startcolorstr=#FFFF0000。</p></blockquote><p>有些人并不清楚如何将0～1的CSS3标准透明度值转换成十六进制。事实上，可以这样处理：打开浏览器控制台，假设需要转换的透明度是opacity，则可以输入下面的代码再回车：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">256</span>*opacity).<span class="title function_">toString</span>(<span class="number">16</span>);</span><br></pre></td></tr></table></figure><p>综上所述，要想实现一个100%红色到50%透明度蓝色垂直渐变，可以使用如下代码组合：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.gradient</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: progid:DXImageTransform.Micorosoft.<span class="built_in">gradient</span>(startsolorstr=<span class="number">#FFFF0000</span>, endcolorstr=<span class="number">#7F0000FF</span>, gradientType=<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, red, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>, .<span class="number">5</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> <span class="selector-class">.bgcolor</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在IE9浏览器下，rgba半透明和filter渐变会同时起作用，因此使用：root选择器重置了一下。</p><h3 id="元素的显示与隐藏"><a href="#元素的显示与隐藏" class="headerlink" title="元素的显示与隐藏"></a>元素的显示与隐藏</h3><blockquote><p>使用CSS让元素不可见的方法很多，剪裁、定位到屏幕外、明度变化等都是可以的。虽然它们都是肉眼不可见，但背后却在多个维度上都有差别。</p></blockquote><p><strong>总结的一些比较好的隐藏实践。</strong></p><ul><li><p>如果希望元素不可见，同时不占据空间，辅助设备无法访问，同时不渲染，可以使用 <strong>script</strong> 标签隐藏。</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  此时图片是不会有请求的，如果希望在 <strong>script</strong> 标签中再放置其他不渲染的模板内容，可以试试 <strong>textarea</strong> 元素</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/html&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;2.jpg&quot;</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>  图片2.jpg也是不会有请求的。另外， <strong>script</strong>  标签隐藏内容获取使用script.innerHTML, <strong>textarea</strong> 使用textarea.value。</p></li><li><p>如果希望元素不可见，同时不占据空间，辅助设备无法访问，但资源有加载，DOM可访问，则可以直接使用display:none隐藏</p></li><li><p>如果希望元素不可见，同时不占据空间，辅助设备无法访问，但显隐的时候可以有transition淡入淡出效果，则可以使用</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>如果希望元素不可见，不能点击，辅助设备无法访问，但占据空间保留，则可以使用visibility:hidden隐藏</p></li><li><p>如果希望元素不可见，不能点击，不占据空间，但键盘可访问，则可以使用clip剪裁隐藏</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clip</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">clip</span>: <span class="built_in">rect</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.out</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">999em</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>如果希望元素不可见，不能点击，但占据空间，且键盘可访问，则可以试试relative隐藏。例如，如果条件允许，也就是和层叠上下文之间存在设置了背景色的父元素，则也可以使用更友好的z-index负值隐藏。例如：</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.lover</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>如果希望元素不可见，但可以点击，而且不占据空间，则可以使用透明度。</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.opacity</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">Alpha</span>(opcity=<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>如果单纯希望元素看不见，但位置保留，依然可以点可以选，则直接让透明度为0。</p>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.opacity</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">Alpha</span>(opcity=<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>实际开发场景千变万化，上面罗列的实践不足以覆盖全部情形。例如，在标签受限的情况下希望隐藏某文字，可能使用text-indent缩进是最友好的方法。如果希望显示的时候可以加一个transition动画，就可能要使用max-height进行隐藏了</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.hidden</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>在Firefox浏览器下，display:none的元素的background-image图片是不加载的，包括父元素display:none也是如此；如果是Chrome和Safari浏览器，则要分情况，若父元素display:none，图片不加载，若本身背景图所在元素隐藏，则图片依旧会去加载；对IE浏览器而言，无论怎样都会请求图片资源。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.bg1 &#123;</span><br><span class="line">    background: url(1.png);</span><br><span class="line">&#125;</span><br><span class="line">.bg2 &#123;</span><br><span class="line">    background: url(2.png);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hidden</span> <span class="attr">class</span>=<span class="string">&quot;bgl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hidden</span> &gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>我们发现只加载了1.png，因此，在实际开发的时候，如头图轮播切换效果，那些默认需要隐藏的图片作为背景图藏在隐藏元素的子元素上，微小的改动就可以明显提升页面的加载体验，可以说是非常实用的小技巧。</p></blockquote><p>还有一些属性也是天然display:none的。例如，hidden类型的 **input 输入框</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">input</span> type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;<span class="number">1</span>&quot;&gt;</span><br></pre></td></tr></table></figure><p>HTML5中新增了hidden这个布尔属性，可以让元素天生display:none隐藏。例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">hidden</span>&gt;</span></span><br><span class="line">    看不见我</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>IE11以及其他现代浏览器都支持它，因此，如果要兼容桌面端，需要如下CSS设置：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[hidden]</span> &#123;</span><br><span class="line"><span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="visibility与元素的显隐"><a href="#visibility与元素的显隐" class="headerlink" title="visibility与元素的显隐"></a>visibility与元素的显隐</h4><blockquote><p>有一些人简单地认为display:none和visibility:hidden两个隐藏的区别就在于：display:none隐藏后的元素不占据任何空间，而visibility:hidden隐藏的元素空间依旧保留。实际上并没有这么简单，visibility是一个非常有故事的属性。</p></blockquote><ol><li><p>visibility的继承性</p><p> 首先，它最有意思的一个特点就是继承性。父元素设置visibility:hidden，子元素也会看不见，究其原因是继承性，子元素继承了visibility:hidden，但是，如果子元素设置了visibility:visible，则子元素又会显示出来。这个和display隐藏有着质的区别。</p><p> <a href="http://demo.cssworld.cn/10/2-1.php">眼见为实</a></p></li><li><p>visibility与CSS计数器</p><p> visibility:hidden不会影响计数器的计数，这和display:none完全不一样</p><blockquote><p>visibility:hidden虽然让其中一个列表不可见了，但是其计数效果依然在运行。相比之下，设置display:none的列表就完全没有参与计数运算。</p></blockquote></li><li><p>visibility与transition</p><p> 下面的CSS是会让．box元素hover时显示．target子元素，但不会有过渡效果：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-class">.target</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.target</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 但是，下面的CSS语句却可以让．target子元素有淡出的过渡效果：</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &gt; <span class="selector-class">.target</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">25s</span>;</span><br><span class="line">    visibililty: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.target</span> &#123;</span><br><span class="line">    visibililty: visible;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 这是为什么呢？因为CSS3 transition支持的CSS属性中有visibility，但是并没有display。</p><p> hover 列表操作出现下拉，鼠标移入第二行，但因为经过第一行导致第一行出现下拉导致第二行触发不了，这种现象。</p><p> <a href="http://demo.cssworld.cn/10/2-3.php">visibility与内容hover的延时显示实例页面</a></p></li></ol><h3 id="用户界面样式"><a href="#用户界面样式" class="headerlink" title="用户界面样式"></a>用户界面样式</h3><h4 id="和border形似的outline属性"><a href="#和border形似的outline属性" class="headerlink" title="和border形似的outline属性"></a>和border形似的outline属性</h4><blockquote><p>outline表示元素的轮廓，语法和border属性非常类似，分宽度、类型和颜色，支持的关键字和属性值与border属性一模一样</p></blockquote><p>Highlight是系统高亮色，这里用来模拟IE和Firefox浏览器的outline效果相当合适</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:focus</span> + <span class="selector-tag">label</span><span class="selector-class">.btn</span> &#123;</span><br><span class="line"><span class="attribute">outline</span>: <span class="number">1px</span> dotted Hghlight;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">5px</span> auto -webkit-focus-ring-color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>真正的不占据空间的outline及其应用</strong></p><blockquote><p>内联元素的上下padding值似乎不占据任何空间，但是一旦祖先元素overflow计算值不是visible，同时padding值足够大，滚动条就会出现，暴露出“不占据空间”其实是一个假象。但是outline属性确实不占据任何空间，轮廓宽度设置得再宽广，也不会影响任何元素的任何布局，并且outline轮廓是可穿透的。考虑到outline是一个从IE8开始就被支持的CSS属性，这就注定了outline要脱离其设计初衷，在其他方面大显神通，例如，用于实现一些看似棘手的布局效果。</p></blockquote><p><strong>头像裁剪时，只有选择范围清晰，其他区域黑色透明背景</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.crop</span> &#123;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.crop</span> &gt; <span class="selector-class">.crop-area</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>; <span class="attribute">height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">256px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">about:blank</span>);</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to top, transparent, transparent);</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">50</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: move;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-pseudo">:root</span> <span class="selector-class">.crop-area</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>用一句话概括就是使用一个大大的 outline 来实现周围半透明黑色遮罩。因为 outline 宽度设置再大，也不会对布局产生任何影响，至于超出的区域，通过容器overflow:hidden 隐藏就可以了。没错，原理就是这么简单。</p><p><strong>自动填满屏幕剩余空间的应用技巧</strong></p><p>页面内容不足一屏中间高度是由内容撑开的。所以导致底部留白的现象</p><p>如何让底部背景色正好填满剩余屏幕区域呢？目前我知道的最好的办法就是巧用outline属性。假设底部HTML代码是这样的：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        Designed <span class="symbol">&amp;amp;</span> Powered by zhangxinxu</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.footer</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.footer</span> &gt; <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#a0b3d6</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">999px</span> solid <span class="number">#a0b3d6</span>;</span><br><span class="line">    <span class="attribute">clip</span>: <span class="built_in">rect</span>(<span class="number">0</span> <span class="number">9999px</span> <span class="number">9999px</span> <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="光标属性cursor"><a href="#光标属性cursor" class="headerlink" title="光标属性cursor"></a>光标属性cursor</h4><blockquote><p>cursor属性值几乎可以认为是当下支持的关键字属性值最多的CSS属性，没有之一。</p></blockquote><p>面就是按照功能特性对其进行的分类以及具体解释描述。</p><ol><li><p>常规</p><ul><li><p>cursor:auto:cursor默认值。</p><blockquote><p>auto表示光标形状根据内容类别浏览器自动进行处理。例如，输入框里面光标表现为cursor:text，带href属性的链接表现为cursor:pointer，而原生的 <strong>button</strong> 表现为cursor:default等。</p></blockquote></li><li><p>cursor:default：系统默认光标形状</p><blockquote><p>于是，久而久之，大家就约定俗成，所有链接和按钮都使用手形。以至于发展到现在，使用原生的<button>按钮甚至下拉框的时候，都要设置一个cursor:pointer。这种奇怪的发展史真是比小说还精彩</p></blockquote></li><li><p>cursor:none：这个声明非常有意思，可以让光标隐藏不见。</p><blockquote><p>看视频的时候，尤其全屏看视频的时候。此时鼠标一直在界面上晃着，是很碍眼、很难受的。一般可以这么处理：如果鼠标静止3秒不动，就设置页面或视频元素cursor:none隐藏光标，如果有mousemove行为，再显示即可！</p></blockquote></li></ul></li><li><p>链接和状态</p><ul><li><p>cursor:pointer：光标表现为一只伸出食指的手，类似这样</p></li><li><p>cursor:help：帮助，通常是光标头上带了个问号</p></li><li><p>cursor:progress：表示进行中的意思。从语义上讲，其适合loading处理</p><blockquote><p>有一个场景却非常适合使用cursor:progress，那就是页面加载的时候。如今进行Web开发，没有JavaScript几乎寸步难行，而JavaScript加载完毕是需要一定时间的，网络不好的时候，这个加载时间延迟可能会非常明显，于是用户就会遇到明明界面已经呈现了，但是点击“展开更多”按钮却没有任何反应，原因就是JavaScript还没有完全加载完毕。此时就非常适合cursor:progress出马了，我们默认在<body>标签上设置：</p></blockquote>  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: progreess;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  js加载完毕可再设置为 auto</p></li><li><p> cursor:wait：我们先看看光标形状，可能是[插图]这样的转圈圈，或者是沙漏或者是表，总之和电脑死机时候的光标是一样的。</p></li><li><p>cursor:context-menu:cursor:context-menu兼容性比较复杂，Mac OS X和Linux系统下的Chrome和Firefox浏览器是支持的，但是Windows系统下的Chrome和Firefox浏览器却不支持。</p></li></ul></li><li><p>选择</p><ul><li>cursor:text：潜台词是文字可被选中，形状类似。默认文本字符或者可输入的单复选框的光标就表现成这样，因为文字可以被选中；反过来，如果文字是不能被选中的，光标就不应该是cursor:text。</li><li>cursor:vertical-text：潜台词是文字可以垂直选中，形状类似 |——|</li><li>cursor:crosshair：十字光标</li><li>cursor:cell:cursor:cell中的cell和display:table-cell中的cell其实可以看成是同一个东西，也就是单元格</li></ul></li><li><p>拖拽</p><ul><li>cursor:move：光标变成cursor:move，往往就意味着当前元素是可以移动的</li><li>cursor:copy：光标变成cursor:copy，往往就意味着当前元素是可以被复制的</li><li>cursor:alias：光标变成cursor:copy，往往就意味着当前元素是可以创建别名或者快捷方式的</li><li>cursor:no-drop：光标变成cursor:copy，往往就意味着当前元素放开到当前位置是不允许的</li><li>cursor:not-allowed：光标变成cursor:not-allowed，往往就意味着当前行为是禁止的，形状类似 🚫</li></ul></li><li><p>滚动</p><ul><li>cursor:all-scroll：表示上下左右都可以滚动，但有一个很糟糕的问题：Windows系统下光标表现和cursor:move一样。再考虑到本身作用场景局限，我觉得可以忽略此声明。</li></ul></li><li><p>拉伸</p><ul><li>cursor:col-resize：光标形状类似 &lt;-||-&gt; 它适用于移动垂直线条</li><li>cursor:row-resize：光标形状类似 上面的旋转90° 。它适用于移动水平线条</li><li>单向拉伸：总共8个方位8个不同的关键字属性值</li><li>双向拉伸：总共4个对立方位组合</li></ul></li><li><p>缩放</p><ul><li>cursor:zoom-in：光标形似放大镜</li><li>cursor:zoom-out：光标形似缩小镜</li></ul></li><li><p>抓取</p><ul><li>cursor:grab：光标是一个五指张开的手</li><li>cursor:grabbing：光标是一个五指收起的手</li></ul></li></ol><p><strong>自定义光标</strong></p><blockquote><p>从IE6开始，我们就可以自定义网页中的光标样式，因此，对于cursor属性，兼容性都不是问题。例如，IE8不支持上面提到的cursor:none，就是通过自定义手段实现兼容的</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cur-none</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">transparent.cur</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对于Chrome等浏览器，可以直接使用PNG图片作为光标，但是IE浏览器不行。IE仅支持专门的．cur格式的光标文件.</p><h3 id="流向的改变"><a href="#流向的改变" class="headerlink" title="流向的改变"></a>流向的改变</h3><blockquote><p>至少在我接触的这么多项目里，没有见到有谁使用过CSS的direction属性。为什么呢？是因为direction长得丑吗？虽然说direction确实其貌不扬，但是CSS世界不会有这样的歧视。那是因为兼容性吗？更不是了，direction早在IE6时代就已经被支持了</p><p>那究竟是什么原因呢？</p><p>我认为多半是因为宣传不够。要是所有前端人能够人手一本这本书，自然就不会有这样的问题了，因为本书热衷于挖掘CSS属性的潜力，可以让那些默默无闻但有能力的CSS属性熠熠生辉、焕发青春。direction就是一个典型，该属性简单且好记，属性值少，兼容性好，关键时候省心省力。</p></blockquote><h4 id="direction简介"><a href="#direction简介" class="headerlink" title="direction简介"></a><strong>direction简介</strong></h4><p>基本上只要关心这两个属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">direction</span>: ltr;// 左到右</span><br><span class="line"><span class="attribute">direction</span>: rtl// 右到左</span><br></pre></td></tr></table></figure><p>direction属性默认有这么一个特性，即可以改变替换元素或者inline-block/inline-table元素的水平呈现顺序</p><p><a href="https://demo.cssworld.cn/12/1-1.php">举个栗子</a></p><p>通常，我们让单行文字溢出用点显示，这个点通常都是在右边的，省略的都是最后的文字，配合direction属性，我们可以让这个点打在开头，让前面的文字省略</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.ell &#123;</span><br><span class="line">width: 240px;</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">    text-overflow: ellipsis;</span><br><span class="line">    text-ovverflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span> <span class="attr">class</span>=<span class="string">&quot;ell&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;ltr&quot;</span>&gt;</span></span><br><span class="line">    开头，中间，结束</span><br><span class="line"><span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span> <span class="attr">class</span>=<span class="string">&quot;ell&quot;</span> <span class="attr">dir</span>=<span class="string">&quot;rtl&quot;</span>&gt;</span></span><br><span class="line">    开头，中间，结束</span><br><span class="line"><span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://demo.cssworld.cn/12/1-2.php">示例</a></p><p>direction属性还可以轻松改变表格中列的呈现顺序,将表头位置反向</p><p>directionL:rtl还可以让text-justify两端对齐元素，最后一行落单的元素右对齐显示</p><p><a href="https://demo.cssworld.cn/12/1-3.php">示例</a></p><p><strong>direction的黄金搭档unicode-bidi</strong></p><blockquote><p>direction属性似乎只能改变图片或者按钮的呈现顺序，但对纯字符内容（尤其中文）好像并没有什么效果，但实际上，我们也是可以指定中文每个字符都反向呈现的，方法就是借助direction的搭档属性unicode-bidi。</p></blockquote><blockquote><p>unicode-bidi</p><p>中文和英文夹杂，或者阿拉伯文和英文夹杂，此时就会出现文本阅读方向不一样的情况，阿拉伯文是从右往左读，英文是从左往右，而这种混合方向同时出现的现象就称为“双向性”，因此unicode-bidi作用就是明确字符出现“双向性”时应当有的表现。</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">unicode-bidi</span>: normal</span><br><span class="line">unicode-bidi: embed</span><br><span class="line">unicode-bidi: bidi-override</span><br></pre></td></tr></table></figure><ul><li>normal：正常排列。假设设置了direction:rtl，则图片、按钮以及问号、加号之类的字符会从右往左显示，但是中文、英文字符还是从左往右显示。</li><li>embed:embed属性值要想起作用，只能作用在内联元素上。在通常情况下，embed属性值的表现和normal是一样的，导致很多人不明白embed到底和normal有什么区别。其实它们的区别很简单，embed属性值的字符排序是独立内嵌的，不受外部影响  <a href="https://demo.cssworld.cn/12/1-4.php">举个栗子</a></li><li>bidi-override：顾名思义，bidi-override就是“重写双向排序规则”，通常样式表现为所有的字符都按照统一的direction顺序排列，例如，若设置direction:rtl，则所有字符都会从右往左反向排列，效果强烈。</li></ul><blockquote><p>实际上我们无须设置unicode-bidi:bidi-override以及direction属性，直接在元素前后分别插入U+202E字符和U+202C字符（可缺省）也可以实现字符反向排列效果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="symbol">&amp;#x202E;</span>123456789</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></blockquote><h4 id="改变CSS世界纵横规则的writing-mode"><a href="#改变CSS世界纵横规则的writing-mode" class="headerlink" title="改变CSS世界纵横规则的writing-mode"></a>改变CSS世界纵横规则的writing-mode</h4><blockquote><p>writing-mode之所以给人“生僻”的感觉，是有原因的。实际上writing-mode这个CSS属性很早就诞生了，IE5.5浏览器就已经支持它了。那就奇怪了！writing-mode既然这么厉害，出现的时间早、资格老，为什么一直沉寂了差不多20年呢？那是因为在很长一段时间里，Firefox、Chrome这些现代浏览器都不支持writing-mode, writing-mode基本上就是IE浏览器的私有产物。很多人对IE一直没什么好感，对吧？由此及彼，自然对writing-mode也不待见。</p></blockquote><blockquote><p>和float属性有些类似，writing-mode原本是为控制内联元素的显示而设计的（即所谓的文本布局）。因为在亚洲，尤其像中国这样的东亚国家，存在文字的排版不是水平而是垂直的情况，如中国的古诗文.和float属性有些类似，writing-mode原本是为控制内联元素的显示而设计的（即所谓的文本布局）。因为在亚洲，尤其像中国这样的东亚国家，存在文字的排版不是水平而是垂直的情况，如中国的古诗文</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*关键字值*/</span></span><br><span class="line"><span class="attribute">writing-mode</span>: horizontal-tb;// 水平方向</span><br><span class="line"><span class="attribute">writing-mode</span>: horizontal-rl;// 垂直方向</span><br><span class="line"><span class="attribute">writing-mode</span>: horizontal-lr;// 垂直方向</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20221020173039576.png" alt="image-20221020173039576"></p><p>补充说明如下。</p><p>• 相同的writing-mode属性值并不会累加。例如，如果父子元素均设置了writing-mode:tb-rl，只会渲染一次，子元素并不会两次“旋转”。</p><p>• 在IE浏览器下，如果一个自身具有布局的元素（不是纯文本之类元素）writing-mode属性值和父元素不同，那么当子元素的布局流变化的时候，其父元素坐标系统的可用空间会被充分利用。这段文字太过术语化，我解释一下就是：在IE浏览器下，当布局元素从水平变成垂直的时候（举个例子），你就想象为元素在垂直方向是100%自适应父元素高度的。因此，IE浏览器下（不包括Edge 13及以上版本），元素vertical流的时候你会发现高度高得吓人，布局和其他现代浏览器不一样，正是这个原因。</p><p>• 虽然Chrome和Opera认识tb-rl等老的IE属性值，但也仅仅是认识而已，并没有任何实际效果！</p><p><strong>writing-mode不经意改变了哪些规则</strong></p><blockquote><p>writing-mode将页面默认的水平流改成了垂直流，颠覆了我们以往的很多认知，基于原本水平方向才适用的规则全部都可以在垂直方向适用！</p></blockquote><p><a href="http://demo.cssworld.cn/12/2-1.php">水平方向margin合并</a></p><p><a href="http://demo.cssworld.cn/12/2-2.php">普通块元素可以使用margin:auto实现垂直居中</a></p><p><a href="http://demo.cssworld.cn/12/2-3.php">writing-mode下块元素垂直居中</a></p><p><a href="http://demo.cssworld.cn/12/2-5.php">使用text-indent实现文字下沉效果</a></p><p><a href="http://demo.cssworld.cn/12/2-6.php">我们要实现小图标的旋转效果是很麻烦的，因</a></p><blockquote><p>writing-mode和direction的关系writing-mode、direction和unicode-bidi是CSS世界中三大可以改变文本布局流向的属性，其中direction和unicode-bidi属于近亲，经常一起使用，也是仅有的两个不受CSS3的all属性影响的CSS属性，基本上就是和内联元素一起使用。它貌似是为阿拉伯文字设计的。</p><p>乍一看，writing-mode似乎包含了direction和unicode-bidi的某些功能和行为，例如，vertical-rl的rl和direction的rtl值有相似之处，都是从右往左。然而，实际上两者是没有交集的。因为vertical-rl此时的文档流为垂直方向，rl表示水平方向，此时再设置direction:rtl，实际上值rtl改变的是垂直方向的内联元素的文本方向，一横一纵，没有交集。而且writing-mode可以对块状元素产生影响，直接改变了CSS世界的纵横规则，要比direction强大得多。它貌似是为东亚文字设计的。</p><p>然而，CSS的奇妙之处就在于：某些特性当初可能就是为某些图文排版设计的，但是我们可以利用它带来的特性发挥自己的创造力，实现其他很多意想不到的效果。因此，上面出现的“三剑客”都是非常好的资源。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;本章内容来自于《css的世界》-张鑫旭，类似于读书笔记吧。主要介绍css2.1的语法。本书主要用于进阶学习，不适用于初学者，书中也默认忽略一些基础的知识.&lt;/p&gt;
&lt;p&gt;CSS2.1中的CSS属性的设计初衷是展示图文&lt;/p&gt;
&lt;h3 id=&quot;css-的世界&quot;&gt;&lt;a href=&quot;#css-的世界&quot; class=&quot;headerlink&quot; title=&quot;css 的世界&quot;&gt;&lt;/a&gt;css 的世界&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;已操作系统划分世界，不同的操作系统就是平行世界。每种浏览器就是一个王国。&lt;/p&gt;
&lt;p&gt;在CSS世界中，HTML是魔法石，选择器就是选择法器，CSS属性就是魔法师，CSS各种属性值就是魔法师的魔法技能，浏览器就是他们所在的“王国”，“王国”会不断更新法律法规（版本升级），决定是否允许使用新的魔法石（HTML5新标签新属性），是否允许新的魔法师入“国籍”（CSS3新属性），或者允许魔法师使用某些新技能（CSS新的属性值），以及是否舍弃某些魔法技能（如display:run-in）；操作系统就是他们所在的世界，不同的操作系统代表不同的平行世界，所以，CSS世界有这么几个比较大的平行世界，即Windows世界、OS X世界以及移动端的iOS世界和Android世界。不同世界的浏览器王国的命运不一样，例如，在OS X世界中，IE王国是不存在的，而Safari王国却异常强大，但在Windows世界中，Safari王国却异常落寞。以上这一切就构成了完整的CSS世界的“世界观”。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;专业术语&quot;&gt;&lt;a href=&quot;#专业术语&quot; class=&quot;headerlink&quot; title=&quot;专业术语&quot;&gt;&lt;/a&gt;专业术语&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;属性&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关键字&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;变量&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;长度单位&lt;/p&gt;
&lt;p&gt; 时间单位（如s、ms），还有角度单位（如deg、rad等）&lt;/p&gt;
&lt;p&gt; 相对长度单位：如em,rem(相对字体),vh,vw,vmin,vmax(相对视区)&lt;/p&gt;
&lt;p&gt; 绝对长度单位：px&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;功能符&lt;/p&gt;
&lt;p&gt; 值以函数的形式指定（就是被括号括起来的那种），主要用来表示颜色（rgba和hsla）、背景图片地址（url）、元素属性值、计算（calc）和过渡效果等，如rgba(0,0,0, .5)、url(‘css-world.png’)、attr(‘href’)和scale(-1)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;属性值&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;声明&lt;/p&gt;
&lt;p&gt; 属性名加上属性值就是声明&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;声明块&lt;/p&gt;
&lt;p&gt; 就是选择器 {} 区域&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;规则或规则集&lt;/p&gt;
&lt;p&gt;选择器后面的声明块就是一个规则集&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;div&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ... 规则集&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;选择器&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;关系选择器&lt;/p&gt;
&lt;p&gt;常见的符号有空格、&amp;gt;、～，还有+等，这些都是非常常用的选择器。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;@规则&lt;/p&gt;
&lt;p&gt;@规则指的是以@字符开始的一些规则，像@media、@font-face、@page或者@support，诸如此类&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="htmlcss" scheme="https://wyf195075595.github.io/categories/htmlcss/"/>
    
    
    <category term="CSS" scheme="https://wyf195075595.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://wyf195075595.github.io/2022/10/18/computer/%E7%94%B5%E8%84%91%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <id>https://wyf195075595.github.io/2022/10/18/computer/%E7%94%B5%E8%84%91%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</id>
    <published>2022-10-18T10:04:46.662Z</published>
    <updated>2022-10-18T10:09:14.225Z</updated>
    
    <content type="html"><![CDATA[<p>微软商店提示无法加载该页面</p><blockquote><p><a href="https://blog.csdn.net/xueyuan2016/article/details/125754410">参考</a></p><p><strong>1、代理服务器</strong>的设置问题</p><p>设置 <strong>Internet选项 -连接-局域网设置-取消勾选代理服务器</strong></p><p>2、TLS 版本过低</p><p>Internet选项-高级-勾选 tls 1.2,1.3</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;微软商店提示无法加载该页面&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/xueyuan2016/article/details/125754410&quot;&gt;参考&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1、代理服务器&lt;/st</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>插件合集</title>
    <link href="https://wyf195075595.github.io/2022/09/23/programming/vue/plugins/"/>
    <id>https://wyf195075595.github.io/2022/09/23/programming/vue/plugins/</id>
    <published>2022-09-23T00:23:10.000Z</published>
    <updated>2022-09-23T12:08:17.319Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1、VueUse"><a href="#1、VueUse" class="headerlink" title="1、VueUse"></a>1、VueUse</h3><blockquote><p>​    VueUse 是 <strong>Anthony Fu  大佬</strong>的一个开源项目，它为Vue的开发者提供了大量用于 Vue2 和Vue3 的基本 <strong>Composition API</strong> 实用工具函数。</p><p>它有几十个用于常见开发人员用例的解决方案，如跟踪<code>ref</code>更改，检测元素可见性，简化常见Vue模式，键盘/鼠标输入等。 这是真正节省开发时间的好方法，因为我们不必自己亲手添加所有这些标准功能，拿来主义，用就对了(再次感谢大佬的付出)。</p></blockquote><span id="more"></span><blockquote><p>我喜欢VueUse库，因为它在决定提供哪些实用工具时真正把开发者放在第一位，而且它是一个维护良好的库，因为它与Vue的当前版本保持同步。</p><ul><li><p>Animation(动画) - 包含易于使用的过渡、超时和计时功能</p></li><li><p>Browser (浏览器) - 可以用于不同的屏幕控件、剪贴板、首选项等等</p></li><li><p>Component (组件) - 为不同的组件方法提供简写</p></li><li><p>Sensors (传感器)- 用来监听不同的DOM事件、输入事件和网络事件</p></li><li><p>State (状态) - 管理用户状态（全局，本地存储，会话存储）</p></li><li><p>Utility （实用方法）–不同的实用方法，如<code>getters</code>、<code>conditionals</code>、<code>ref synchronization</code>等。</p></li><li><p>Watch –更高级的观察器类型，如可暂停的观察器、放弃的观察器和条件观察器</p></li><li><p>其它 - 事件、WebSockets和 Web workers  的不同类型的功能</p><p>  VueUse 的最大特点之一是，它只用一个包就能兼容 Vue2 和 Vue3!</p></li></ul></blockquote><h3 id="2、vue-print-nb"><a href="#2、vue-print-nb" class="headerlink" title="2、vue-print-nb"></a>2、vue-print-nb</h3><blockquote><p>用于代替浏览器的打印</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//安装</span><br><span class="line">npm i vue-print-nb</span><br><span class="line"></span><br><span class="line">// 注册</span><br><span class="line">import Print from &#x27;vue-print-nb&#x27;</span><br><span class="line">Vue.use(Print);</span><br><span class="line"></span><br><span class="line">//使用, 指令方式 id为要打印元素的id</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;end&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">v-print</span>=<span class="string">&quot;printObj&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>打印<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">printObj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">id</span>: <span class="string">&#x27;myPrint&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3、qrcode"><a href="#3、qrcode" class="headerlink" title="3、qrcode"></a>3、qrcode</h3><blockquote><p>用于生成二维码。如果内容是地址URL 就跳转到该地址。如果是其他内容就直接展示内容</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">npm i qrcode</span><br><span class="line"></span><br><span class="line">//局部引入使用</span><br><span class="line">QrCode.toCanvas(dom, info)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 页面使用</span><br><span class="line"> <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;二维码&quot;</span> </span></span><br><span class="line"><span class="tag"> <span class="attr">:visible.sync</span>=<span class="string">&quot;showCodeDialog&quot;</span> </span></span><br><span class="line"><span class="tag">@<span class="attr">opened</span>=<span class="string">&quot;showQrCode&quot;</span> </span></span><br><span class="line"><span class="tag">@<span class="attr">close</span>=<span class="string">&quot;imgUrl=&#x27;&#x27;&quot;</span></span></span><br><span class="line"><span class="tag"> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">ref</span>=<span class="string">&quot;myCanvas&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> &gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"> <span class="title function_">showQrCode</span>(<span class="params">url</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// url存在的情况下 才弹出层</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (url) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">showCodeDialog</span> = <span class="literal">true</span> <span class="comment">// 数据更新了 但是我的弹层会立刻出现吗 ？页面的渲染是异步的！！！！</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 有一个方法可以在上一次数据更新完毕，页面渲染完毕之后</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 此时可以确认已经有ref对象了</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title class_">QrCode</span>.<span class="title function_">toCanvas</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">myCanvas</span>, url) <span class="comment">// 将地址转化成二维码</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 如果转化的二维码后面信息 是一个地址的话 就会跳转到该地址 如果不是地址就会显示内容</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">warning</span>(<span class="string">&#x27;该用户还未上传头像&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="mitt"><a href="#mitt" class="headerlink" title="mitt"></a>mitt</h3><blockquote><p>vue3中取消了 this.$on, this.$off, this.$emit 事件，推荐使用外部插件 mitt库.来实现发布订阅功能</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装</span></span><br><span class="line">npm install mitt</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入</span></span><br><span class="line">mybus.<span class="property">js</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">mitt</span>() <span class="comment">// 此为公用实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">import</span> mybus <span class="keyword">from</span> <span class="string">&#x27;./mybus.js&#x27;</span></span><br><span class="line"></span><br><span class="line">发送</span><br><span class="line">mybus.<span class="title function_">emit</span>(<span class="string">&#x27;自定义事件名称&#x27;</span>,<span class="string">&#x27;数据&#x27;</span>);</span><br><span class="line"></span><br><span class="line">接收</span><br><span class="line">mybus.<span class="title function_">on</span>(<span class="string">&#x27;自定义事件名称&#x27;</span>,<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);<span class="comment">//接收到的数据</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">移除</span><br><span class="line">mybus.<span class="title function_">off</span>(<span class="string">&#x27;自定义事件名称&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="vue-countTo"><a href="#vue-countTo" class="headerlink" title="vue-countTo"></a>vue-countTo</h3><blockquote><p>实现数字滚动效果的无依赖轻量级插件</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">安装</span><br><span class="line">npm i vue-count-to</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">eg</span>:</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">countTo</span> <span class="attr">:startVal</span>=<span class="string">&#x27;startVal&#x27;</span> <span class="attr">:endVal</span>=<span class="string">&#x27;endVal&#x27;</span> <span class="attr">:duration</span>=<span class="string">&#x27;3000&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">countTo</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">import</span> countTo <span class="keyword">from</span> <span class="string">&#x27;vue-count-to&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>: &#123; countTo &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    data () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">startVal</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">endVal</span>: <span class="number">2017</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>文档</p><table><thead><tr><th>Property</th><th>Description</th><th>type</th><th>default</th></tr></thead><tbody><tr><td>startVal</td><td>开始值</td><td>Number</td><td>0</td></tr><tr><td>endVal</td><td>结束值</td><td>Number</td><td>2017</td></tr><tr><td>duration</td><td>持续时间，以毫秒为单位</td><td>Number</td><td>3000</td></tr><tr><td>autoplay</td><td>自动播放</td><td>Boolean</td><td>true</td></tr><tr><td>decimals</td><td>要显示的小数位数</td><td>Number</td><td>0</td></tr><tr><td>decimal</td><td>十进制分割</td><td>String</td><td>.</td></tr><tr><td>separator</td><td>分隔符</td><td>String</td><td>,</td></tr><tr><td>prefix</td><td>前缀</td><td>String</td><td>‘’</td></tr><tr><td>suffix</td><td>后缀</td><td>String</td><td>‘’</td></tr><tr><td>useEasing</td><td>使用缓和功能</td><td>Boolean</td><td>true</td></tr><tr><td>easingFn</td><td>缓和回调</td><td>Function</td><td>—</td></tr></tbody></table><p>** 注意：当autoplay：true时，它将在startVal或endVal更改时自动启动**</p><p>回调钩子函数</p><table><thead><tr><th align="center">Function Name</th><th align="center">Description</th></tr></thead><tbody><tr><td align="center">mountedCallback</td><td align="center">挂载以后返回回调</td></tr><tr><td align="center">start</td><td align="center">开始计数</td></tr><tr><td align="center">pause</td><td align="center">暂停计数</td></tr><tr><td align="center">reset</td><td align="center">重置countTo</td></tr></tbody></table><h3 id="vuex-persist"><a href="#vuex-persist" class="headerlink" title="vuex-persist"></a>vuex-persist</h3><blockquote><p>在vue项目中使用vuex本地持久化能更方便我们对数据的管理，不需要写localStorage或cookie等集合方法,统一用store来管理全局数据。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">eg1</span>:</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> floodPrevention <span class="keyword">from</span> <span class="string">&#x27;@/store/floodPrevention/floodPrevention&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VuexPersistence</span> <span class="keyword">from</span> <span class="string">&#x27;vuex-persist&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">            <span class="attr">depId</span>: <span class="string">&#x27;51515645165&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="title function_">setUserInfo</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">            state.<span class="property">userInfo</span> = &#123;</span><br><span class="line">                ...state.<span class="property">userInfo</span>,</span><br><span class="line">                ...payload</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">actions</span>: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getters</span>: &#123;</span><br><span class="line">        <span class="attr">getUserInfo</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">userInfo</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        floodPrevention</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">VuexPersistence</span>(&#123;</span><br><span class="line">            <span class="attr">storage</span>: <span class="variable language_">window</span>.<span class="property">sessionStorage</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>属性文档</p><table><thead><tr><th align="left">属性</th><th align="left">类型</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">key</td><td align="left">string</td><td align="left">将状态存储在存储中的键。默认: ‘vuex’</td></tr><tr><td align="left">storage</td><td align="left">Storage (Web API)</td><td align="left">可传localStorage, sessionStorage, localforage 或者你自定义的存储对象. 接口必须要有get和set. <strong>默认是: window.localStorage</strong></td></tr><tr><td align="left">saveState</td><td align="left">function (key, state[, storage])</td><td align="left">如果不使用存储，这个自定义函数将保存状态保存为持久性。</td></tr><tr><td align="left">restoreState</td><td align="left">function (key[, storage]) =&gt; state</td><td align="left">如果不使用存储，这个自定义函数处理从存储中检索状态</td></tr><tr><td align="left">reducer</td><td align="left">function (state) =&gt; object</td><td align="left">将状态减少到只需要保存的值。默认情况下，保存整个状态。</td></tr><tr><td align="left">filter</td><td align="left">function (mutation) =&gt; boolean</td><td align="left">突变筛选。看mutation.type并返回true，只有那些你想坚持写被触发。所有突变的默认返回值为true。</td></tr><tr><td align="left">modules</td><td align="left">string[]</td><td align="left">要持久化的模块列表。</td></tr></tbody></table><blockquote><p>同类型插件 vuex-persistedstate 但是21年作者就不维护了</p></blockquote><h3 id="Vuetify"><a href="#Vuetify" class="headerlink" title="Vuetify"></a>Vuetify</h3><blockquote><p>一个前端基于 Material Design 的UI库</p></blockquote><h3 id="NUXTJS"><a href="#NUXTJS" class="headerlink" title="NUXTJS"></a>NUXTJS</h3><blockquote><p>vuejs+nodejs 的最佳实践</p></blockquote><h3 id="vuepress"><a href="#vuepress" class="headerlink" title="vuepress"></a>vuepress</h3><blockquote><p>方便文档编写，支持markdown语法</p></blockquote><h3 id="vue-mate"><a href="#vue-mate" class="headerlink" title="vue-mate"></a>vue-mate</h3><blockquote><p>基于vue2.0插件，用于管理html head标签，支持ssr. 头部信息双向绑定便于管理</p></blockquote><h3 id="vue-charts-js"><a href="#vue-charts-js" class="headerlink" title="vue-charts .js"></a>vue-charts .js</h3><blockquote><p>vue 图表</p></blockquote><h3 id="vue-grid-layout"><a href="#vue-grid-layout" class="headerlink" title="vue grid layout"></a>vue grid layout</h3><blockquote><p>通用vuejs栅格布局系统<br>1、可拖拽<br>2、调整大小<br>3、可序列化，还原布局<br>4、自动化 RTL 支持<br>5、支持响应式</p></blockquote><h3 id="vue-draggable"><a href="#vue-draggable" class="headerlink" title="vue draggable"></a>vue draggable</h3><blockquote><p>优秀的vue拖拽组件</p></blockquote><h3 id="vee-validate"><a href="#vee-validate" class="headerlink" title="vee validate"></a>vee validate</h3><blockquote><p>数据类型验证</p></blockquote><h3 id="vue-Toastification"><a href="#vue-Toastification" class="headerlink" title="vue Toastification"></a>vue Toastification</h3><blockquote><p>轻量级通知组件</p></blockquote><h3 id="vue-Tour"><a href="#vue-Tour" class="headerlink" title="vue Tour"></a>vue Tour</h3><blockquote><p>轻巧简单的可自定义新手指引插件</p></blockquote><h3 id="Trois-语法为three-vue3库"><a href="#Trois-语法为three-vue3库" class="headerlink" title="Trois (语法为three) vue3库"></a>Trois (语法为three) vue3库</h3><h3 id="vue-presistedstate"><a href="#vue-presistedstate" class="headerlink" title="vue-presistedstate"></a>vue-presistedstate</h3><blockquote><p>在页面重新加载之间保持并补充您的<a href="https://vuex.vuejs.org/">Vuex</a>状态。此项目已经不维护了</p></blockquote><p>用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&quot;vuex-persistedstate&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">createPersistedState</span>()],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Vux 模块示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* module.js */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> dataStore = &#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">data</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* store.js */</span></span><br><span class="line"><span class="keyword">import</span> &#123; dataStore &#125; <span class="keyword">from</span> <span class="string">&#x27;./module&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dataState = <span class="title function_">createPersistedState</span>(&#123;</span><br><span class="line">  <span class="attr">paths</span>: [<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    dataStore</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [dataState]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><blockquote><p>ajax 请求工具，<a href="http://www.axios-js.com/zh-cn/docs/#axios-create-config">看文档</a></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HttpRequest</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">baseURL</span> = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;development&#x27;</span>? <span class="string">&#x27;https://www.fastmock.site&#x27;</span>: <span class="string">&#x27;https://www.fastmock.site&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">timeout</span> = <span class="number">15000</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">queue</span> = <span class="number">0</span> <span class="comment">// 请求队列</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span> = []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">setInterceptor</span>(<span class="params">instance, url</span>) &#123;</span><br><span class="line">        instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config</span>)=&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 开启 loading</span></span><br><span class="line">            <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">queue</span>) &#123;</span><br><span class="line">                <span class="comment">// open loading</span></span><br><span class="line">                context.<span class="property">$bus</span>.<span class="title function_">emit</span>(<span class="string">&#x27;showLoading&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 统一增加token</span></span><br><span class="line">            <span class="comment">// const token = store.getters[&#x27;user/token&#x27;]</span></span><br><span class="line">            config.<span class="property">headers</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="string">&#x27;tokentest&#x27;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 记录请求的取消函数</span></span><br><span class="line">            <span class="keyword">let</span> <span class="title class_">CancelToken</span> =  axios.<span class="property">CancelToken</span></span><br><span class="line">            config.<span class="property">cancelToken</span> = <span class="keyword">new</span> <span class="title class_">CancelToken</span>(<span class="function">(<span class="params">c</span>)=&gt;</span> &#123; <span class="comment">// 存入 vux,组件销毁时执行</span></span><br><span class="line">                <span class="comment">// c 就是取消请求的token</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">push</span>(c)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">queue</span>++</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> config</span><br><span class="line">        &#125;, <span class="function">(<span class="params">err</span>)=&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 响应就从队列删除 </span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">queue</span>--</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">queue</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// close loading</span></span><br><span class="line">                context.<span class="property">$bus</span>.<span class="title function_">emit</span>(<span class="string">&#x27;closeLoading&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(err);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;)</span><br><span class="line">        instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">res</span>)=&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">queue</span>--</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">queue</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// close loading</span></span><br><span class="line">                context.<span class="property">$bus</span>.<span class="title function_">emit</span>(<span class="string">&#x27;closeLoading&#x27;</span>)</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;关闭 loading&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 这里判断要依据后端返回格式而定</span></span><br><span class="line">            <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span> == <span class="number">400200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res.<span class="property">msg</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="function">(<span class="params">err</span>)=&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">queue</span>--</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">queue</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// close loading</span></span><br><span class="line">                context.<span class="property">$bus</span>.<span class="title function_">emit</span>(<span class="string">&#x27;closeLoading&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(err);</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">request</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> instance = axios.<span class="title function_">create</span>()</span><br><span class="line">        <span class="keyword">let</span> config = &#123;</span><br><span class="line">            <span class="attr">baseURL</span>: <span class="variable language_">this</span>.<span class="property">baseURL</span>,</span><br><span class="line">            <span class="attr">timeout</span>: <span class="variable language_">this</span>.<span class="property">timeout</span>,</span><br><span class="line">            <span class="comment">// validateStatus: function (status) &#123;</span></span><br><span class="line">            <span class="comment">//     console.log(&#x27;当前请求状态:&#x27;, status);</span></span><br><span class="line">            <span class="comment">//     return status &gt;= 200 &amp;&amp; status &lt; 300; // default</span></span><br><span class="line">            <span class="comment">// &#125;,</span></span><br><span class="line">            ...options</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setInterceptor</span>(instance, config.<span class="property">url</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">instance</span>(config) <span class="comment">// 返回 promise 对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">url, data</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line">            url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">            <span class="attr">params</span>: data</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">post</span>(<span class="params">url, data, config = &#123;&#125;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">request</span>(&#123;</span><br><span class="line">            url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            data,</span><br><span class="line">            ...config</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="eventemitter3"><a href="#eventemitter3" class="headerlink" title="eventemitter3"></a>eventemitter3</h3><blockquote><p>EventEmitter3 是一个高性能的 EventEmitter。它已经针对各种代码路径进行了微优化，使其成为 Node.js 和浏览器可用的最快 EventEmitter 之一。该模块的 API 与 Node.js 默认附带的 EventEmitter 兼容，但有一些细微差别：</p><ul><li>域支持已被删除。</li><li><code>throw</code>当您发出<code>error</code>事件并且没有人在听时，我们不会出错。</li><li>和事件已被删除<code>newListener</code>，<code>removeListener</code>因为它们仅在一些不常见的用例中有用。</li><li>、<code>setMaxListeners</code>和方法不可用 <code>getMaxListeners</code>。<code>prependListener``prependOnceListener</code></li><li>支持事件的自定义上下文，因此无需使用<code>fn.bind</code>.</li><li>该<code>removeListener</code>方法删除所有匹配的侦听器，而不仅仅是第一个。</li></ul><p>它是现有 EventEmitters 的替代品，但速度更快。免费表演，谁不想呢？EventEmitter 是用 EcmaScript 3 编写的，因此它可以在您需要支持的最旧的浏览器和节点版本中工作。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save eventemitter3</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="variable constant_">EE</span> = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>()</span><br><span class="line">  , context = &#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">emitted</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === context); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable constant_">EE</span>.<span class="title function_">once</span>(<span class="string">&#x27;event-name&#x27;</span>, emitted, context);</span><br><span class="line"><span class="variable constant_">EE</span>.<span class="title function_">on</span>(<span class="string">&#x27;another-event&#x27;</span>, emitted, context);</span><br><span class="line"><span class="variable constant_">EE</span>.<span class="title function_">removeListener</span>(<span class="string">&#x27;another-event&#x27;</span>, emitted, context);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>EventEmitter在其原型上添加了如下方法：</p><blockquote><p>eventNames、listeners、listenerCount、emit、on / addListener、once、off / removeListener、removeAllListeners</p></blockquote><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/v2-1d23d0fcb5c423d69da86237d6201af7_r.jpg" alt="preview"></p><h3 id="amfe-flexible"><a href="#amfe-flexible" class="headerlink" title="amfe-flexible"></a>amfe-flexible</h3><blockquote><p>手淘 rem适配方案，为html、body添加font-size，窗口调整时候重新设置font-size</p></blockquote><h3 id="postcss-pxtorem"><a href="#postcss-pxtorem" class="headerlink" title="postcss-pxtorem"></a>postcss-pxtorem</h3><blockquote><p>通过postcss-pxtorem来实现自动渲染px至rem的开发与生产工作<br>而不需要再手动计算。将px转换为px</p></blockquote><h3 id="GSAP（GreenSock）"><a href="#GSAP（GreenSock）" class="headerlink" title="GSAP（GreenSock）"></a><a href="https://greensock.com/">GSAP（GreenSock）</a></h3><blockquote><p>最健全的web动画库之一</p></blockquote><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><blockquote><p>代码规范检查，建议使用文件配置得方式来编写配置。</p><p>安装 ESlint 后，通过 eslint –init  初始化配置文件</p></blockquote><p>配置规则如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line"><span class="string">&quot;规则名&quot;</span>: [规则值, 规则配置]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 规则值： &quot;off&quot;/0 表示关闭， “warn&quot;/1 表示警告，&quot;error&quot;/2 表示错误</span></span><br></pre></td></tr></table></figure><p>官方提供的可选检测规则多达200条，我们可以从中筛选出自己需要的规则。还可以通过配置项文件得 extends 字段来启用官方推的或者开源的规则集。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;extends&quot;</span>: <span class="string">&quot;eslint:recommended&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果在某些特殊场景中，需要有针对性地避开某些检测规则（而不是对整个工程禁用某项检测），则可以使用下面的语法在源代码中进行注释：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 禁止检查这一行</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;foo&#x27;</span>); <span class="comment">/* eslint-disable-line no-alert*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁止检查下一行</span></span><br><span class="line"><span class="comment">/*eslint-disable-next no-alert*/</span></span><br><span class="line"><span class="title function_">alert</span>(<span class="string">&#x27;foo&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>ESLint和Prettier是非常好的搭档，尽管有时候因为配置的问题可能会在检查项上出现冲突，这种时候根据实际要求关闭其中一个的检查项即可。总之，ESLint更倾向于发现和修复语言本身相关的漏洞或风险，而Prettier关注的则是格式和排版风格方面的一致性，两者各司其职。</p></blockquote><h3 id="Requirejs-与-模块化推演"><a href="#Requirejs-与-模块化推演" class="headerlink" title="Requirejs 与 模块化推演"></a>Requirejs 与 模块化推演</h3><ul><li><p>代码隔离</p><p>  第一代模块化解决方案，立即执行函数（IIFE）</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">;(<span class="keyword">function</span>(<span class="params">win, <span class="literal">undefined</span></span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)(<span class="variable language_">window</span>)</span><br></pre></td></tr></table></figure><p>  我们知道“undefined”在JavaScript语言中是一个关键字，不仅如此，它还是全局对象的一个属性，它的值被定义为“undefined”。在低版本的浏览器中，它是可以被赋值修改的，一旦有人恶意修改了“undefined”这个属性的值，那么你写在代码里的所有针对“undefined”的判断逻辑就会混乱。由于立即执行函数中的最后一个形参没有对应于任何值，因此其会被自动赋值为真正的“undefined”，以避免上述风险。</p></li></ul><h3 id="Loadsh-js"><a href="#Loadsh-js" class="headerlink" title="Loadsh.js"></a>Loadsh.js</h3><blockquote><p>它是一个具有一致性、模块化且高性能的JavaScript实用工具库</p></blockquote><h3 id="静态类型检查"><a href="#静态类型检查" class="headerlink" title="静态类型检查"></a>静态类型检查</h3><blockquote><p>两种流行的静态类型检查方案Flow.js和TypeScript的使用方法。 js 是一门动态类型语言，只有在运行时才会发现错误，而静态类型检查可以帮我们避免很多不必要得错误和快速定位错误</p></blockquote><p>Flow.js</p><p>优势无侵入性是Flow.js最有吸引力的特点之一，当你希望尝试它时，可以轻松地将它引入项目中，当你的项目不再需要使用它时，使用“babel”或“flow-remove-types”命令可以非常轻松地将类型信息从源代码中去除，进而得到一份纯净的源代码，它就像一个自带卸载程序的辅助工具。相较于TypeScript的学习曲线，Flow.js的上手难度几乎低到可以忽略不计。无论如何，建议尝试使用它，将它作为TypeScript或是Java的预备知识也是非常好的。</p><p>TypeScript </p><p>学习成本相对较高，但是功能更加强大。</p><h3 id="Ramda-js"><a href="#Ramda-js" class="headerlink" title="Ramda.js"></a>Ramda.js</h3><p>为开发者提供了许多实用的工具原子函数</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;1、VueUse&quot;&gt;&lt;a href=&quot;#1、VueUse&quot; class=&quot;headerlink&quot; title=&quot;1、VueUse&quot;&gt;&lt;/a&gt;1、VueUse&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;​    VueUse 是 &lt;strong&gt;Anthony Fu  大佬&lt;/strong&gt;的一个开源项目，它为Vue的开发者提供了大量用于 Vue2 和Vue3 的基本 &lt;strong&gt;Composition API&lt;/strong&gt; 实用工具函数。&lt;/p&gt;
&lt;p&gt;它有几十个用于常见开发人员用例的解决方案，如跟踪&lt;code&gt;ref&lt;/code&gt;更改，检测元素可见性，简化常见Vue模式，键盘/鼠标输入等。 这是真正节省开发时间的好方法，因为我们不必自己亲手添加所有这些标准功能，拿来主义，用就对了(再次感谢大佬的付出)。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="vue" scheme="https://wyf195075595.github.io/categories/vue/"/>
    
    
    <category term="vue" scheme="https://wyf195075595.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>react 插件</title>
    <link href="https://wyf195075595.github.io/2022/08/05/programming/react/react%E5%AE%9E%E8%B7%B5%E4%B8%8E%E4%BC%98%E5%8C%96/"/>
    <id>https://wyf195075595.github.io/2022/08/05/programming/react/react%E5%AE%9E%E8%B7%B5%E4%B8%8E%E4%BC%98%E5%8C%96/</id>
    <published>2022-08-05T03:19:28.000Z</published>
    <updated>2022-08-12T07:43:16.621Z</updated>
    
    <content type="html"><![CDATA[<h3 id="react-PureComponent-与-React-Component-区别"><a href="#react-PureComponent-与-React-Component-区别" class="headerlink" title="react.PureComponent 与 React.Component 区别"></a>react.PureComponent 与 React.Component 区别</h3><blockquote><p>唯一的区别在于 Rect.Component 没有实现 shouldComponentUpdate() *<strong>一个不太常用的生命周期方法*</strong>, 而 React.PureComponent 中以浅层对比 prop 和 state 的方式来实现了该函数。</p></blockquote><blockquote><p><strong>注意</strong></p><p>React.PureComponent 中的 <strong>shouldComponentUpdate()</strong> 仅作<strong>对象的浅层比较</strong>。如果对象中包含复杂的数据结构，则可能无法检查到深层的差别，产生错误的对比结果。所以只在props 和 state 比较简单时使用这个，或者在深层数据结构发生变化时调用<strong>forceUpdate()<strong>来确保组件被正确地更新。也可以使用</strong>immutable</strong> 对象加速嵌套数据的比较。</p><p>此外，React中 的 <strong>shouldComponentUpdate()</strong> 将跳过所有子组件树的 prop 更新。因此，确保所有子组件也是“纯的”组件。</p></blockquote><span id="more"></span><h3 id="useMemo与useCallback"><a href="#useMemo与useCallback" class="headerlink" title="useMemo与useCallback"></a>useMemo与useCallback</h3><blockquote><p>在class 组件中，内部有 state 状态管理。</p><ol><li>调用setState，就会触发组件的重新渲染，无论前后的state是否不同</li><li>父组件更新，子组件也会自动的更新</li></ol><p>基于上面的两点，我们通常的解决方案是：使用immutable进行比较，在不相等的时候调用<a href="https://so.csdn.net/so/search?q=setState&spm=1001.2101.3001.7020">setState</a>；在shouldComponentUpdate中判断前后的props和state，如果没有变化，则返回false来阻止更新</p></blockquote><p>在 function 组件中,没有 shouldComponentUpdate 钩子函数，useEffect 不区分mount和update两个状态</p><p>因此useMemo 和useCallback就是解决性能问题的杀手锏。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">export default function WithoutMemo() &#123;</span><br><span class="line">    const [count, setCount] = useState(1);</span><br><span class="line">    const [val, setValue] = useState(&#x27;&#x27;);</span><br><span class="line"> </span><br><span class="line">    function expensive() &#123;</span><br><span class="line">        console.log(&#x27;compute&#x27;);</span><br><span class="line">        let sum = 0;</span><br><span class="line">        for (let i = 0; i &lt; count * 100; i++) &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">        &lt;h4&gt;&#123;count&#125;-&#123;val&#125;-&#123;expensive()&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+c1&lt;/button&gt;</span><br><span class="line">            &lt;input value=&#123;val&#125; onChange=&#123;event =&gt; setValue(event.target.value)&#125;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面例子中，expensive 方法在任何状态更新时都会执行一次，它应该是只依赖 count 状态。此处可使用useMemo 优化，useMemo 返回缓存的值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">export default function WithoutMemo() &#123;</span><br><span class="line">    const [count, setCount] = useState(1);</span><br><span class="line">    const [val, setValue] = useState(&#x27;&#x27;);</span><br><span class="line"> </span><br><span class="line">    const expensive = useMemo(() =&gt; &#123;</span><br><span class="line">        console.log(&#x27;compute&#x27;);</span><br><span class="line">        let sum = 0;</span><br><span class="line">        for (let i = 0; i &lt; count * 100; i++) &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;, [count]);</span><br><span class="line"> </span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">        &lt;h4&gt;&#123;count&#125;-&#123;val&#125;-&#123;expensive&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+c1&lt;/button&gt;</span><br><span class="line">            &lt;input value=&#123;val&#125; onChange=&#123;event =&gt; setValue(event.target.value)&#125;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>useCallback 它与 useMemo 相似，返回 缓存的函数. </p><p>当 count 更新时，返回新的函数，使用 Set 来判断返回函数是否更新。每次修改count，set.size就会+1</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, useCallback &#125; from &#x27;react&#x27;;</span><br><span class="line"> </span><br><span class="line">const set = new Set();</span><br><span class="line"> </span><br><span class="line">export default function Callback() &#123;</span><br><span class="line">    const [count, setCount] = useState(1);</span><br><span class="line">    const [val, setVal] = useState(&#x27;&#x27;);</span><br><span class="line"> </span><br><span class="line">    const callback = useCallback(() =&gt; &#123;</span><br><span class="line">        console.log(count);</span><br><span class="line">    &#125;, [count]);</span><br><span class="line">    set.add(callback);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">        &lt;h4&gt;&#123;count&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;h4&gt;&#123;set.size&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+&lt;/button&gt;</span><br><span class="line">            &lt;input value=&#123;val&#125; onChange=&#123;event =&gt; setVal(event.target.value)&#125;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用场景，父子组件传值。父组件更新子组件也会更新。但大多数是没有必要的，通过 useCallback 可以优化。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, useCallback, useEffect &#125; from &#x27;react&#x27;;</span><br><span class="line">// 父组件</span><br><span class="line">function Parent() &#123;</span><br><span class="line">    const [count, setCount] = useState(1);</span><br><span class="line">    const [val, setVal] = useState(&#x27;&#x27;);</span><br><span class="line"> </span><br><span class="line">    const callback = useCallback(() =&gt; &#123;</span><br><span class="line">        return count;</span><br><span class="line">    &#125;, [count]);</span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">        &lt;h4&gt;&#123;count&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;Child callback=&#123;callback&#125;/&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+&lt;/button&gt;</span><br><span class="line">            &lt;input value=&#123;val&#125; onChange=&#123;event =&gt; setVal(event.target.value)&#125;/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;;</span><br><span class="line">&#125;</span><br><span class="line">// 子组件</span><br><span class="line">function Child(&#123; callback &#125;) &#123;</span><br><span class="line">    const [count, setCount] = useState(() =&gt; callback());</span><br><span class="line">    useEffect(() =&gt; &#123;</span><br><span class="line">        setCount(callback());</span><br><span class="line">    &#125;, [callback]);</span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">        &#123;count&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>所有依赖本地状态或props来创建函数，需要使用到缓存函数的地方，都是useCallback的应用场景。</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;react-PureComponent-与-React-Component-区别&quot;&gt;&lt;a href=&quot;#react-PureComponent-与-React-Component-区别&quot; class=&quot;headerlink&quot; title=&quot;react.PureComponent 与 React.Component 区别&quot;&gt;&lt;/a&gt;react.PureComponent 与 React.Component 区别&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;唯一的区别在于 Rect.Component 没有实现 shouldComponentUpdate() *&lt;strong&gt;一个不太常用的生命周期方法*&lt;/strong&gt;, 而 React.PureComponent 中以浅层对比 prop 和 state 的方式来实现了该函数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;React.PureComponent 中的 &lt;strong&gt;shouldComponentUpdate()&lt;/strong&gt; 仅作&lt;strong&gt;对象的浅层比较&lt;/strong&gt;。如果对象中包含复杂的数据结构，则可能无法检查到深层的差别，产生错误的对比结果。所以只在props 和 state 比较简单时使用这个，或者在深层数据结构发生变化时调用&lt;strong&gt;forceUpdate()&lt;strong&gt;来确保组件被正确地更新。也可以使用&lt;/strong&gt;immutable&lt;/strong&gt; 对象加速嵌套数据的比较。&lt;/p&gt;
&lt;p&gt;此外，React中 的 &lt;strong&gt;shouldComponentUpdate()&lt;/strong&gt; 将跳过所有子组件树的 prop 更新。因此，确保所有子组件也是“纯的”组件。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="react" scheme="https://wyf195075595.github.io/categories/react/"/>
    
    
    <category term="react" scheme="https://wyf195075595.github.io/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>vue 实践与优化</title>
    <link href="https://wyf195075595.github.io/2022/08/05/programming/vue/%E5%AE%9E%E8%B7%B5%E5%8F%8A%E4%BC%98%E5%8C%96/"/>
    <id>https://wyf195075595.github.io/2022/08/05/programming/vue/%E5%AE%9E%E8%B7%B5%E5%8F%8A%E4%BC%98%E5%8C%96/</id>
    <published>2022-08-05T00:23:10.000Z</published>
    <updated>2022-08-26T09:26:01.902Z</updated>
    
    <content type="html"><![CDATA[<h3 id="在使用-element-UI-的-el-image-时，首次加载图片出现白色闪现效果"><a href="#在使用-element-UI-的-el-image-时，首次加载图片出现白色闪现效果" class="headerlink" title="在使用 element UI 的 el-image 时，首次加载图片出现白色闪现效果"></a>在使用 element UI 的 el-image 时，首次加载图片出现白色闪现效果</h3><p>这是应为 组件内 在加载前和加载中是一个类名为el-image__placeholder的div标签，在加载后和加载出错后的处理分别是一个div和img标签。</p><p>解决方法：在加载前和加载后的样式上做更改，可以<strong>重写覆盖</strong>类名<strong>el-image__placeholder</strong>和<strong>el-image__error</strong>来自定义自己想要的效果了</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 将默认的白色背景去除</span><br><span class="line"></span><br><span class="line">::v-deep .el-image__placeholder,</span><br><span class="line">::v-deep .el-image__error</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">background</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;在使用-element-UI-的-el-image-时，首次加载图片出现白色闪现效果&quot;&gt;&lt;a href=&quot;#在使用-element-UI-的-el-image-时，首次加载图片出现白色闪现效果&quot; class=&quot;headerlink&quot; title=&quot;在使用 elem</summary>
      
    
    
    
    <category term="vuex" scheme="https://wyf195075595.github.io/categories/vuex/"/>
    
    
  </entry>
  
  <entry>
    <title>linux 常用命令</title>
    <link href="https://wyf195075595.github.io/2022/08/02/programming/linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://wyf195075595.github.io/2022/08/02/programming/linux/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2022-08-02T02:54:10.000Z</published>
    <updated>2022-09-07T03:59:52.632Z</updated>
    
    <content type="html"><![CDATA[<h3 id="用命令netstat查侦听端口"><a href="#用命令netstat查侦听端口" class="headerlink" title="用命令netstat查侦听端口"></a>用命令netstat查侦听端口</h3><p><code>netstat</code> 是一个命令行工具，可以提供有关网络连接的信息。</p><p>要列出正在侦听的所有TCP或UDP端口，包括使用端口和套接字状态的服务，请使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tunlp</span><br></pre></td></tr></table></figure><p>此命令中使用的选项具有以下含义：</p><ul><li>-t - 显示TCP端口。</li><li>-u - 显示UDP端口。</li><li>-n - 显示数字地址而不是解析主机。</li><li>-l - 仅显示侦听端口。</li><li>-p - 显示监听器进程的PID和名称。仅当您以root或sudo用户身份运行命令时，才会显示此信息。</li></ul><span id="more"></span><h3 id="查询nginx主进程号"><a href="#查询nginx主进程号" class="headerlink" title="查询nginx主进程号"></a>查询nginx主进程号</h3><p>　　ps -ef | grep nginx</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;用命令netstat查侦听端口&quot;&gt;&lt;a href=&quot;#用命令netstat查侦听端口&quot; class=&quot;headerlink&quot; title=&quot;用命令netstat查侦听端口&quot;&gt;&lt;/a&gt;用命令netstat查侦听端口&lt;/h3&gt;&lt;p&gt;&lt;code&gt;netstat&lt;/code&gt; 是一个命令行工具，可以提供有关网络连接的信息。&lt;/p&gt;
&lt;p&gt;要列出正在侦听的所有TCP或UDP端口，包括使用端口和套接字状态的服务，请使用以下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo netstat -tunlp&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;此命令中使用的选项具有以下含义：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-t - 显示TCP端口。&lt;/li&gt;
&lt;li&gt;-u - 显示UDP端口。&lt;/li&gt;
&lt;li&gt;-n - 显示数字地址而不是解析主机。&lt;/li&gt;
&lt;li&gt;-l - 仅显示侦听端口。&lt;/li&gt;
&lt;li&gt;-p - 显示监听器进程的PID和名称。仅当您以root或sudo用户身份运行命令时，才会显示此信息。&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="linux" scheme="https://wyf195075595.github.io/categories/linux/"/>
    
    
    <category term="linux" scheme="https://wyf195075595.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>项目中遇到的样式问题</title>
    <link href="https://wyf195075595.github.io/2022/07/23/programming/htmlcss/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%97%AE%E9%A2%98/"/>
    <id>https://wyf195075595.github.io/2022/07/23/programming/htmlcss/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%97%AE%E9%A2%98/</id>
    <published>2022-07-23T05:07:23.000Z</published>
    <updated>2022-08-02T02:52:41.238Z</updated>
    
    <content type="html"><![CDATA[<h3 id="scss-文件引入样式不生效"><a href="#scss-文件引入样式不生效" class="headerlink" title="scss 文件引入样式不生效"></a>scss 文件引入样式不生效</h3><blockquote><p>​    vue + sacc 项目, 公用样式 common.scss 样式嵌套写法导入不生效</p><p>现象：样式表只有最外层样式生效，嵌套样式不生效（没有解析嵌套语法）</p></blockquote><p>下面这种方式导入，样式不能嵌套写。 必须使用 层级选择器方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import url(&#x27;@/style/common.scss&#x27;);</span><br></pre></td></tr></table></figure><p>解决：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#x27;@/style/common.scss&#x27;;</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="element-ui-表格-宽度不随父级容器变化而自适应"><a href="#element-ui-表格-宽度不随父级容器变化而自适应" class="headerlink" title="element-ui 表格 宽度不随父级容器变化而自适应"></a>element-ui 表格 宽度不随父级容器变化而自适应</h3><blockquote><p>页面布局方式为：父级 display: flex; 项目。自身宽高100%。</p><p>现象：初次加载没有问题，页面调整宽度时，不随父级宽度变化</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">    :data=&quot;tableData&quot;</span><br><span class="line">    :cell-style=&quot;isRed&quot;</span><br><span class="line">    height=&quot;150&quot;</span><br><span class="line">    border</span><br><span class="line">    style=&quot;width: 100%&quot;&gt;</span><br><span class="line">&lt;el-table-column prop=&quot;id&quot; label=&quot;设备编码&quot; &gt;</span><br><span class="line">&lt;el-table-column prop=&quot;id&quot; label=&quot;设备编码&quot; &gt;</span><br><span class="line">&lt;el-table-column prop=&quot;id&quot; label=&quot;设备编码&quot; &gt;</span><br><span class="line">&lt;el-table-column prop=&quot;id&quot; label=&quot;设备编码&quot; &gt;</span><br><span class="line"></span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure><p>解决：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">  :data=&quot;tableData&quot;</span><br><span class="line">  height=&#x27;calc(100%)&#x27; border fit&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;td1&quot; label=&quot;表头1&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;td1&quot; label=&quot;表头2&quot; &gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;td1&quot; label=&quot;表头3&quot;&gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;td1&quot; label=&quot;表头4&quot; &gt;&lt;/el-table-column&gt;</span><br><span class="line">  &lt;el-table-column prop=&quot;td1&quot; label=&quot;表头5&quot; &gt;&lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">&lt;/el-table&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;scss-文件引入样式不生效&quot;&gt;&lt;a href=&quot;#scss-文件引入样式不生效&quot; class=&quot;headerlink&quot; title=&quot;scss 文件引入样式不生效&quot;&gt;&lt;/a&gt;scss 文件引入样式不生效&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;​    vue + sacc 项目, 公用样式 common.scss 样式嵌套写法导入不生效&lt;/p&gt;
&lt;p&gt;现象：样式表只有最外层样式生效，嵌套样式不生效（没有解析嵌套语法）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下面这种方式导入，样式不能嵌套写。 必须使用 层级选择器方式&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@import url(&amp;#x27;@/style/common.scss&amp;#x27;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;解决：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@import &amp;#x27;@/style/common.scss&amp;#x27;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="htmlcss" scheme="https://wyf195075595.github.io/categories/htmlcss/"/>
    
    
  </entry>
  
  <entry>
    <title>页面 rem 适配</title>
    <link href="https://wyf195075595.github.io/2022/07/21/programming/javascript/rem%E9%80%82%E9%85%8D/"/>
    <id>https://wyf195075595.github.io/2022/07/21/programming/javascript/rem%E9%80%82%E9%85%8D/</id>
    <published>2022-07-21T13:54:10.000Z</published>
    <updated>2022-08-05T08:34:42.312Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>rem 自适应方案</p></blockquote><h3 id="宽度-1920-时-1rem-等于-100px-方便换算"><a href="#宽度-1920-时-1rem-等于-100px-方便换算" class="headerlink" title="宽度 1920 时, 1rem 等于 100px.方便换算"></a>宽度 1920 时, 1rem 等于 100px.方便换算</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">doc, win</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> docEl = doc.<span class="property">documentElement</span>,</span><br><span class="line">        resizeEvt = <span class="string">&quot;orientationchange&quot;</span> <span class="keyword">in</span> <span class="variable language_">window</span> ? <span class="string">&quot;orientationchange&quot;</span> : <span class="string">&quot;resize&quot;</span>,</span><br><span class="line">    recalc = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> width = docEl.<span class="property">clientWidth</span> / <span class="number">19.20</span>;</span><br><span class="line">        docEl.<span class="property">style</span>.<span class="property">fontSize</span> = width + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">        scaleNum = width;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (!doc.<span class="property">addEventListener</span>) <span class="keyword">return</span>;</span><br><span class="line">    win.<span class="title function_">addEventListener</span>(resizeEvt, recalc, <span class="literal">false</span>);</span><br><span class="line">    doc.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, recalc, <span class="literal">false</span>);</span><br><span class="line">&#125;)(<span class="variable language_">document</span>, <span class="variable language_">window</span>);</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="使用开发工具-计算rem"><a href="#使用开发工具-计算rem" class="headerlink" title="使用开发工具 计算rem"></a>使用开发工具 计算rem</h3><blockquote><p>默认 1920 下16px，插件 px to rem 默认配置 16px</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">getclientSize</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.<span class="title function_">emit</span>(<span class="string">&#x27;window-resize&#x27;</span>, <span class="literal">null</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">getclientSize</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> clientWidth = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> || <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span> <span class="comment">//可视区域宽度</span></span><br><span class="line">  <span class="comment">// let clientHeight = document.documentElement.clientHeight || document.body.clientHeight //可视区域高度</span></span><br><span class="line">  <span class="keyword">let</span> clientWidth_base = <span class="number">1920</span></span><br><span class="line"></span><br><span class="line">  clientWidth_base = clientWidth;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">style</span>.<span class="property">fontSize</span> = clientWidth_base / <span class="number">1920</span> * <span class="number">16</span> + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">  <span class="comment">// $(&#x27;html&#x27;).css(&quot;font-size&quot;, clientWidth_base / 1920 * 16 + &#x27;px&#x27;);</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">radioBase</span> = clientWidth_base / <span class="number">1920</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vue-amfe-flexible开发移动端"><a href="#vue-amfe-flexible开发移动端" class="headerlink" title="vue+amfe-flexible开发移动端"></a>vue+amfe-flexible开发移动端</h3><blockquote><p>(手淘移动端适配方案)</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install amfe-flexible -S</span><br><span class="line">cnpm install postcss-pxtorem -S</span><br></pre></td></tr></table></figure><p>配置main.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//引入</span><br><span class="line">import &#x27;amfe-flexible/index&#x27;</span><br></pre></td></tr></table></figure><p>配置 vue.config.js</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">module.exports = <span class="punctuation">&#123;</span></span><br><span class="line">    css<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        loaderOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            postcss<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                plugins<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    require(&#x27;postcss-pxtorem&#x27;)(<span class="punctuation">&#123;</span> <span class="comment">// 把px单位换算成rem单位</span></span><br><span class="line">                        rootValue<span class="punctuation">:</span> <span class="number">75</span><span class="punctuation">,</span> <span class="comment">// 换算的基数(设计图750的根字体为75,若是设计图为640:则rootValue=64)</span></span><br><span class="line">                        propList<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;*&#x27;<span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span>)</span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    configureWebpack<span class="punctuation">:</span> config =&gt; <span class="punctuation">&#123;</span></span><br><span class="line">        if (process.env.NODE_ENV === &#x27;production&#x27;) <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">        <span class="punctuation">&#125;</span> else <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&quot;postcss-pxtorem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;rootValue&quot;</span><span class="punctuation">:</span> <span class="number">75</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;propList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;*&#x27;<span class="punctuation">,</span>&#x27;!font&#x27;<span class="punctuation">,</span>&#x27;!font-size&#x27;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"></span><br><span class="line"><span class="attr">&quot;css&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    loaderOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      less<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      postcss<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        postcssOptions<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          plugins<span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            autoprefixer<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;postcss-pxtorem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">              rootValue<span class="punctuation">:</span> <span class="number">75</span><span class="punctuation">,</span></span><br><span class="line">              propList<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;!font-size&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;!border*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;!letter-spacing&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;!text-indent&quot;</span><span class="punctuation">,</span></span><br><span class="line">              <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">              mediaQuery<span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span></span><br><span class="line">              replace<span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">              unitPrecision<span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">              exclude<span class="punctuation">:</span> /node_modules/i<span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>修改 index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>此插件也可直接于页面引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;&lt;%= BASE_URL %&gt;static/amfe-flexible.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p><em>在CSS样式中可直接书写750PX,既表明 整屏的宽度,若是设计图不是750的,可在vue.config.js中 rootValue属性,修改成设计图宽度便可,详见vue.config.js注释说明**css</em></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;rem 自适应方案&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;宽度-1920-时-1rem-等于-100px-方便换算&quot;&gt;&lt;a href=&quot;#宽度-1920-时-1rem-等于-100px-方便换算&quot; class=&quot;headerlink&quot; title=&quot;宽度 1920 时, 1rem 等于 100px.方便换算&quot;&gt;&lt;/a&gt;宽度 1920 时, 1rem 等于 100px.方便换算&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;doc, win&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; docEl = doc.&lt;span class=&quot;property&quot;&gt;documentElement&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        resizeEvt = &lt;span class=&quot;string&quot;&gt;&amp;quot;orientationchange&amp;quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;variable language_&quot;&gt;window&lt;/span&gt; ? &lt;span class=&quot;string&quot;&gt;&amp;quot;orientationchange&amp;quot;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&amp;quot;resize&amp;quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    recalc = &lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; width = docEl.&lt;span class=&quot;property&quot;&gt;clientWidth&lt;/span&gt; / &lt;span class=&quot;number&quot;&gt;19.20&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        docEl.&lt;span class=&quot;property&quot;&gt;style&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;fontSize&lt;/span&gt; = width + &lt;span class=&quot;string&quot;&gt;&amp;quot;px&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        scaleNum = width;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!doc.&lt;span class=&quot;property&quot;&gt;addEventListener&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    win.&lt;span class=&quot;title function_&quot;&gt;addEventListener&lt;/span&gt;(resizeEvt, recalc, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    doc.&lt;span class=&quot;title function_&quot;&gt;addEventListener&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;DOMContentLoaded&amp;quot;&lt;/span&gt;, recalc, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)(&lt;span class=&quot;variable language_&quot;&gt;document&lt;/span&gt;, &lt;span class=&quot;variable language_&quot;&gt;window&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="js" scheme="https://wyf195075595.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>patch-package</title>
    <link href="https://wyf195075595.github.io/2022/07/18/programming/jsplugin/patch-package/"/>
    <id>https://wyf195075595.github.io/2022/07/18/programming/jsplugin/patch-package/</id>
    <published>2022-07-18T06:27:10.000Z</published>
    <updated>2022-07-18T06:34:58.647Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>patch-package</strong> 这个库来解决这类问题。一方面，它能记录第三方库代码的改动，另一方面也能将改动同步到团队每个成员。</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install patch-package -D</span><br></pre></td></tr></table></figure><blockquote><p>注意: 要改动的包在 package.json 中必须声明确定的版本，不能有~或者^的前缀。</p></blockquote><span id="more"></span><p>进入第三库进行修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//这里我修改的是 sass 库</span><br><span class="line">npx patch-package sass</span><br></pre></td></tr></table></figure><p>现在根目录会多出patches目录记录第三方包内容的更改，随后我们在package.json的scripts中增加如下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;postinstall&quot;: &quot;patch-package&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>每次安装依赖的时候都会通过 postinstall 脚本自动应用 patches 的修改，解决了团队协作的问题。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;patch-package&lt;/strong&gt; 这个库来解决这类问题。一方面，它能记录第三方库代码的改动，另一方面也能将改动同步到团队每个成员。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install patch-package -D&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;blockquote&gt;
&lt;p&gt;注意: 要改动的包在 package.json 中必须声明确定的版本，不能有~或者^的前缀。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="插件" scheme="https://wyf195075595.github.io/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>typescript 语法基础</title>
    <link href="https://wyf195075595.github.io/2022/07/17/programming/javascript/typescript/"/>
    <id>https://wyf195075595.github.io/2022/07/17/programming/javascript/typescript/</id>
    <published>2022-07-17T15:17:10.000Z</published>
    <updated>2022-08-02T02:53:26.219Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h2><blockquote><p>number<code>，</code>string<code>，</code>boolean<code>，</code>symbol<code>，</code>null<code>或</code>undefined</p></blockquote><p>基本类型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">str</span>: <span class="built_in">string</span> = <span class="string">&#x27;hello there&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">num</span>: <span class="built_in">number</span> = <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">bool</span>: <span class="built_in">boolean</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure><p>联合类型</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: <span class="built_in">string</span>|<span class="built_in">number</span> = <span class="number">15</span></span><br></pre></td></tr></table></figure><p>数组，元组</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组, 数组中元素是number类型的数组</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组，数组内元素是任意类型</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">arr1</span>: <span class="built_in">any</span>[] = [<span class="number">1</span>, &#123;<span class="attr">a</span>: <span class="number">2</span>&#125;, <span class="string">&#x27;3&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 元组类型顺序数量都要保持一致</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">tulpe</span>: [stirng, <span class="built_in">number</span>] = [<span class="string">&#x27;zzz&#x27;</span>, <span class="number">123</span>]</span><br></pre></td></tr></table></figure><p>枚举</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认值是下标数字</span></span><br><span class="line"><span class="keyword">enum</span> <span class="variable constant_">USER_ROLE</span> &#123;</span><br><span class="line">    <span class="variable constant_">USER</span>,</span><br><span class="line">    <span class="variable constant_">MANAGER</span>,</span><br><span class="line">    <span class="variable constant_">ADMIN</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">USER_ROLE</span>.<span class="property">MANAGER</span>) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值</span></span><br><span class="line"><span class="keyword">enum</span> <span class="variable constant_">USER_ROLE</span> &#123;</span><br><span class="line">    <span class="variable constant_">USER</span> = <span class="string">&#x27;USER&#x27;</span>,</span><br><span class="line">    <span class="variable constant_">MANAGER</span> = <span class="string">&#x27;MANAGER&#x27;</span>,</span><br><span class="line">    <span class="variable constant_">ADMIN</span> = <span class="string">&#x27;ADMIN&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">USER_ROLE</span>.<span class="property">MANAGER</span>) <span class="comment">// MANAGER</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><blockquote><p>用来描述对象形状的 interface</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ISchool</span> &#123;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="comment">// 设置属性只读</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">    address?: <span class="built_in">string</span> <span class="comment">// ?标识 此属性可填可不填</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用, 属性不能多，也不能少，类型需保持一致</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">school</span>: <span class="title class_">ISchool</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;xxx学校&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">school.<span class="property">name</span> = <span class="string">&#x27;ccc学校&#x27;</span> <span class="comment">// 报错</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>接口拓展</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拓展继承</span></span><br><span class="line"><span class="keyword">interface</span> IZHU <span class="keyword">extends</span> <span class="title class_">ISchool</span> &#123;</span><br><span class="line"><span class="attr">type</span>: <span class="built_in">string</span>,</span><br><span class="line">    [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 可拓展任意类型, 其中 key 不是特定写法，可任意</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">zhuf</span>:<span class="variable constant_">IZHU</span> = &#123;</span><br><span class="line">    ...school,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;web&#x27;</span>,</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>类型断言</p><blockquote><p>表示这个对象就是这样一个类型</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ISchool 接口没有拓展时，新增 lessons 属性会报错， 这时可以使用断言 人工判断他就是 ISchool 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">school2</span>: <span class="title class_">ISchool</span> = (&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;xxx学校&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">    <span class="attr">lessons</span>: [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]</span><br><span class="line">&#125;) <span class="keyword">as</span> <span class="title class_">ISchool</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 number 强行断言成 string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">number</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接断言成 string 会报错</span></span><br><span class="line">a <span class="keyword">as</span> <span class="built_in">any</span> <span class="keyword">as</span> <span class="built_in">string</span></span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><blockquote><p>函数主要关系其参数与返回值</p></blockquote><p>函数类型声明</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本写法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span> (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明类型:</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、<span class="keyword">type</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Sum</span> = <span class="function">(<span class="params">a: <span class="built_in">number</span>,b: <span class="built_in">number</span></span>)=&gt;</span> <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">interface</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Sum</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区别: interface 可以继承，被类实现。 type 仅仅是个别名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">sum2</span>: <span class="title class_">Sum</span> = (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> a + b</span><br><span class="line"></span><br><span class="line">sum2 = <span class="string">&#x27;type 声明 联合类型&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createArray</span> (len, value) &#123;</span><br><span class="line">    <span class="keyword">let</span> rs = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; len ; i++) &#123;</span><br><span class="line">        rs.<span class="title function_">push</span>(value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rs</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="title function_">createArray</span>(<span class="number">3</span>, <span class="string">&#x27;zf&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ts</span></span><br><span class="line"><span class="keyword">function</span> createArray&lt;T&gt; (<span class="attr">len</span>: <span class="built_in">number</span>, <span class="attr">value</span>: &lt;T&gt;): T[] &#123;</span><br><span class="line">    <span class="keyword">let</span> rs = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; len ; i++) &#123;</span><br><span class="line">        rs.<span class="title function_">push</span>(value)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rs</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>多个泛型， 元组交换</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原, 返回值 any</span></span><br><span class="line"><span class="keyword">const</span> swap = (<span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>]): [<span class="built_in">number</span>,<span class="built_in">string</span>] =&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">swap</span>(<span class="string">&#x27;1&#x27;</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改 返回值 随 传参类型</span></span><br><span class="line"><span class="keyword">const</span> swap = &lt;S,N&gt;(<span class="attr">tuple</span>: [S, N]): [N,S] =&gt; &#123;</span><br><span class="line"><span class="keyword">return</span> [tuple[<span class="number">1</span>], tuple[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br><span class="line">swap&lt;strig,<span class="built_in">number</span>&gt;(<span class="string">&#x27;1&#x27;</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.tslang.cn/docs/handbook/interfaces.html">ts中文文档</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;基本数据类型&quot;&gt;&lt;a href=&quot;#基本数据类型&quot; class=&quot;headerlink&quot; title=&quot;基本数据类型&quot;&gt;&lt;/a&gt;基本数据类型&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;number&lt;code&gt;，&lt;/code&gt;string&lt;code&gt;，&lt;/code&gt;boolean&lt;code&gt;，&lt;/code&gt;symbol&lt;code&gt;，&lt;/code&gt;null&lt;code&gt;或&lt;/code&gt;undefined&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;基本类型&lt;/p&gt;
&lt;figure class=&quot;highlight typescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;str&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;hello there&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;num&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;123&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;bool&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;boolean&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;n&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;u&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;undefined&lt;/span&gt; = &lt;span class=&quot;literal&quot;&gt;undefined&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;联合类型&lt;/p&gt;
&lt;figure class=&quot;highlight typescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;age&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;string&lt;/span&gt;|&lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;数组，元组&lt;/p&gt;
&lt;figure class=&quot;highlight typescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 数组, 数组中元素是number类型的数组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;arr&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;[] = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 数组，数组内元素是任意类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;arr1&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;any&lt;/span&gt;[] = [&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &amp;#123;&lt;span class=&quot;attr&quot;&gt;a&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&amp;#125;, &lt;span class=&quot;string&quot;&gt;&amp;#x27;3&amp;#x27;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 元组类型顺序数量都要保持一致&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;tulpe&lt;/span&gt;: [stirng, &lt;span class=&quot;built_in&quot;&gt;number&lt;/span&gt;] = [&lt;span class=&quot;string&quot;&gt;&amp;#x27;zzz&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;123&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;枚举&lt;/p&gt;
&lt;figure class=&quot;highlight typescript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 默认值是下标数字&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;variable constant_&quot;&gt;USER_ROLE&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;USER&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;MANAGER&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;ADMIN&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;variable constant_&quot;&gt;USER_ROLE&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;MANAGER&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 赋值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;variable constant_&quot;&gt;USER_ROLE&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;USER&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;USER&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;MANAGER&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;MANAGER&amp;#x27;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable constant_&quot;&gt;ADMIN&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;#x27;ADMIN&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;variable constant_&quot;&gt;USER_ROLE&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;MANAGER&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// MANAGER&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="typescript" scheme="https://wyf195075595.github.io/tags/typescript/"/>
    
  </entry>
  
  <entry>
    <title>isarray 兼容旧版本浏览器</title>
    <link href="https://wyf195075595.github.io/2022/07/13/programming/jsplugin/isarray/"/>
    <id>https://wyf195075595.github.io/2022/07/13/programming/jsplugin/isarray/</id>
    <published>2022-07-13T06:43:10.000Z</published>
    <updated>2022-07-13T06:45:27.481Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>判断一个对象是否为数组，兼容 哪些旧版本浏览器。</p><p>如果 不需要兼容旧版浏览器，建议直接使用 数组的 isArray 方法</p></blockquote><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install isarray</span><br></pre></td></tr></table></figure><p>示例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isArray = <span class="built_in">require</span>(<span class="string">&#x27;isarray&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isArray</span>([])); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isArray</span>(&#123;&#125;)); <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure><p>简单的展示其原理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isArray = <span class="title class_">Array</span>.<span class="property">isArray</span> || <span class="function"><span class="params">list</span> =&gt;</span> (&#123;&#125;).<span class="property">toString</span>.<span class="title function_">call</span>(list) === <span class="string">&#x27;[object Array]&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;判断一个对象是否为数组，兼容 哪些旧版本浏览器。&lt;/p&gt;
&lt;p&gt;如果 不需要兼容旧版浏览器，建议直接使用 数组的 isArray 方法&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;figure class=&quot;highlight pla</summary>
      
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="插件" scheme="https://wyf195075595.github.io/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>webpack 实践与优化</title>
    <link href="https://wyf195075595.github.io/2022/07/11/programming/webpack/%E5%AE%9E%E8%B7%B5%E4%BA%8E%E4%BC%98%E5%8C%96/"/>
    <id>https://wyf195075595.github.io/2022/07/11/programming/webpack/%E5%AE%9E%E8%B7%B5%E4%BA%8E%E4%BC%98%E5%8C%96/</id>
    <published>2022-07-11T09:23:10.000Z</published>
    <updated>2022-08-02T03:02:59.037Z</updated>
    
    <content type="html"><![CDATA[<h3 id="如何删除项目中没有使用到的-package"><a href="#如何删除项目中没有使用到的-package" class="headerlink" title="如何删除项目中没有使用到的 package"></a>如何删除项目中没有使用到的 package</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ npm install depcheck -g</span><br><span class="line"></span><br><span class="line">$ depcheck</span><br><span class="line"></span><br><span class="line"><span class="title class_">Unused</span> dependencies</span><br><span class="line">* underscore</span><br><span class="line"><span class="title class_">Unused</span> devDependencies</span><br><span class="line">* jasmine</span><br><span class="line"><span class="title class_">Missing</span> dependencies</span><br><span class="line">* lodash</span><br></pre></td></tr></table></figure><h3 id="查看-node-modules-某一文件夹-的体积有多大"><a href="#查看-node-modules-某一文件夹-的体积有多大" class="headerlink" title="查看 node_modules(某一文件夹) 的体积有多大"></a>查看 node_modules(某一文件夹) 的体积有多大</h3><span id="more"></span><p><code>du</code> (disk usage) 命令可以查看磁盘的使用情况，从它可以看出来文件及目录的大小</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -d 搜索深度，0 指当前目录</span></span><br><span class="line"><span class="comment"># -h 以可读性的方式显示大小</span></span><br><span class="line">$ <span class="built_in">du</span> -hd 0 node_modules</span><br><span class="line">132M    node_modules</span><br></pre></td></tr></table></figure><p>同理，可以使用以下命令查看 <code>node_modules</code> 下每个目录所占的大小</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">du</span> -hd 1 node_modules</span><br></pre></td></tr></table></figure><h3 id="optionalDependencies-的使用场景是什么"><a href="#optionalDependencies-的使用场景是什么" class="headerlink" title="optionalDependencies 的使用场景是什么"></a>optionalDependencies 的使用场景是什么</h3><p>当一个包是可依赖可不依赖时，可采用 <code>optionalDependencies</code>，但需要在代码中做好异常处理。</p><p>如 <a href="https://github.com/paulmillr/chokidar">chokidar (opens new window)</a>对 <code>fsevents</code> 的引入</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;optionalDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;fsevents&quot;</span><span class="punctuation">:</span> <span class="string">&quot;~2.1.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">let fsevents;</span><br><span class="line">try <span class="punctuation">&#123;</span></span><br><span class="line">  fsevents = require(<span class="string">&quot;fsevents&quot;</span>);</span><br><span class="line"><span class="punctuation">&#125;</span> catch (error) <span class="punctuation">&#123;</span></span><br><span class="line">  if (process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR) console.error(error);</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="前端性能分析工具"><a href="#前端性能分析工具" class="headerlink" title="前端性能分析工具"></a>前端性能分析工具</h3><ol><li><code>lighthouse</code>: 可在 chrome devtools 直接使用，根据个人设备及网络对目标网站进行分析，并提供各种建议</li><li><code>webpagetest</code>: 分布式的性能分析工具，可在全球多个区域的服务器资源为你的网站进行分析，并生成相应的报告</li></ol><h3 id="dependencies-与-devDependencies-有何区别"><a href="#dependencies-与-devDependencies-有何区别" class="headerlink" title="dependencies 与 devDependencies 有何区别"></a>dependencies 与 devDependencies 有何区别</h3><p><strong>对于业务代码而讲，它俩区别不大</strong></p><ul><li><p>当打包时，依靠的是 <code>Webpack/Rollup</code> 对代码进行模块依赖分析，与该模块是否在 <code>dep/devDep</code> 并无关系，只要在 <code>node_modules</code> 上能够找到该 Package 即可。</p></li><li><p>生产依赖会随着包一起下载，开发依赖不会，npm i –production 可以只下载生产依赖</p></li></ul><p><strong>对于库 (Package) 开发而言，是有严格区分的</strong></p><h3 id="确认项目是否引用某个依赖"><a href="#确认项目是否引用某个依赖" class="headerlink" title="确认项目是否引用某个依赖"></a>确认项目是否引用某个依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn list | grep xxx</span><br></pre></td></tr></table></figure><h3 id="为项目指定node版本号"><a href="#为项目指定node版本号" class="headerlink" title="为项目指定node版本号"></a>为项目指定node版本号</h3><blockquote><p>这属于项目质量问题</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;engines&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;node&quot;</span>: <span class="string">&quot;&gt;=14.0.0&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="版本号-设置"><a href="#版本号-设置" class="headerlink" title="版本号 设置"></a>版本号 设置</h3><blockquote><ul><li><code>major</code>: 当你发了一个含有 Breaking Change 的 API</li><li><code>minor</code>: 当你新增了一个向后兼容的功能时</li><li><code>patch</code>: 当你修复了一个向后兼容的 Bug 时</li></ul></blockquote><h3 id="npm-钩子函数-生命周期"><a href="#npm-钩子函数-生命周期" class="headerlink" title="npm 钩子函数, 生命周期"></a>npm 钩子函数, 生命周期</h3><blockquote><p>再执行一个脚本时，前置，后置钩子函数执行。npm 脚本生命周期</p></blockquote><p>生命周期</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prepublishOnly</span><br><span class="line">prepack</span><br><span class="line">prepare</span><br><span class="line">postpack</span><br><span class="line">publish</span><br><span class="line">postpublish</span><br></pre></td></tr></table></figure><p>钩子函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pre和post</span></span><br><span class="line"></span><br><span class="line">pre 为前置钩子函数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">post 为后置钩子函数</span><br><span class="line"></span><br><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;script&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;build&quot;</span>: <span class="string">&quot;npm run build&quot;</span>,</span><br><span class="line">        <span class="string">&quot;prebuild&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// npm run build 之前执行</span></span><br><span class="line">            <span class="string">&quot;postbuild&quot;</span>: <span class="string">&quot;&quot;</span>,<span class="comment">// npm run build 之后执行</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webpack-分包"><a href="#webpack-分包" class="headerlink" title="webpack 分包"></a>webpack 分包</h3><blockquote><p>webpack 中提供了方案 4.0 之前是：CommonsChunkPlugin 4.0 后是 optimization.splitChunks</p></blockquote><h3 id="引入-BFF-层"><a href="#引入-BFF-层" class="headerlink" title="引入 BFF 层"></a>引入 BFF 层</h3><blockquote><p>BFF 全称 <code>Backend For Frontend</code>，一般指在前端与服务器端搭建一层由前端维护的 Node Server 服务，具有以下好处</p></blockquote><ol><li>数据处理。对数据进行校验、清洗及格式化。使得数据更与前端契合</li><li>数据聚合。后端无需处理大量的表连接工作，第三方接口聚合工作，业务逻辑简化为各个资源的增删改查，由 BFF 层聚合各个资源的数据，后端可集中处理性能问题、监控问题、消息队列等</li><li>权限前移。在 BFF 层统一认证鉴权，后端无需做权限校验，后端可直接部署在集群内网，无需向外网暴露服务，减少了后端的服务度。</li></ol><p>但其中也有一些坏处，如以下</p><ol><li>引入复杂度，新的 BFF 服务需要一套基础设施的支持，如日志、异常、部署、监控等</li></ol><h3 id="压缩前端-js-的体积"><a href="#压缩前端-js-的体积" class="headerlink" title="压缩前端 js 的体积"></a>压缩前端 js 的体积</h3><ol><li><a href="https://github.com/terser/terser">terser (opens new window)</a>或者 <a href="https://github.com/mishoo/UglifyJS">uglify (opens new window)</a>，及流行的使用 Rust 编写的 <code>swc</code> 压缩混淆化 JS。</li><li><code>gzip</code> 或者 <code>brotli</code> 压缩，在网关处(nginx)开启</li><li>使用 <code>webpack-bundle-analyzer</code> 分析打包体积，替换占用较大体积的库，如 <code>moment</code> -&gt; <code>dayjs</code></li><li>使用支持 Tree-Shaking 的库，对无引用的库或函数进行删除，如 <code>lodash</code> -&gt; <code>lodash/es</code></li><li>对无法 Tree Shaking 的库，进行按需引入模块，如使用 <code>import Button from &#39;antd/lib/Button&#39;</code>，此处可手写 <code>babel-plugin</code> 自动完成，但不推荐</li><li>使用 babel (css 为 postcss) 时采用 <code>browserlist</code>，越先进的浏览器所需要的 polyfill 越少，体积更小</li><li>code spliting，路由懒加载，只加载当前路由的包，按需加载其余的 chunk，首页 JS 体积变小 (PS: 次条不减小总体积，但减小首页体积)</li><li>使用 webpack 的 splitChunksPlugin，把运行时、被引用多次的库进行分包，在分包时要注意避免某一个库被多次引用多次打包。此时分为多个 chunk，虽不能把总体积变小，但可提高加载性能 (PS: 此条不减小总体积，但可提升加载性能)</li></ol><h3 id="按需加载"><a href="#按需加载" class="headerlink" title="按需加载"></a>按需加载</h3><h4 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h4><p>这种方式下一个组件生成一个js文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">router</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">&#x27;../components/Login&#x27;</span>], resolve)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><a href="https://so.csdn.net/so/search?q=ES6&spm=1001.2101.3001.7020">ES6</a>的import()方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这种方式下, 没有指定webpackChunkName, 每个组件会打包成一个js文件</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">router</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;../pages/components/Login&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="string">&#x27;../pages/components/Layout&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"><span class="comment">// 这种方式下, 指定了webpakeChunkName, 多个组件会合并成一个js文件</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">router</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webpakeChunkName: demo */</span> <span class="string">&#x27;../pages/components/Login&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="title function_">import</span>(<span class="comment">/* webpakeChunkName: demo */</span> <span class="string">&#x27;../pages/components/Layout&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>webpake提供的resolve + require.ensure()</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这种情况下, 多个路由指定相同的chunkNmae会合并打包成一个js文件</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">router</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>.<span class="title function_">ensure</span>([], <span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="built_in">require</span>(<span class="string">&#x27;../pages/components/Login&#x27;</span>)), <span class="string">&#x27;demo&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;layout&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>.<span class="title function_">ensure</span>([], <span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="built_in">require</span>(<span class="string">&#x27;../pages/components/Layout&#x27;</span>)), <span class="string">&#x27;demo&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>组件的按需加载</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data () &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;helloWord&#x27;</span>: <span class="function"><span class="params">resolve</span> =&gt;</span> &#123;<span class="built_in">require</span>([<span class="string">&#x27;../components/test.vue&#x27;</span>]), resolve&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>导入组件的<a href="https://so.csdn.net/so/search?q=%E6%87%92%E5%8A%A0%E8%BD%BD&spm=1001.2101.3001.7020">懒加载</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/pages/home/index.vue&#x27;</span> <span class="comment">// es6提供的import方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; <span class="title function_">import</span>(<span class="string">&#x27;@/pages/home/index.vue&#x27;</span>) <span class="comment">// 懒加载的方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Home</span> = resolve =&gt; <span class="built_in">require</span>([<span class="string">&#x27;@/pages/home/index.vue&#x27;</span>], resolve) <span class="comment">// 懒加载的方法</span></span><br></pre></td></tr></table></figure><h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3><blockquote><p>webpack4内置了uglifyjs-webpack-plugin,在生产模式默认开启这个插件</p></blockquote><ul><li><p>css:    optimize-css-assets-webpack-plugin</p></li><li><p>js:    uglifyjs-webpack-plugin</p></li><li><p>html:    html-webpack-plugin</p></li></ul><h3 id="代码分割"><a href="#代码分割" class="headerlink" title="代码分割"></a>代码分割</h3><p>vue.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">config.<span class="property">optimization</span>.<span class="title function_">minimize</span>(<span class="literal">true</span>)<span class="comment">// 开启压缩js代码(默认true)</span></span><br><span class="line">config.<span class="property">optimization</span>.<span class="title function_">splitChunks</span>(&#123; <span class="comment">// 开启代码分割</span></span><br><span class="line">        <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CDN-优化"><a href="#CDN-优化" class="headerlink" title="CDN 优化"></a>CDN 优化</h3><blockquote><p>内网暂不考虑</p></blockquote><h3 id="gzip-加速"><a href="#gzip-加速" class="headerlink" title="gzip 加速"></a>gzip 加速</h3><blockquote><p>使用 compression-webpack-plugin 压缩代码</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">CompressionWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;compression-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是否为生产环境</span></span><br><span class="line"><span class="keyword">const</span> isProduction = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;development&#x27;</span>;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">productionSourceMap</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">configureWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 生产环境相关配置</span></span><br><span class="line">      <span class="keyword">if</span> (isProduction) &#123;</span><br><span class="line">        <span class="comment">//gzip压缩</span></span><br><span class="line">        <span class="keyword">const</span> productionGzipExtensions = [<span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;css&#x27;</span>]</span><br><span class="line">        config.<span class="property">plugins</span>.<span class="title function_">push</span>(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CompressionWebpackPlugin</span>(&#123;</span><br><span class="line">                <span class="attr">filename</span>: <span class="string">&#x27;[path].gz[query]&#x27;</span>,</span><br><span class="line">                <span class="attr">algorithm</span>: <span class="string">&#x27;gzip&#x27;</span>,</span><br><span class="line">                <span class="attr">test</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(</span><br><span class="line">                    <span class="string">&#x27;\\.(&#x27;</span> + productionGzipExtensions.<span class="title function_">join</span>(<span class="string">&#x27;|&#x27;</span>) + <span class="string">&#x27;)$&#x27;</span></span><br><span class="line">                ),</span><br><span class="line">                <span class="attr">threshold</span>: <span class="number">10240</span>, <span class="comment">// 只有大小大于该值的资源会被处理 10240</span></span><br><span class="line">                <span class="attr">minRatio</span>: <span class="number">0.8</span>, <span class="comment">// 只有压缩率小于这个值的资源才会被处理</span></span><br><span class="line">                <span class="attr">deleteOriginalAssets</span>: <span class="literal">false</span> <span class="comment">// 删除原文件</span></span><br><span class="line">            &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>还需要配置nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        gzip on;</span><br><span class="line">gzip_static on;    </span><br><span class="line">gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;</span><br><span class="line">gzip_proxied  any;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_comp_level 6;</span><br><span class="line">gzip_buffers 16 8k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="打包时-v-deep-语法报错"><a href="#打包时-v-deep-语法报错" class="headerlink" title="打包时 ::v-deep 语法报错"></a>打包时 ::v-deep 语法报错</h3><p>//报错</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">  ::v-deep .<span class="property">demo</span>&#123;</span><br><span class="line">    <span class="attr">background</span>: yellow;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>//正确</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">  :<span class="title function_">deep</span>(<span class="params">.demo</span>)&#123;</span><br><span class="line">    <span class="attr">background</span>: yellow;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="首屏加载时间"><a href="#首屏加载时间" class="headerlink" title="首屏加载时间"></a>首屏加载时间</h3><blockquote><ol><li>对于 pv 量比较高的页面，比如 b 站等流量图也比较大的，采用 ssr 采用 ssr 如何优化性能<ul><li>性能瓶颈在于 react-dom render/hydrate 和 server 端的 renderToString</li><li>尽量减少 dom 结构， 采用流式渲染，jsonString 一个对象，而不是 literal 对象</li><li>server 去获取数据</li><li>不同情况不同分析，减少主线程阻塞时间</li><li>减少不必要的应用逻辑在服务端运行</li></ul></li><li>减少依赖和包的体积<ul><li>利用 webpack 的 contenthash 缓存</li><li>重复依赖包处理，可以采用 pnpm</li><li>采用 code splitting，减少首次请求体积</li><li>减少第三方依赖的体积</li></ul></li><li>FP (First Paint) 首次绘制 FCP (First Contentful Paint) 首次内容绘制 LCP (Largest Contentful Paint) 最大内容渲染 DCL (DomContentloaded) FMP(First Meaningful Paint) 首次有效绘制 L (onLoad) TTI (Time to Interactive) 可交互时间 TBT (Total Blocking Time) 页面阻塞总时长 FID (First Input Delay) 首次输入延迟 CLS (Cumulative Layout Shift) 累积布局偏移 SI (Speed Index) 一些性能指标可以监控性能</li></ol><p>4.网络 prefetch cdn</p></blockquote><h3 id="前端-小图片转-base64"><a href="#前端-小图片转-base64" class="headerlink" title="前端　小图片转　base64"></a>前端　小图片转　base64</h3><blockquote><p>减少请求</p></blockquote><p>webpack 4.0</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// yarn add -D url-loader</span></span><br><span class="line"></span><br><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">       &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpeg|jpg|png|svg|gif)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>, <span class="comment">// 默认使用的是es6模块</span></span><br><span class="line">          <span class="attr">options</span>: &#123; <span class="comment">// 配置 </span></span><br><span class="line">            <span class="attr">esModule</span>: <span class="literal">false</span>, <span class="comment">// 使用common.js规范</span></span><br><span class="line">            <span class="attr">outputPath</span>: <span class="string">&#x27;images&#x27;</span>, <span class="comment">// 输出的文件目录</span></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;images/[contenthash:4].[ext]&#x27;</span>,</span><br><span class="line">            <span class="attr">limit</span>: <span class="number">20</span>*<span class="number">1024</span> <span class="comment">// 小于20k转为base64</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vue-cli</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (env !== <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">      config.<span class="property">module</span></span><br><span class="line">        .<span class="title function_">rule</span>(<span class="string">&#x27;images&#x27;</span>)</span><br><span class="line">        .<span class="title function_">test</span>(<span class="regexp">/\.(jpg|png|gif)$/</span>)</span><br><span class="line">        .<span class="title function_">set</span>(<span class="string">&#x27;parser&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">            <span class="attr">maxSize</span>: <span class="number">10000</span> * <span class="number">1024</span>, <span class="comment">// 10KiB 大小内的图片转base64</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="browserslist"><a href="#browserslist" class="headerlink" title="browserslist"></a><a href="https://hub.nuaa.cf/browserslist/lint/"><code>browserslist</code></a></h3><blockquote><p>根据提供的目标浏览器的环境来，智能添加css前缀，js的polyfill垫片,来兼容旧版本浏览器。避免不必要的兼容代码，以提高代码的编译质量。</p><p>Browserslist 这个东西单独是没用的，（补充: 在vue官方脚手架中，browserslist字段会被 <a href="https://links.jianshu.com/go?to=https://new.babeljs.io/docs/en/next/babel-preset-env.html">@babel/preset-env</a> 和 <a href="https://links.jianshu.com/go?to=https://github.com/postcss/autoprefixer">Autoprefixer</a> 用来确定需要转译的 JavaScript 特性和需要添加的 CSS 浏览器前缀。2019-7-22）下面的搭配的工具列表：</p><table><thead><tr><th>组件</th><th>功能</th></tr></thead><tbody><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/postcss/autoprefixer">Autoprefixer</a></td><td>postcss添加css前缀组件</td></tr><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/jonathantneal/postcss-preset-env">postcss-preset-env</a></td><td>编译预设环境 智能添加polyfill垫片代码</td></tr><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/babel/babel/tree/master/packages/babel-preset-env">Babel</a></td><td></td></tr><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/amilajack/eslint-plugin-compat">eslint-plugin-compat</a></td><td></td></tr><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/ismay/stylelint-no-unsupported-browser-features">stylelint-no-unsupported-browser-features</a></td><td></td></tr><tr><td><a href="https://links.jianshu.com/go?to=https://github.com/jonathantneal/postcss-normalize">postcss-normalize</a></td><td></td></tr><tr><td></td><td></td></tr></tbody></table><p>了解更多请看这个<a href="https://links.jianshu.com/go?to=https://github.com/browserslist/browserslist-example">list</a></p><p>或者<code>npx browserslist</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;   <span class="comment">// package.json</span></span><br><span class="line">  <span class="string">&quot;browserslist&quot;</span>: [         <span class="comment">// 注意：是一个数组对象</span></span><br><span class="line">  <span class="string">&quot;&gt; 1%&quot;</span>,</span><br><span class="line"><span class="string">&quot;last 2 versions&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>语法说明</p><p>例子    说明</p><blockquote><p>1%    全球超过1%人使用的浏览器<br>5% in US    指定国家使用率覆盖<br>last 2 versions    所有浏览器兼容到最后两个版本根据CanIUse.com追踪的版本<br>Firefox ESR    火狐最新版本<br>Firefox &gt; 20    指定浏览器的版本范围<br>not ie &lt;=8    方向排除部分版本<br>Firefox 12.1    指定浏览器的兼容到指定版本<br>unreleased versions    所有浏览器的beta测试版本<br>unreleased Chrome versions    指定浏览器的测试版本<br>since 2013    2013年之后发布的所有版本</p></blockquote><p>一些常用的查询语法</p><p>根据用户份额:</p><ul><li><code>&gt; 5%</code>: 在全球用户份额大于 <code>5%</code> 的浏览器</li><li><code>&gt; 5% in CN</code>: 在中国用户份额大于 <code>5%</code> 的浏览器</li></ul><p>根据最新浏览器版本</p><ul><li><code>last 2 versions</code>: 所有浏览器的最新两个版本</li><li><code>last 2 Chrome versions</code>: Chrome 浏览器的最新两个版本</li></ul><p>不再维护的浏览器</p><ul><li><code>dead</code>: 官方不在维护已过两年，比如 <code>IE10</code></li></ul><p>浏览器版本号</p><ul><li><code>Chrome &gt; 90</code>: Chrome 大于 90 版本号的浏览器</li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;如何删除项目中没有使用到的-package&quot;&gt;&lt;a href=&quot;#如何删除项目中没有使用到的-package&quot; class=&quot;headerlink&quot; title=&quot;如何删除项目中没有使用到的 package&quot;&gt;&lt;/a&gt;如何删除项目中没有使用到的 package&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ npm install depcheck -g&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ depcheck&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Unused&lt;/span&gt; dependencies&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* underscore&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Unused&lt;/span&gt; devDependencies&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* jasmine&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;title class_&quot;&gt;Missing&lt;/span&gt; dependencies&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;* lodash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;查看-node-modules-某一文件夹-的体积有多大&quot;&gt;&lt;a href=&quot;#查看-node-modules-某一文件夹-的体积有多大&quot; class=&quot;headerlink&quot; title=&quot;查看 node_modules(某一文件夹) 的体积有多大&quot;&gt;&lt;/a&gt;查看 node_modules(某一文件夹) 的体积有多大&lt;/h3&gt;</summary>
    
    
    
    <category term="webpack" scheme="https://wyf195075595.github.io/categories/webpack/"/>
    
    
  </entry>
  
  <entry>
    <title>fetch API 的使用</title>
    <link href="https://wyf195075595.github.io/2022/07/11/programming/javascript/fetch/"/>
    <id>https://wyf195075595.github.io/2022/07/11/programming/javascript/fetch/</id>
    <published>2022-07-11T08:55:25.000Z</published>
    <updated>2022-07-11T09:42:51.386Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Fetch API 能够执行 XMLHttpRequest 对象的所有任务，</p><p>Fetch API 则必须是异步。 </p></blockquote><h3 id="简单示例："><a href="#简单示例：" class="headerlink" title="简单示例："></a>简单示例：</h3><p>fetch()只有一个必需的参数 input。多数情况下，这个参数是要获取资源的 URL。这个方法返回 一个期约：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="title function_">fetch</span>(<span class="string">&#x27;../resource/001.txt&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取文本</span></span><br><span class="line">p.<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span></span><br><span class="line">    res.<span class="title function_">text</span>()</span><br><span class="line">).<span class="title function_">then</span>(<span class="function"><span class="params">text</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;文本:&#x27;</span>,text);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="响应状态"><a href="#响应状态" class="headerlink" title="响应状态"></a>响应状态</h3><blockquote><p>200 成功  | res.redirected 重定向为 ture 时 状态码 依然是200 不是 301</p><p>状态码在 非 200~299 时，检查对象 res.ok属性 true 则请求成功</p></blockquote><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fetch(url, options)</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ul><li>post提交字符串</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="string">&#x27;foo=bar&amp;lorem=ipsum&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> json = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br></pre></td></tr></table></figure><ul><li>提交表单数据</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> form = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;form&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/users&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: <span class="keyword">new</span> <span class="title class_">FormData</span>(form)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><strong>文件上传</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input[type=&quot;file&quot;]&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">data.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, input.<span class="property">files</span>[<span class="number">0</span>]);</span><br><span class="line">data.<span class="title function_">append</span>(<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/avatars&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: data</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><strong>直接上传二进制数据</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 Blob 或 arrayBuffer 数据放在body属性里面</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> blob = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span>   </span><br><span class="line">  canvasElem.<span class="title function_">toBlob</span>(resolve,  <span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/article/fetch/post/image&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>:  <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">body</span>: blob</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="参数配置"><a href="#参数配置" class="headerlink" title="参数配置"></a>参数配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">options 完整配置</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain;charset=UTF-8&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="literal">undefined</span>,</span><br><span class="line">  <span class="attr">referrer</span>: <span class="string">&quot;about:client&quot;</span>,</span><br><span class="line">  <span class="attr">referrerPolicy</span>: <span class="string">&quot;no-referrer-when-downgrade&quot;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;cors&quot;</span>, </span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">  <span class="attr">cache</span>: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">  <span class="attr">redirect</span>: <span class="string">&quot;follow&quot;</span>,</span><br><span class="line">  <span class="attr">integrity</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">keepalive</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">signal</span>: <span class="literal">undefined</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Headers-对象"><a href="#Headers-对象" class="headerlink" title="Headers 对象"></a>Headers 对象</h4><p>Headers 对象提供了以下方法，用来操作标头。</p><blockquote><ul><li><code>Headers.get()</code>：根据指定的键名，返回键值。</li><li><code>Headers.has()</code>： 返回一个布尔值，表示是否包含某个标头。</li><li><code>Headers.set()</code>：将指定的键名设置为新的键值，如果该键名不存在则会添加。</li><li><code>Headers.append()</code>：添加标头。</li><li><code>Headers.delete()</code>：删除标头。</li><li><code>Headers.keys()</code>：返回一个遍历器，可以依次遍历所有键名。</li><li><code>Headers.values()</code>：返回一个遍历器，可以依次遍历所有键值。</li><li><code>Headers.entries()</code>：返回一个遍历器，可以依次遍历所有键值对（<code>[key, value]</code>）。</li><li><code>Headers.forEach()</code>：依次遍历标头，每个标头都会执行一次参数函数。</li></ul></blockquote><h4 id="Response-对象"><a href="#Response-对象" class="headerlink" title="Response 对象"></a>Response 对象</h4><p><code>Response</code>对象根据服务器返回的不同类型的数据，提供了不同的读取方法。</p><blockquote><ul><li><code>response.text()</code>：得到文本字符串。</li><li><code>response.json()</code>：得到 JSON 对象。</li><li><code>response.blob()</code>：得到二进制 Blob 对象。</li><li><code>response.formData()</code>：得到 FormData 表单对象。</li><li><code>response.arrayBuffer()</code>：得到二进制 ArrayBuffer 对象。</li></ul></blockquote><p>Stream 对象只能读取一次，读取完就没了。这意味着，上面五个读取方法，只能使用一个，否则会报错。</p><ul><li><h3 id="Response-clone"><a href="#Response-clone" class="headerlink" title="Response.clone()"></a>Response.clone()</h3><p>  创建<code>Response</code>对象的副本，实现多次读取</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> response1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;flowers.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> response2 = response1.<span class="title function_">clone</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myBlob1 = <span class="keyword">await</span> response1.<span class="title function_">blob</span>();</span><br><span class="line"><span class="keyword">const</span> myBlob2 = <span class="keyword">await</span> response2.<span class="title function_">blob</span>();</span><br><span class="line"></span><br><span class="line">image1.<span class="property">src</span> = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(myBlob1);</span><br><span class="line">image2.<span class="property">src</span> = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(myBlob2);</span><br></pre></td></tr></table></figure></li><li><h3 id="Response-body-属性"><a href="#Response-body-属性" class="headerlink" title="Response.body 属性"></a>Response.body 属性</h3><p>  <code>Response.body</code>属性是 Response 对象暴露出的底层接口，返回一个 ReadableStream 对象，供用户操作</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分块读取内容，应用之一就是显示下载的进度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;flower.jpg&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> reader = response.<span class="property">body</span>.<span class="title function_">getReader</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过请求头获取文件总大小</span></span><br><span class="line"><span class="keyword">const</span> totals = response.<span class="property">headers</span>.<span class="title function_">get</span>(<span class="string">&#x27;Content-length&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> hasDone = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;done, value&#125; = <span class="keyword">await</span> reader.<span class="title function_">read</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (done) &#123;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    hasDone += value.<span class="property">length</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(hasDone / totals)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><ul><li><p><code>method</code>：HTTP 请求的方法，<code>POST</code>、<code>DELETE</code>、<code>PUT</code>都在这个属性设置。</p></li><li><p><code>headers</code>：一个对象，用来定制 HTTP 请求的标头。</p></li><li><p><code>body</code>：POST 请求的数据体。</p><blockquote><p>请求体内容 必须是 Blob、BufferSource、FormData、URLSearchParams、ReadableStream 或 String 的 实例</p></blockquote></li></ul><h5 id="cache"><a href="#cache" class="headerlink" title="cache"></a><strong>cache</strong></h5><p><code>cache</code>属性指定如何处理缓存。可能的取值如下：</p><blockquote><ul><li><code>default</code>：默认值，先在缓存里面寻找匹配的请求。</li><li><code>no-store</code>：直接请求远程服务器，并且不更新缓存。</li><li><code>reload</code>：直接请求远程服务器，并且更新缓存。</li><li><code>no-cache</code>：将服务器资源跟本地缓存进行比较，有新的版本才使用服务器资源，否则使用缓存。</li><li><code>force-cache</code>：缓存优先，只有不存在缓存的情况下，才请求远程服务器。</li><li><code>only-if-cached</code>：只检查缓存，如果缓存里面不存在，将返回504错误。</li></ul></blockquote><h5 id="mode"><a href="#mode" class="headerlink" title="mode"></a><strong>mode</strong></h5><p><code>mode</code>属性指定请求的模式。可能的取值如下：</p><blockquote><ul><li><code>cors</code>：默认值，允许跨域请求。</li><li><code>same-origin</code>：只允许同源请求。</li><li><code>no-cors</code>：请求方法只限于 GET、POST 和 HEAD，并且只能使用有限的几个简单标头，不能添加跨域的复杂标头，相当于提交表单所能发出的请求。</li></ul></blockquote><h5 id="credentials"><a href="#credentials" class="headerlink" title="credentials"></a><strong>credentials</strong></h5><p><code>credentials</code>属性指定是否发送 Cookie。可能的取值如下：</p><blockquote><ul><li><code>same-origin</code>：默认值，同源请求时发送 Cookie，跨域请求时不发送。</li><li><code>include</code>：不管同源请求，还是跨域请求，一律发送 Cookie。</li><li><code>omit</code>：一律不发送。</li></ul></blockquote><p>跨域请求发送 Cookie，需要将<code>credentials</code>属性设为<code>include</code>。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://another.com&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&quot;include&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote><h5 id="signal"><a href="#signal" class="headerlink" title="signal"></a><strong>signal</strong></h5><p><code>signal</code>属性指定一个 AbortSignal 实例，用于取消<code>fetch()</code>请求，详见下一节。</p><p><strong>keepalive</strong></p><p><code>keepalive</code>属性用于页面卸载时，告诉浏览器在后台保持连接，继续发送数据。</p><p>一个典型的场景就是，用户离开网页时，脚本向服务器提交一些用户行为的统计信息。这时，如果不用<code>keepalive</code>属性，数据可能无法发送，因为浏览器已经把页面卸载了。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onunload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&#x27;/analytics&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&quot;statistics&quot;</span>,</span><br><span class="line">    <span class="attr">keepalive</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></blockquote><h5 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a><strong>redirect</strong></h5><p><code>redirect</code>属性指定 HTTP 跳转的处理方法。可能的取值如下：</p><blockquote><ul><li><code>follow</code>：默认值，<code>fetch()</code>跟随 HTTP 跳转。</li><li><code>error</code>：如果发生跳转，<code>fetch()</code>就报错。</li><li><code>manual</code>：<code>fetch()</code>不跟随 HTTP 跳转，但是<code>response.url</code>属性会指向新的 URL，<code>response.redirected</code>属性会变为<code>true</code>，由开发者自己决定后续如何处理跳转。</li></ul></blockquote><p><strong>integrity</strong></p><p><code>integrity</code>属性指定一个哈希值，用于检查 HTTP 回应传回的数据是否等于这个预先设定的哈希值。</p><p>比如，下载文件时，检查文件的 SHA-256 哈希值是否相符，确保没有被篡改。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;http://site.com/file&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">integrity</span>: <span class="string">&#x27;sha256-abcdef&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote><h5 id="referrer"><a href="#referrer" class="headerlink" title="referrer"></a><strong>referrer</strong></h5><p><code>referrer</code>属性用于设定<code>fetch()</code>请求的<code>referer</code>标头。</p><p>这个属性可以为任意字符串，也可以设为空字符串（即不发送<code>referer</code>标头）。</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/page&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">referrer</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote><h5 id="referrerPolicy"><a href="#referrerPolicy" class="headerlink" title="referrerPolicy"></a><strong>referrerPolicy</strong></h5><p><code>referrerPolicy</code>属性用于设定<code>Referer</code>标头的规则。可能的取值如下：</p><blockquote><ul><li><code>no-referrer-when-downgrade</code>：默认值，总是发送<code>Referer</code>标头，除非从 HTTPS 页面请求 HTTP 资源时不发送。</li><li><code>no-referrer</code>：不发送<code>Referer</code>标头。</li><li><code>origin</code>：<code>Referer</code>标头只包含域名，不包含完整的路径。</li><li><code>origin-when-cross-origin</code>：同源请求<code>Referer</code>标头包含完整的路径，跨域请求只包含域名。</li><li><code>same-origin</code>：跨域请求不发送<code>Referer</code>，同源请求发送。</li><li><code>strict-origin</code>：<code>Referer</code>标头只包含域名，HTTPS 页面请求 HTTP 资源时不发送<code>Referer</code>标头。</li><li><code>strict-origin-when-cross-origin</code>：同源请求时<code>Referer</code>标头包含完整路径，跨域请求时只包含域名，HTTPS 页面请求 HTTP 资源时不发送该标头。</li><li><code>unsafe-url</code>：不管什么情况，总是发送<code>Referer</code>标头。</li></ul></blockquote><h4 id="中断请求"><a href="#中断请求" class="headerlink" title="中断请求"></a>中断请求</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fetch API 支持通过 AbortController/AbortSignal 对中断请求。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> abortController = <span class="keyword">new</span> <span class="title class_">AbortController</span>(); </span><br><span class="line"></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;../resource/test.pdf&#x27;</span>, &#123; <span class="attr">signal</span>: abortController.<span class="property">signal</span> &#125;) </span><br><span class="line"></span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;中断请求 aborted!&#x27;</span>)); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 10 毫秒后中断请求 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> abortController.<span class="title function_">abort</span>(), <span class="number">10</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 已经中断</span></span><br></pre></td></tr></table></figure><blockquote><p>fetch 不能实现上传进度这部分</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Fetch API 能够执行 XMLHttpRequest 对象的所有任务，&lt;/p&gt;
&lt;p&gt;Fetch API 则必须是异步。 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;简单示例：&quot;&gt;&lt;a href=&quot;#简单示例：&quot; class=&quot;headerlink&quot; title=&quot;简单示例：&quot;&gt;&lt;/a&gt;简单示例：&lt;/h3&gt;&lt;p&gt;fetch()只有一个必需的参数 input。多数情况下，这个参数是要获取资源的 URL。这个方法返回 一个期约：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; p = &lt;span class=&quot;title function_&quot;&gt;fetch&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;../resource/001.txt&amp;#x27;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 获取文本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;p.&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;res&lt;/span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    res.&lt;span class=&quot;title function_&quot;&gt;text&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;).&lt;span class=&quot;title function_&quot;&gt;then&lt;/span&gt;(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;params&quot;&gt;text&lt;/span&gt;=&amp;gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;variable language_&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;文本:&amp;#x27;&lt;/span&gt;,text);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;响应状态&quot;&gt;&lt;a href=&quot;#响应状态&quot; class=&quot;headerlink&quot; title=&quot;响应状态&quot;&gt;&lt;/a&gt;响应状态&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;200 成功  | res.redirected 重定向为 ture 时 状态码 依然是200 不是 301&lt;/p&gt;
&lt;p&gt;状态码在 非 200~299 时，检查对象 res.ok属性 true 则请求成功&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;语法&quot;&gt;&lt;a href=&quot;#语法&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;fetch(url, options)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="js" scheme="https://wyf195075595.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>方便快捷的实现图片裁剪</title>
    <link href="https://wyf195075595.github.io/2022/07/11/programming/jsplugin/%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA/"/>
    <id>https://wyf195075595.github.io/2022/07/11/programming/jsplugin/%E5%9B%BE%E7%89%87%E8%A3%81%E5%89%AA/</id>
    <published>2022-07-11T02:23:10.000Z</published>
    <updated>2022-07-13T06:39:29.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>JavaScript image cropper.</p><p><a href="https://fengyuanchen.github.io/cropperjs/">官网</a></p><p><a href="https://hub.nuaa.cf/fengyuanchen/cropperjs/blob/main/README.md">1.5.12文档</a></p></blockquote><h3 id="CDN-地址"><a href="#CDN-地址" class="headerlink" title="CDN 地址"></a>CDN 地址</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2.0</span></span><br><span class="line">&lt;link href=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.5.12</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/1.5.12/cropper.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/1.5.12/cropper.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/1531383-20191201202454722-1046050136.jpg" alt="img"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># cropper - 裁剪图片 - <span class="title class_">IE9</span>+</span><br><span class="line"></span><br><span class="line">## 使用 cropperjs</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Cropper</span> <span class="keyword">from</span> <span class="string">&#x27;cropperjs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;cropperjs/dist/cropper.css&#x27;</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span> = <span class="keyword">new</span> <span class="title class_">Cropper</span>(<span class="string">&#x27;被裁剪对象&#x27;</span>, <span class="string">&#x27;配置对象&#x27;</span>) <span class="comment">//返回一个cropper对象</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span>.<span class="title function_">getCroppedCanvas</span>().<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/jpeg&#x27;</span>) <span class="comment">//拿到裁剪后的base64的图片</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span>.<span class="title function_">getCropBoxData</span>();    <span class="comment">//获取裁剪框数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span>.<span class="title function_">setCropBoxData</span>();    <span class="comment">//设置裁剪框数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span>.<span class="title function_">getCanvasData</span>();      <span class="comment">//获取图片数据</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">myCropper</span>.<span class="title function_">setCanvasData</span>();      <span class="comment">//设置图片数据</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="示例：1-5-12-版本"><a href="#示例：1-5-12-版本" class="headerlink" title="示例：1.5.12 版本"></a>示例：1.5.12 版本</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/cropper.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/js/cropper.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.img-box</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: auto;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.shear</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">800px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid skyblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#previewBox</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#previewBoxRound</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid skyblue;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#previewBox</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn-clip&quot;</span>&gt;</span>裁剪<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;img-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;previewBox&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;previewBoxRound&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shear&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;testImg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/images/b2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cropper = <span class="keyword">new</span> <span class="title class_">Cropper</span>(image, &#123;</span><br><span class="line">    <span class="attr">aspectRatio</span>: <span class="number">1</span> / <span class="number">1</span>, <span class="comment">// 设置裁剪框为固定的宽高比</span></span><br><span class="line">    <span class="attr">minContainerWidth</span>: <span class="number">450</span>,   <span class="comment">//容器最小的宽度</span></span><br><span class="line">    <span class="attr">minContainerHeight</span>: <span class="number">250</span>,  <span class="comment">//容器最小的高度</span></span><br><span class="line">    <span class="attr">dragMode</span>: <span class="string">&#x27;move&#x27;</span>,         <span class="comment">//设置裁剪框为可以移动</span></span><br><span class="line">    <span class="attr">viewMode</span>: <span class="number">1</span>, <span class="comment">// </span></span><br><span class="line">    <span class="comment">// autoCrop: false,// 默认不剪切，双击图片开启剪切</span></span><br><span class="line">    <span class="attr">preview</span>:[ </span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;previewBox&#x27;</span>), <span class="comment">//设置我们需要添加实时预览的地方</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;previewBoxRound&#x27;</span>)</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">crop</span>: <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">x</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">y</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">width</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">height</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">rotate</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">scaleX</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">scaleY</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 裁剪</span></span><br><span class="line">oBtnClip.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 返回 base64位 格式图片</span></span><br><span class="line">    <span class="keyword">let</span> data = cropper.<span class="title function_">getCroppedCanvas</span>().<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/jpeg&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/wyf195075595/images/main/blog/image-20220711113054232.png" alt="image-20220711113054232"></p><h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><h4 id="配置对象"><a href="#配置对象" class="headerlink" title="配置对象"></a>配置对象</h4><blockquote><p><a href="https://github.com/fengyuanchen/cropperjs">https://github.com/fengyuanchen/cropperjs</a><br><strong>注意：第一个值为默认值</strong></p></blockquote><ul><li>viewMode 视图控制<ul><li>0 无限制</li><li>1 限制裁剪框不能超出图片的范围</li><li>2 限制裁剪框不能超出图片的范围 且图片填充模式为 cover 最长边填充</li><li>3 限制裁剪框不能超出图片的范围 且图片填充模式为 contain 最短边填充</li></ul></li><li>dragMode 拖拽图片模式<ul><li>crop 形成新的裁剪框</li><li>move 图片可移动</li><li>none 什么也没有</li></ul></li><li>initialAspectRatio 裁剪框宽高比的初始值 默认与图片宽高比相同 只有在aspectRatio没有设置的情况下可用</li><li>aspectRatio 设置裁剪框为固定的宽高比</li><li>data 之前存储的裁剪后的数据 在初始化时会自动设置 只有在autoCrop设置为true时可用</li><li>preview 预览 设置一个区域容器预览裁剪后的结果<ul><li>Element, Array (elements), NodeList or String (selector)</li></ul></li><li>responsive 在窗口尺寸调整后 进行响应式的重渲染 默认true</li><li>restore 在窗口尺寸调整后 恢复被裁剪的区域 默认true</li><li>checkCrossOrigin 检查图片是否跨域 默认true 如果是 会在被复制的图片元素上加上属性crossOrigin 并且在src上加上一个时间戳 避免重加载图片时因为浏览器缓存而加载错误</li><li>checkOrientation 检查图片的方向信息（仅JPEG图片有）默认true 在旋转图片时会对图片方向值做一些处理 以解决IOS设备上的一些问题</li><li>modal 是否显示图片和裁剪框之间的黑色蒙版 默认true</li><li>guides 是否显示裁剪框的虚线 默认true</li><li>center 是否显示裁剪框中间的 ‘+’ 指示器 默认true</li><li>highlight 是否显示裁剪框上面的白色蒙版 （很淡）默认true</li><li>background 是否在容器内显示网格状的背景 默认true</li><li>autoCrop 允许初始化时自动的裁剪图片 配合 data 使用 默认true</li><li>autoCropArea 设置裁剪区域占图片的大小 值为 0-1 默认 0.8 表示 80%的区域</li><li>movable 是否可以移动图片 默认true</li><li>rotatable 是否可以旋转图片 默认true</li><li>scalable 是否可以缩放图片（可以改变长宽） 默认true</li><li>zoomable 是否可以缩放图片（改变焦距） 默认true</li><li>zoomOnTouch 是否可以通过拖拽触摸缩放图片 默认true</li><li>zoomOnWheel 是否可以通过鼠标滚轮缩放图片 默认true</li><li>wheelZoomRatio 设置鼠标滚轮缩放的灵敏度 默认 0.1</li><li>cropBoxMovable 是否可以拖拽裁剪框 默认true</li><li>cropBoxResizable 是否可以改变裁剪框的尺寸 默认true</li><li>toggleDragModeOnDblclick 是否可以通过双击切换拖拽图片模式（move和crop）默认true 当拖拽图片模式为none时不可切换 该设置必须浏览器支持双击事件</li><li>minContainerWidth（200）、minContainerHeight（100）、minCanvasWidth（0）、minCanvasHeight（0）、minCropBoxWidth（0）、minCropBoxHeight（0） 容器、图片、裁剪框的 最小宽高 括号内为默认值 注意 裁剪框的最小高宽是相对与页面而言的 并非相对图片</li></ul><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p><strong>注意：如果方法没有被设置返回任何值，那么它会返回一个cropper的实例 因此多个方法可以使用链式写法</strong></p><ul><li>crop() 手动显示裁剪框</li><li>reset() 重置图片和裁剪框为初始状态</li><li>replace(url[, hasSameSize]) 替换图片路径并且重建裁剪框 <ul><li>url 新路径</li><li>hasSameSize 默认值false 设置为true表示新老图片尺寸一样 只需要更换路径无需重建裁剪框</li></ul></li><li>enable() 解冻 裁剪框</li><li>disable() 冻结 裁剪框</li><li>destroy() 摧毁裁剪框并且移除cropper实例</li><li>move(offsetX[, offsetY]) 移动图片指定距离 一个参数代表横纵向移动距离一样</li><li>moveTo(x[, y]) 移动图片到一个指定的点 一个参数代表横纵向移动距离一样</li><li>zoom(ratio) 缩放 ratio大于零是放大 小于零缩小</li><li>zoomTo(ratio[, pivot]) 缩放并设置中心点的位置</li><li>rotate(degree) 旋转 类似css</li><li>rotateTo(degree) 旋转到绝对角度</li><li>scale(scaleX[, scaleY])、scaleX(scaleX)、scaleY(scaleY) 缩放 一个参数代表横纵向缩放值一样</li><li>getData([rounded]) 返回裁剪区域基于原图片!原尺寸!的位置和尺寸 rounded默认为false 表示是否显示四舍五入后的数据 有了这些数据可以直接在原图上进行裁剪显示</li><li>setData(data) 改变裁剪区域基于原图的位置和尺寸 仅当viewMode 不为0时有效</li><li>getContainerData()、getImageData()、getCanvasData()、setCanvasData(data)、getCropBoxData()、setCropBoxData(data) 容器、图片容器（画布）、图片、裁剪区域相对容器的数据设置和获取</li><li>getCroppedCanvas([options]) 得到被裁剪图片的一个canvas对象 options设置这个canvas的一些数据<ul><li>width、height、minWidth、minHeight、maxWidth、maxHeight、fillColor、imageSmoothingEnabled（图片是否是光滑的 默认true）、imageSmoothingQuality（图片的质量 默认low 还有medium、high）</li></ul></li><li>setAspectRatio(aspectRatio) 改变裁剪区域的宽高比</li><li>setDragMode([mode]) 设置拖拽图片模式</li></ul><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><ul><li>ready 渲染前（图片已经被加载、cropper实例已经准备完毕）的准备工作事件 </li><li>cropstart、cropmove、cropend、crop 开始画裁剪框（或画布）、画裁剪框（或画布）的中途、裁剪框（或画布）画完、进行裁剪事件 event.detail.originalEvent、event.detail.action<ul><li>当autoCrop为true crop事件会在ready之前触发</li></ul></li><li>zoom 裁剪框缩放事件</li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;JavaScript image cropper.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://fengyuanchen.github.io/cropperjs/&quot;&gt;官网&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://hub.nuaa.cf/fengyuanchen/cropperjs/blob/main/README.md&quot;&gt;1.5.12文档&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;CDN-地址&quot;&gt;&lt;a href=&quot;#CDN-地址&quot; class=&quot;headerlink&quot; title=&quot;CDN 地址&quot;&gt;&lt;/a&gt;CDN 地址&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 2.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;link href=&lt;span class=&quot;string&quot;&gt;&amp;quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.css&amp;quot;&lt;/span&gt; rel=&lt;span class=&quot;string&quot;&gt;&amp;quot;stylesheet&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/2.0.0-alpha.1/cropper.min.js&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 1.5.12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/1.5.12/cropper.min.css&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;rel&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;stylesheet&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;language-xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;https://cdn.bootcdn.net/ajax/libs/cropperjs/1.5.12/cropper.min.js&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/wyf195075595/images/main/blog/1531383-20191201202454722-1046050136.jpg&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# cropper - 裁剪图片 - &lt;span class=&quot;title class_&quot;&gt;IE9&lt;/span&gt;+&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;## 使用 cropperjs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Cropper&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;cropperjs&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;#x27;cropperjs/dist/cropper.css&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;Cropper&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;被裁剪对象&amp;#x27;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;#x27;配置对象&amp;#x27;&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//返回一个cropper对象&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getCroppedCanvas&lt;/span&gt;().&lt;span class=&quot;title function_&quot;&gt;toDataURL&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;#x27;image/jpeg&amp;#x27;&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;//拿到裁剪后的base64的图片&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getCropBoxData&lt;/span&gt;();    &lt;span class=&quot;comment&quot;&gt;//获取裁剪框数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;setCropBoxData&lt;/span&gt;();    &lt;span class=&quot;comment&quot;&gt;//设置裁剪框数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;getCanvasData&lt;/span&gt;();      &lt;span class=&quot;comment&quot;&gt;//获取图片数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;myCropper&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;setCanvasData&lt;/span&gt;();      &lt;span class=&quot;comment&quot;&gt;//设置图片数据&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="插件" scheme="https://wyf195075595.github.io/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>有趣的工具</title>
    <link href="https://wyf195075595.github.io/2022/07/08/programming/others/%E6%9C%89%E8%B6%A3%E7%9A%84%E5%B7%A5%E5%85%B7/"/>
    <id>https://wyf195075595.github.io/2022/07/08/programming/others/%E6%9C%89%E8%B6%A3%E7%9A%84%E5%B7%A5%E5%85%B7/</id>
    <published>2022-07-08T10:23:10.000Z</published>
    <updated>2022-10-24T07:03:01.937Z</updated>
    
    <content type="html"><![CDATA[<h3 id="BaseMap"><a href="#BaseMap" class="headerlink" title="BaseMap"></a><a href="https://github.com/bojue/BaseMap">BaseMap</a></h3><blockquote><p>一个开源的机房平面图（园区，楼栋，楼层，房间）绘制工具，也可用来生成办公室、工厂、园区的平面图</p><p><a href="https://github.com/bojue/BaseMap">https://github.com/bojue/BaseMap</a></p></blockquote><h3 id="VCSLabel"><a href="#VCSLabel" class="headerlink" title="VCSLabel"></a><a href="https://github.com/pxzxj/VCSLabel">VCSLabel</a></h3><blockquote><p>一款 Intellij IDEA 插件（也可用于WebStorm、PyCharm），显示每个文件的最后提交时间和提交人。</p></blockquote><span id="more"></span><h3 id="Remind"><a href="#Remind" class="headerlink" title="Remind"></a><a href="https://github.com/luvsic3/remind">Remind</a></h3><blockquote><p>一个简单的网页版思维脑图实现，可以用在自己项目里面。</p></blockquote><p><a href="https://deskreen.com/">Deskreen</a></p><blockquote><p>一个屏幕分享软件，可以把桌面电脑的屏幕（Windows、MacOS、Linux）分享到局域网内的任意设备，只要对方有浏览器就可以接收。</p></blockquote><h3 id="iTab"><a href="#iTab" class="headerlink" title="iTab"></a><a href="https://www.itab.link/">iTab</a></h3><blockquote><p>一个浏览器插件，提供大量选项，让你定制浏览器空白标签页。（@SharingMan 投稿）</p></blockquote><h3 id="SingleFile"><a href="#SingleFile" class="headerlink" title="SingleFile"></a><a href="https://github.com/gildas-lormeau/SingleFile">SingleFile</a></h3><blockquote><p>浏览器保存网页时，默认会生成一个 HTML 文件和一个文件夹。这个插件可以将网页的所有内容保存成单个 HTML 文件，把外部 JavaScript 和 CSS 文件变成页内脚本，并把图片都改成页内 Base64 字符串。</p></blockquote><h3 id="mpv"><a href="#mpv" class="headerlink" title="mpv"></a><a href="https://mpv.io/">mpv</a></h3><blockquote><p>一个命令行的视频播放器。</p></blockquote><h3 id="window-js"><a href="#window-js" class="headerlink" title="window.js"></a><a href="https://windowjs.org/">window.js</a></h3><blockquote><p>一个跨平台的命令行工具，可以执行 JS 脚本在桌面新建一个窗口，进行 canvas 作图。我想不出它有什么用，但是挺有意思的。</p></blockquote><h3 id="SyncedStore"><a href="#SyncedStore" class="headerlink" title="SyncedStore"></a><a href="https://syncedstore.org/docs/">SyncedStore</a></h3><blockquote><p>一个 JS 的实时同步库，允许多人实时协作，基于 CRDT 方法。</p></blockquote><h3 id="LeetCode-算法训练营"><a href="#LeetCode-算法训练营" class="headerlink" title="LeetCode 算法训练营"></a><a href="https://leetcode.com/">LeetCode</a> 算法训练营</h3><blockquote><p> 是一个世界著名的在线题库，训练编程能力，其中的很多题目都是大公司的面试真题。</p></blockquote><h3 id="nginx-playground"><a href="#nginx-playground" class="headerlink" title="nginx playground"></a><a href="https://nginx-playground.wizardzines.com/">nginx playground</a></h3><blockquote><p>一个线上的 nginx 游乐场。你可以在网页上填写 nginx 配置文件，然后在线启动一个 nginx 实例。接着，你输入各种 curl 命令，与这个实例互动。</p></blockquote><h3 id="Denoflow"><a href="#Denoflow" class="headerlink" title="Denoflow"></a><a href="https://github.com/denoflow/denoflow">Denoflow</a></h3><blockquote><p>一个自动化工作流工具，只要本地安装 Deno，然后使用 Yaml 格式写一个任务配置，就能执行，相当于一个轻量级的本地化 GitHub Actions 替代品</p></blockquote><h3 id="Code2flow"><a href="#Code2flow" class="headerlink" title="Code2flow"></a><a href="https://github.com/scottrogowski/code2flow">Code2flow</a></h3><blockquote><p>Code2flow为动态编程语言生成调用图。Code2flow支持Python、JavaScript、Ruby和PHP。</p></blockquote><h3 id="JavaScript-Temporal-API-简介（英文）"><a href="#JavaScript-Temporal-API-简介（英文）" class="headerlink" title="JavaScript Temporal API 简介（英文）"></a><a href="https://blog.openreplay.com/is-it-time-for-the-javascript-temporal-api">JavaScript Temporal API 简介</a>（英文）</h3><blockquote><p>Temporal API 是 JavaScript 下一代日期和时间的标准库，目前是第三阶段提案。本文对这个 API 做一个简单介绍。</p></blockquote><h3 id="MockingBird"><a href="#MockingBird" class="headerlink" title="MockingBird"></a><a href="https://github.com/babysor/MockingBird">MockingBird</a></h3><blockquote><p>一个基于机器学习的中文语音克隆库，只要5秒的原始讲话录音，就能克隆该声音，让它说出任意给定文本。</p></blockquote><h3 id="Paint-of-Persia"><a href="#Paint-of-Persia" class="headerlink" title="Paint of Persia"></a><a href="https://dunin.itch.io/ptop">Paint of Persia</a></h3><blockquote><p>这个工具让你可以在屏幕任何一个窗口，框选一部分内容，将其变成像素画。</p></blockquote><h3 id="五笔输入法7天速成"><a href="#五笔输入法7天速成" class="headerlink" title="五笔输入法7天速成"></a><a href="https://wubi.yantuz.cn/">五笔输入法7天速成</a></h3><blockquote><p>作者结合自身学习经历，收集整理了五笔输入法相关知识，按照每天2-3小时的时间，结合五笔练习小游戏，预计一周时间即可掌握五笔输入法。</p></blockquote><h3 id="妹子图片"><a href="#妹子图片" class="headerlink" title="妹子图片"></a>妹子图片</h3><blockquote><p><a href="https://bak.yantuz.cn:8000/mmPic/">https://bak.yantuz.cn:8000/mmPic/</a>    随机返回一张妹子图片</p></blockquote><h3 id="国产文档工具-ShowDoc"><a href="#国产文档工具-ShowDoc" class="headerlink" title="国产文档工具 ShowDoc"></a>国产文档工具 <a href="https://www.showdoc.com.cn/">ShowDoc</a></h3><blockquote><p>它主要解决这样一个问题：小团队或者个人开发者，希望有一个开箱即用的文档中心，能够快速地生成、展示、搜索文档，还能够多人协作，划分权限，并且还有桌面的和手机的客户端。 如果你也有这种需求，不妨试试看这个工具。</p></blockquote><p>它的代码完全开源，放在 GitHub 上面，是一个热门项目，超过9000颗星。可以放心使用。</p><p>如果你自己有服务器，安装很简单，一行命令就可以了，底层的 Docker 容器自动帮你部署好。Windows 环境也支持，但是安装稍微复杂一点。启动服务后，本机浏览器访问 localhost:4999 ，你就拥有了一个全功能的文档中心，就这么简单。只要绑定域名，就能对外访问。</p><p>网站首页上，默认有几个示例仓库，可以点进去看看。</p><p>除了常用的文档库和电子表格库，它还有两个技术文档的特色功能。一个是 API 文档库，解析源码注释，自动生成 API 的说明文档。另一个是数据字典文档，解析数据库结构，自动生成数据库每张表的说明文档。</p><p>为了配合软件 API 文档的生成，官方还特别开发了一个独立服务 RunApi，用来模拟定制 HTTP 请求，完成接口测试、自动流程测试、Mock 数据等功能，类似于 Postman，但它是完全免费的。并且，在调试 API 的过程中，自动生成文档到 Showdoc，极大提高团队的效率。平时调试 API 接口，也可以使用这个服务。</p><p>所有 ShowDoc 文档仓库都可以使用 API 自动创建和批量导入，也可以导出为 Word 或 Markdown 文件。每个团队除了公共仓库，成员个人还可以新建私密仓库。</p><p>如果你没有或者不想维护自己的服务器，可以使用官方的在线版托管文档，不超过5人的团队都是免费的。对于那些自己架设服务的团队，官方提供收费技术支持，帮助维护。</p><h3 id="如何优化-node-项目的-docker-镜像"><a href="#如何优化-node-项目的-docker-镜像" class="headerlink" title="如何优化 node 项目的 docker 镜像"></a><a href="https://juejin.cn/post/6991689670027542564">如何优化 node 项目的 docker 镜像</a></h3><blockquote><p>作者介绍如何一步步将一个 Node.js 应用的 Docker 镜像文件，从 1.06G 压缩到 73.4M，构建速度从 29.6 秒提高到 1.3 秒</p></blockquote><h3 id="KubeSphere"><a href="#KubeSphere" class="headerlink" title="KubeSphere"></a>KubeSphere</h3><blockquote><p>你可能听说过 K8s，它是谷歌公司的开源软件 Kubernetes（K 和 s 之间有8个字母），作用就是调度和管理容器。</p><p>Docker 的标志非常像一艘集装箱船，K8s 则像是一个控制轮船的舵盘，这就是两者的关系。想象一下，成百上千个 Docker 容器分布在不同的公有云、私有云以及边缘节点，整合成一个云原生应用，在同一个平台进行统一调度和运维，这就是 K8s 的作用。</p><p>本周向大家介绍一个开源的国产 K8s 管理平台：KubeSphere。</p><p>它的最大特点就是易用和高度产品化，有一个体验非常优秀的控制台，让不熟悉容器的用户以非常低的成本上手，快速使用各种高级功能。整个操作过程都是向导式图形化的 UI。</p></blockquote><p>本周向大家介绍一个开源的国产 K8s 管理平台：<a href="https://github.com/kubesphere/kubesphere">KubeSphere</a>。</p><p>它的最大特点就是易用和高度产品化，有一个体验非常优秀的控制台，让不熟悉容器的用户以非常低的成本上手，快速使用各种高级功能。整个操作过程都是向导式图形化的 UI。</p><p>如果你们公司想尝试 K8s，或者你个人想学习 K8s，建议可以从 KubeSphere 入手。它可以快速<a href="https://github.com/kubesphere/kubekey#quick-start">从零搭建 K8s 集群</a>，也可以只用两条命令，就部署到现有的 K8s 之上。官方有<a href="https://demo.kubesphere.io/login">线上 Demo</a>（账号：demo1 / Demo123），以及友好的<a href="https://kubesphere.com.cn/docs/">中文文档</a>、<a href="https://www.bilibili.com/video/BV15g411F7pj">云原生视频教程</a> 和<a href="https://kubesphere.com.cn/forum/">开发者社区</a>。</p><h3 id="Composable"><a href="#Composable" class="headerlink" title="Composable"></a><a href="https://www.composable.art/">Composable</a></h3><blockquote><p>一个网页版的矢量图作图工具。</p></blockquote><h3 id="html2json"><a href="#html2json" class="headerlink" title="html2json"></a><a href="https://github.com/Jxck/html2json">html2json</a></h3><blockquote><p>一个 JS 库，可以将 HTML 代码与 JSON 代码互相转换。</p></blockquote><h3 id="My-Room-in-3D"><a href="#My-Room-in-3D" class="headerlink" title="My Room in 3D"></a><a href="https://my-room-in-3d.vercel.app/">My Room in 3D</a></h3><blockquote><p>使用 Three.js 制作的网页 3D 家居模型，非常炫酷。</p></blockquote><h3 id="Video2WebP"><a href="#Video2WebP" class="headerlink" title="Video2WebP"></a><a href="https://video2webp.mattj.io/">Video2WebP</a></h3><blockquote><p>一个网页服务，可以将短视频转成 WebP 动画图片，用来替代 GIF 动画。</p></blockquote><h3 id="7-css"><a href="#7-css" class="headerlink" title="7.css"></a><a href="https://github.com/khang-nd/7.css">7.css</a></h3><blockquote><p>一个 CSS 框架，用来复现 Windows 7 的 UI。</p></blockquote><h3 id="“一证通查”电话卡服务"><a href="#“一证通查”电话卡服务" class="headerlink" title="“一证通查”电话卡服务"></a><a href="https://getsimnum.caict.ac.cn/">“一证通查”电话卡服务</a></h3><blockquote><p>工信部推出的官方服务，查看个人名下登记了多少张电话卡。</p></blockquote><h3 id="Open-Meteo"><a href="#Open-Meteo" class="headerlink" title="Open Meteo"></a><a href="https://open-meteo.com/en/docs">Open Meteo</a></h3><blockquote><p>免费的天气 API 服务，可以获取全球任意地点的天气数据，以 JSON 格式返回。</p></blockquote><h3 id="Terrain2STL"><a href="#Terrain2STL" class="headerlink" title="Terrain2STL"></a><a href="https://jthatch.com/Terrain2STL/">Terrain2STL</a></h3><blockquote><p>该网站可以获取全球任何一个地点的地形图，生成 STL 文件供下载，你可以用 3D 打印机把地形打印成模型。</p></blockquote><h3 id="jDeploy"><a href="#jDeploy" class="headerlink" title="jDeploy"></a><a href="https://www.jdeploy.com/">jDeploy</a></h3><blockquote><p>这个工具可以将 Jar 包转变为可执行文件，发布到 NPM 上面。这样的话，在各个平台的安装和更新，就变得非常容易。</p></blockquote><h3 id="电力设施地图"><a href="#电力设施地图" class="headerlink" title="电力设施地图"></a><a href="https://openinframap.org/">电力设施地图</a></h3><blockquote><p>该网站的地图显示全世界电力设施的位置，包括电厂、变电站、输电线等等，甚至还有风力发电机。</p></blockquote><h3 id="CRDT-资料库"><a href="#CRDT-资料库" class="headerlink" title="CRDT 资料库"></a><a href="https://wiki.nikitavoloboev.xyz/distributed-systems/crdt">CRDT 资料库</a></h3><blockquote><p>CRDT 是一种多人协同算法，常用于多人同时编辑文档时的同步。这个网页收集各种 CRDT 相关资料。</p></blockquote><h3 id="Unredacter"><a href="#Unredacter" class="headerlink" title="Unredacter"></a><a href="https://github.com/bishopfox/unredacter">Unredacter</a></h3><blockquote><p>这个工具可以还原马赛克图片的原始内容。</p></blockquote><h3 id="优秀的国产-SaaS-服务-Authing"><a href="#优秀的国产-SaaS-服务-Authing" class="headerlink" title="优秀的国产 SaaS 服务 Authing"></a>优秀的国产 SaaS 服务 <a href="https://www.authing.cn/">Authing</a></h3><blockquote><p>简单说，Authing 做的是身份管理的基础设施，国外叫做”身份云”（IDaaS），集成了用户认证、用户管理、权限、安全治理等众多功能。他们有1000多个 API，你能想到的身份服务场景，几乎都支持。</p></blockquote><h4 id="点击底部的微信图标，扫描弹出的二维码登录。实现起来只需要三步，基本上不用写代码。"><a href="#点击底部的微信图标，扫描弹出的二维码登录。实现起来只需要三步，基本上不用写代码。" class="headerlink" title="点击底部的微信图标，扫描弹出的二维码登录。实现起来只需要三步，基本上不用写代码。"></a>点击底部的微信图标，扫描弹出的二维码登录。实现起来只需要三步，基本上不用写代码。</h4><ol><li>在微信开放平台，创建一个网站应用；</li><li>在 Authing 后台，填写上一步拿到的 App ID 和 App Secret；</li><li>登录链接指向他们托管的登录页。（他们有组件和 JS SDK，你也可以自己写前端页面。）</li></ol><h4 id="现在，他们将这些功能免费开放。-具体来说，永久免费版分成三类。"><a href="#现在，他们将这些功能免费开放。-具体来说，永久免费版分成三类。" class="headerlink" title="现在，他们将这些功能免费开放。 具体来说，永久免费版分成三类。"></a>现在，他们将这些功能免费开放。 具体来说，永久免费版分成三类。</h4><ol><li>B2C（C 端应用）：每月不超过8000个活跃用户（MAU）。</li><li>B2B（B 端应用）：每月不超过200个活跃用户。</li><li>B2E（内部应用，内部员工登录）：不超过10个员工。</li></ol><h3 id="HertzBeat-赫兹跳动"><a href="#HertzBeat-赫兹跳动" class="headerlink" title="HertzBeat 赫兹跳动"></a><a href="https://hertzbeat.com/">HertzBeat 赫兹跳动</a></h3><blockquote><p>一个国产的开源云监控系统，具有监控网站、PING 连通性、端口可用性、数据库、操作系统、阈值告警等功能，告警通知可通过邮件、微信、钉钉、飞书等发送</p></blockquote><h3 id="PHP-之道"><a href="#PHP-之道" class="headerlink" title="PHP 之道"></a><a href="https://learnku.com/docs/php-the-right-way/PHP8.0">PHP 之道</a></h3><blockquote><p>面向新人的免费 PHP 教程，这是中文版，此外还有英文原版。</p></blockquote><h3 id="Golang-学习资源大全"><a href="#Golang-学习资源大全" class="headerlink" title="Golang 学习资源大全"></a><a href="https://github.com/LearnGolang/LearnGolang">Golang 学习资源大全</a></h3><blockquote><p>一个中国开发者整理的 Go 语言学习资源。</p></blockquote><h3 id="前端食堂技术周刊"><a href="#前端食堂技术周刊" class="headerlink" title="前端食堂技术周刊"></a><a href="https://github.com/Geekhyt/weekly">前端食堂技术周刊</a></h3><blockquote><p>一个中文的前端技术周刊</p></blockquote><h3 id="LinkDOM"><a href="#LinkDOM" class="headerlink" title="LinkDOM"></a><a href="https://github.com/WebReflection/linkedom">LinkDOM</a></h3><blockquote><p>JSDOM 的一个替代品，使用 JavaScript 解析 HTML 字符串，返回一个 DOM 对象，在上面实现了 DOM 接口。它比 JSDOM 体积更小、速度更快、内存占用更少。</p></blockquote><h3 id="SVG-Waves"><a href="#SVG-Waves" class="headerlink" title="SVG Waves"></a><a href="https://www.softr.io/tools/svg-wave-generator">SVG Waves</a></h3><blockquote><p>一个在线工具，可以生成 SVG 的波浪图片，各种细节都可以定制。</p></blockquote><h3 id="Web-Browser-Engineering"><a href="#Web-Browser-Engineering" class="headerlink" title="Web Browser Engineering"></a><a href="https://browser.engineering/index.html">Web Browser Engineering</a></h3><blockquote><p>一本正在写作中的开源书籍，介绍如何使用1000行 Python 代码，实现一个简单的网页浏览器。</p></blockquote><h3 id="SimpleLogin"><a href="#SimpleLogin" class="headerlink" title="SimpleLogin"></a><a href="https://simplelogin.io/">SimpleLogin</a></h3><blockquote><p>一个开源的邮箱别名服务，提供真实邮箱的别名，可以接收和回复邮件，所有邮件都会转到你的真实邮箱。它的免费版允许15个别名，但是代码开源，可以自托管</p></blockquote><h3 id="Pkg"><a href="#Pkg" class="headerlink" title="Pkg"></a><a href="https://github.com/vercel/pkg">Pkg</a></h3><blockquote><p>这个工具可以将 Node.js 应用打包成单个可执行文件，没有安装 Node.js 也能执行。</p></blockquote><h3 id="Duck-DNS"><a href="#Duck-DNS" class="headerlink" title="Duck DNS"></a><a href="https://www.duckdns.org/">Duck DNS</a></h3><blockquote><p>一个免费的动态域名服务，允许用户注册 duckdns.org 的子域名，并且随时更新所指向的 IP 地址。</p></blockquote><h3 id="BeeWare"><a href="#BeeWare" class="headerlink" title="BeeWare"></a><a href="https://beeware.org/">BeeWare</a></h3><blockquote><p>一个 Python 跨平台图形框架，号称只要写一次代码，就能编译出 iOS、Android、Windows、MacOS、Linux、Web 等各种平台的图形界面应用程序。</p></blockquote><h3 id="周刊一直以来，都在推广国产软件和开源软件，向大家介绍好用的工具。今天的主角就是一款国产的研发协同工具-Apipost。"><a href="#周刊一直以来，都在推广国产软件和开源软件，向大家介绍好用的工具。今天的主角就是一款国产的研发协同工具-Apipost。" class="headerlink" title="周刊一直以来，都在推广国产软件和开源软件，向大家介绍好用的工具。今天的主角就是一款国产的研发协同工具 Apipost。"></a>周刊一直以来，都在推广国产软件和开源软件，向大家介绍好用的工具。今天的主角就是一款国产的研发协同工具 <a href="https://www.apipost.cn/?utm_source=10031">Apipost</a>。</h3><blockquote><p>互联网软件现在主要采用 REST 模式（后端提供数据接口，前端消费接口），优点是前后端分离，可以各自独立开发，缺点是项目越大，前后端协同越困难。</p><p>Apipost 的定位就是，基于协作的 API 研发协同工具，为开发者提供不止于 API 文档、调试、Mock 等大量功能。你可以把它看成 Postman + Swagger + Mock 的集成体。</p><p>// 只有商业项目的团队超过15人，或者需要私有部署时，才会收费。</p></blockquote><h3 id="Linux-系统管理入门"><a href="#Linux-系统管理入门" class="headerlink" title="Linux 系统管理入门"></a><a href="https://abarrak.gitbook.io/linux-sysops-handbook">Linux 系统管理入门</a></h3><blockquote><p>长篇的学习笔记，介绍 Linux 系统管理入门操作。</p></blockquote><p><a href="https://developers.googleblog.com/2022/04/what-is-black-and-white-and-read-all.html">Noto emoji</a></p><blockquote><p>谷歌推出的一款单色的 Emoji 表情字体，共有3000多个符号，优点是体积小。如果希望表情符号在各平台都是同一个样子，可以用它。</p></blockquote><p><a href="https://index.php.flmngr.com/">Flmngr</a></p><blockquote><p>这个项目就是单个 index.php 文件，只要把该文件放在图片目录之中，就能作为图库访问。</p></blockquote><p><a href="https://www.bookmark.style/">bookmark.style</a></p><blockquote><p>一个开源工具，可以将任意链接转换生成可分享的图片。</p></blockquote><p><a href="https://earth2day.com/TheWall/">动画云图</a></p><blockquote><p>该网站把气象云图的变化，以动画形式表现出来，并且可以按各个国家查看。</p></blockquote><p><a href="https://q.shanyue.tech/engineering/">前端工程化三十八讲</a></p><blockquote><p>网友原创的前端工程化的三十八篇短文章，每篇大概五百字左右，涵盖了开发、打包、运维等众多内容。</p></blockquote><h3 id="Postgres-js"><a href="#Postgres-js" class="headerlink" title="Postgres.js"></a><a href="https://github.com/porsager/postgres">Postgres.js</a></h3><blockquote><p>Node.js 和 Deno 的 PostgreSQL 数据库操作库。</p></blockquote><h3 id="exping"><a href="#exping" class="headerlink" title="exping"></a><a href="https://exping.world/">exping</a></h3><blockquote><p>一款手机 App，用来为地图添加个性化标记，并提供多种地图模版供导出分享。</p></blockquote><h3 id="Geeker-Admin"><a href="#Geeker-Admin" class="headerlink" title="Geeker Admin"></a><a href="https://github.com/HalseySpicy/Geeker-Admin">Geeker Admin</a></h3><blockquote><p>一款基于 Vue3 的后台管理系统。<br>Geeker Admin，是基于 Vue3.2、TypeScript、Vite2、Pinia、Element-Plus 开发的一套后台管理模板</p></blockquote><ol><li><p>在线预览 👀<br> Link：<a href="http://admin.spicyboy.cn/">http://admin.spicyboy.cn</a></p></li><li><p>Git 仓库地址 (欢迎 Star⭐)<br> Gitee：<a href="https://gitee.com/laramie/Geeker-Admin">https://gitee.com/laramie/Geeker-Admin</a></p><p> GitHub：<a href="https://github.com/HalseySpicy/Geeker-Admin">https://github.com/HalseySpicy/Geeker-Admin</a></p></li><li><p>🔨🔨🔨 项目功能<br> 🍓 使用 Vue3.2 开发（单文件组件 ＜script setup＞）<br> 🍇 采用 vite2 作为项目开发工具（配置了 Gzip 打包、图片压缩、跨域代理、打包预览工具……）<br> 🍉 整个项目集成了 TypeScript （完全是为了想学习 🤣）<br> 🍍 使用 pinia 替代 Vuex，轻量、简单、易用（香啊~🤤）<br> 🍎 使用 TypeScript 对 Axios 整个二次封装 （全局错误拦截、常用请求封装、重复请求取消……）<br> 🍌 对表格的所有操作基本都封装成了 Hooks （表格搜索、重置、查询、分页、多选、单条数据操作、文件上传、下载、格式化单元格）<br> 🍐 基于 Element 二次封装 Pro-Table 组件 ，表格页面全部传成配置项 Columns<br> 🍊 支持 Element 组件大小切换，i18n 国际化（暂时没配置所有文件，根据项目自行配置）<br> 🍉 使用 prettier 统一格式化代码，集成 Eslint 代码校验规范<br> 🥭 使用 vue-router 进行路由权限拦截、按钮权限设置<br> 🍈 使用 keep-alive 对整个页面进行缓存，支持多级嵌套页面（路由里可配置）<br> 🥥 常用自定义指令开发（复制、水印、拖拽、节流、防抖、长按……）</p></li></ol><h3 id="Musicn"><a href="#Musicn" class="headerlink" title="Musicn"></a><a href="https://github.com/zonemeen/musicn">Musicn</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">下载高质量音乐的命令行工具，支持 flac、mp3 格式。</span><br><span class="line">使用</span><br><span class="line">$ musicn 稻香</span><br><span class="line"># or</span><br><span class="line">$ msc 稻香</span><br><span class="line"></span><br><span class="line">分页搜索，默认第一页</span><br><span class="line">$ msc 周杰伦 --number 2</span><br><span class="line"># or</span><br><span class="line">$ msc 周杰伦 -n 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">附带歌词下载(默认是不附带):</span><br><span class="line"></span><br><span class="line">$ msc 稻香 --lyric</span><br><span class="line"># or</span><br><span class="line">$ msc 稻香 -l</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">指定文件夹路径下载(默认是当前路径):</span><br><span class="line"></span><br><span class="line">$ msc 稻香 --path ../music</span><br><span class="line"># or</span><br><span class="line">$ msc 稻香 -p ../music</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">网易云服务切换, 默认咪咕</span><br><span class="line"></span><br><span class="line">msc xxx --service netease</span><br></pre></td></tr></table></figure><h3 id="Packages-for-Linux-and-Unix"><a href="#Packages-for-Linux-and-Unix" class="headerlink" title="Packages for Linux and Unix"></a><a href="https://pkgs.org/">Packages for Linux and Unix</a></h3><blockquote><p>该网站返回各种 Linux 发行版下符合搜索条件的模块。</p></blockquote><h3 id="vscode-dev-介绍"><a href="#vscode-dev-介绍" class="headerlink" title="vscode.dev 介绍"></a><a href="https://code.visualstudio.com/blogs/2021/10/20/vscode-dev">vscode.dev 介绍</a></h3><blockquote><p>官方介绍 VS Code 编辑器的线上版 vscode.dev。</p></blockquote><h3 id="DownKyi"><a href="#DownKyi" class="headerlink" title="DownKyi"></a><a href="https://github.com/leiurayer/downkyi">DownKyi</a></h3><blockquote><p>Windows 桌面软件，用来下载 B 站视频，支持批量下载，支持8K、HDR、杜比视界，提供工具箱（音视频提取、去水印等）</p></blockquote><h3 id="Regular-Expression-Tester-and-Visualizer"><a href="#Regular-Expression-Tester-and-Visualizer" class="headerlink" title="Regular Expression Tester and Visualizer"></a><a href="https://devtoolcafe.com/tools/regex">Regular Expression Tester and Visualizer</a></h3><blockquote><p>在线的正则表达式测试和可视化工具。</p></blockquote><h3 id="RedwoodJS"><a href="#RedwoodJS" class="headerlink" title="RedwoodJS"></a><a href="https://redwoodjs.com/">RedwoodJS</a></h3><blockquote><p>一个前后端一体的 JS 框架，有点类似 Next.js，GitHub 超过一万颗星。它的 API 看上去很简洁优雅。</p></blockquote><h3 id="前端部署十五章"><a href="#前端部署十五章" class="headerlink" title="前端部署十五章"></a><a href="https://q.shanyue.tech/deploy/">前端部署十五章</a></h3><blockquote><p>一组系列文章，介绍如何部署前端项目。从最原始的部署方案过渡到 Docker 与 Kubernetes，逐步优化，另有配套的视频讲解。</p></blockquote><h3 id="生产力软件-FlowUs（中文名”息流”）"><a href="#生产力软件-FlowUs（中文名”息流”）" class="headerlink" title="生产力软件 FlowUs（中文名”息流”）"></a>生产力软件 <a href="https://flowus.cn/login?code=FLOWUS&promotionChannel=WX_RYF_01">FlowUs</a>（中文名”息流”）</h3><blockquote><p>FlowUs 提供三大功能：文档+表格+网盘。 通过”块编辑器”，它们可以作为内容块（block）自由组合，满足不同场景：写笔记、做主页、管理项目、共享文件、多人协作……</p><p>它的网盘功能很强，完全可以只当作网盘使用：上传文件不限制大小，也不限速，支持 Office 文件和视频的预览。免费帐户的空间是 2GB，年费99元的专业版则是不限制容量。</p></blockquote><h3 id="NocoBase"><a href="#NocoBase" class="headerlink" title="NocoBase"></a><a href="https://www.nocobase.com/">NocoBase</a></h3><blockquote><p>一款开源的无代码平台，无需编程，用它搭建自己的协作平台、管理系统，只需要几分钟时间。</p></blockquote><h3 id="pnpm"><a href="#pnpm" class="headerlink" title="pnpm"></a><a href="https://pnpm.io/zh/">pnpm</a></h3><blockquote><p>一个老牌的 node.js 包管理器，支持 npm 的所有功能，用来替代 npm。它的模块是全局存储，每个项目内部使用硬链接，所以很省空间，而且安装速度快。</p></blockquote><h3 id="Webcamtaxi"><a href="#Webcamtaxi" class="headerlink" title="Webcamtaxi"></a><a href="https://www.webcamtaxi.com/en/">Webcamtaxi</a></h3><blockquote><p>Youtube 上面有很多24小时的摄像头直播频道，可以看到世界各地的实时状况。该网站就是收集这些频道，按照地区和内容分类。</p></blockquote><h3 id="Lemon-design"><a href="#Lemon-design" class="headerlink" title="Lemon design"></a><a href="https://lemondesign.dev/">Lemon design</a></h3><blockquote><p>一个基于 Tailwind CSS 的 React 组件库。文档可调式十分友好</p></blockquote><h3 id="濒危声音博物馆"><a href="#濒危声音博物馆" class="headerlink" title="濒危声音博物馆"></a><a href="http://savethesounds.info/">濒危声音博物馆</a></h3><blockquote><p>这个网站很有意思，收藏一些消失的声音，比如打字机的击键声、点阵式打印机的打印声、Windows 95 的开机声。</p></blockquote><h3 id="公共钢琴"><a href="#公共钢琴" class="headerlink" title="公共钢琴"></a><a href="https://pianos.pub/">公共钢琴</a></h3><blockquote><p>这个网站收集了全世界 8,391 架公共钢琴，你可以输入一个地点，看看离你最近的公共钢琴在哪里，过去弹奏。</p></blockquote><h3 id="Go-Ldap-Admin"><a href="#Go-Ldap-Admin" class="headerlink" title="Go-Ldap-Admin"></a><a href="http://ldapdoc.eryajf.net/">Go-Ldap-Admin</a></h3><blockquote><p>一个国产软件，基于 Go+Vue 实现的 openLDAP 管理后台，可以作为打通 IM（钉钉、企业微信、飞书）与支持 ldap 认证的应用的桥梁。</p></blockquote><h3 id="GitLens"><a href="#GitLens" class="headerlink" title="GitLens"></a><a href="https://www.gitkraken.com/gitlens/features">GitLens</a></h3><blockquote><p>一个 VSCode 的插件，大大增强了 Git 集成，可以在编辑器里面执行很多 Git 操作，特别适合多人合作的项目。</p></blockquote><h3 id="全球海底光缆"><a href="#全球海底光缆" class="headerlink" title="全球海底光缆"></a><a href="https://he.net/3d-map/">全球海底光缆</a></h3><blockquote><p>这个网页提供了一个互动式的地球，上面有全世界海底光缆和骨干机房的位置。</p></blockquote><h3 id="极光"><a href="#极光" class="headerlink" title="极光"></a><a href="https://www.drawaurora.com/">极光</a></h3><blockquote><p>这个网页构造了一个极地的背景，让你手绘动态的极光效果。</p></blockquote><h3 id="波斯波利斯"><a href="#波斯波利斯" class="headerlink" title="波斯波利斯"></a><a href="https://persepolis.getty.edu/">波斯波利斯</a></h3><blockquote><p>波斯波利斯是古代波斯帝国的首都，位于现在的伊朗，已经是一片废墟了。这个页面还原了这座雄伟的帝国都城，重建了 3D 街景，让你在其中漫游。</p></blockquote><h3 id="Dufs"><a href="#Dufs" class="headerlink" title="Dufs"></a><a href="https://github.com/sigoden/dufs">Dufs</a></h3><blockquote><p>一个简单的文件服务器，可以提供静态文件服务，支持上传、下载、搜索、访问控制、webdav 等功能。</p></blockquote><h3 id="地球时钟"><a href="#地球时钟" class="headerlink" title="地球时钟"></a><a href="https://earthclock.cwandt.com/">地球时钟</a></h3><blockquote><p>这个网站使用卫星照片，显示当前的数字时间，还提供 Mac 屏保程序下载。</p></blockquote><h3 id="合同示范文本库"><a href="#合同示范文本库" class="headerlink" title="合同示范文本库"></a><a href="https://cont.12315.cn/">合同示范文本库</a></h3><blockquote><p>国家市场监管总局开发的一个数据库，面向社会免费开放，提供常见合同的示范文本。</p></blockquote><h3 id="Patterns-dev"><a href="#Patterns-dev" class="headerlink" title="Patterns.dev"></a><a href="https://www.patterns.dev/">Patterns.dev</a></h3><blockquote><p>一本英文的原创教程，免费在线阅读和下载。它使用 JavaScript 语言为例，详细介绍每一种设计模式。最后演示如何将这些设计模式运用于 React 框架，搭建 Web 应用。</p></blockquote><h3 id="Termpair"><a href="#Termpair" class="headerlink" title="Termpair"></a><a href="https://github.com/cs01/termpair">Termpair</a></h3><blockquote><p>一个远程终端控制工具。用户在一个终端窗口中，启动这个工具，它会返回一个链接，使用这个链接就能在其它计算机的浏览器里面，控制原始的终端窗口。</p></blockquote><h3 id="n8n"><a href="#n8n" class="headerlink" title="n8n"></a><a href="https://n8n.io/">n8n</a></h3><blockquote><p>一个开源的工作流自动化工具，可以通过图形界面，选择200多种服务，组成一个工作流。</p></blockquote><h3 id="ext2image"><a href="#ext2image" class="headerlink" title="ext2image"></a><a href="https://text2image.jaychen.fun/">ext2image</a></h3><blockquote><p>一个将文字或代码转换成图片的网页工具，可定制项多，主题、水印、阴影特效等都能自定义。</p></blockquote><h3 id="rfc-fyi"><a href="#rfc-fyi" class="headerlink" title="rfc.fyi"></a><a href="https://rfc.fyi/">rfc.fyi</a></h3><blockquote><p>一个 RFC（计算机协议标准）的分类引擎，根据关键字搜索，返回所有相关的 RFC 标准。</p></blockquote><h3 id="ahooks"><a href="#ahooks" class="headerlink" title="ahooks"></a><a href="https://ahooks.js.org/zh-CN/">ahooks</a></h3><blockquote><p>阿里开源的 React Hooks 仓库，提供了非常多实用的 Hook。</p></blockquote><h3 id="Appwrite"><a href="#Appwrite" class="headerlink" title="Appwrite"></a><a href="https://appwrite.io/">Appwrite</a></h3><blockquote><p>一个开源的通用后端解决方案，号称是 Firebase 的替代品。架设以后就会自动提供数据读写的 REST 接口，供各种应用连接</p></blockquote><h3 id="Hooks-Admin"><a href="#Hooks-Admin" class="headerlink" title="Hooks Admin"></a><a href="https://github.com/HalseySpicy/Hooks-Admin">Hooks Admin</a></h3><blockquote><p>基于 React18、React-Router v6、React-Hooks、Redux、TypeScript、Vite2、Ant-Design 搭建的一套后台管理界面，这里有 <a href="http://hooks.spicyboy.cn/">Demo</a>。</p></blockquote><h3 id="Hooks-Admin-1"><a href="#Hooks-Admin-1" class="headerlink" title="Hooks Admin"></a><a href="https://github.com/HalseySpicy/Hooks-Admin">Hooks Admin</a></h3><blockquote><p>基于 React18、React-Router v6、React-Hooks、Redux、TypeScript、Vite2、Ant-Design 搭建的一套后台管理界面，这里有 <a href="http://hooks.spicyboy.cn/">Demo</a>。</p></blockquote><h3 id="前端程序员的命令行入门"><a href="#前端程序员的命令行入门" class="headerlink" title="前端程序员的命令行入门"></a><a href="https://www.joshwcomeau.com/javascript/terminal-for-js-devs/">前端程序员的命令行入门</a></h3><blockquote><p>一篇英语的科普长文，向前端程序员介绍命令行的基本用法，适合不熟悉命令行、用惯 Windows 的同学。</p></blockquote><h3 id="Pointless"><a href="#Pointless" class="headerlink" title="Pointless"></a><a href="https://github.com/kkoomen/pointless">Pointless</a></h3><blockquote><p>一个开源的网页画板，可以当作白板使用，效果不错。</p></blockquote><h3 id="PyScript"><a href="#PyScript" class="headerlink" title="PyScript"></a><a href="https://pyscript.net/">PyScript</a></h3><blockquote><p>PyScript 是一个用于网页的 Python 解释器，能够在网页上运行 Python 代码。</p></blockquote><h3 id="Vue-js-挑战"><a href="#Vue-js-挑战" class="headerlink" title="Vue.js 挑战"></a><a href="https://cn-vuejs-challenges.netlify.app/">Vue.js 挑战</a></h3><blockquote><p>一个 Vue.js 题库，可以选择不同的难度进行不同程度的练习。</p></blockquote><h3 id="合成器原理（Learning-Synths）"><a href="#合成器原理（Learning-Synths）" class="headerlink" title="合成器原理（Learning Synths）"></a><a href="https://learningsynths.ableton.com/zh-Hans">合成器原理</a>（Learning Synths）</h3><blockquote><p>一篇声音合成的教程，通过一个个小例子，介绍声音合成器的原理，有中文版。</p></blockquote><h3 id="Bud"><a href="#Bud" class="headerlink" title="Bud"></a><a href="https://github.com/livebud/bud">Bud</a></h3><blockquote><p>一个 Go 语言的全栈 Web 框架，用它来写网站的前端和后端，编译成一个二进制可执行文件，放到服务器上就能直接运行，不需要其他文件。</p></blockquote><h3 id="图片占位符"><a href="#图片占位符" class="headerlink" title="图片占位符"></a>图片占位符</h3><blockquote><p><a href="%5Bplace.dog%5D(https://place.dog/)">狗狗占位符</a></p><p><a href="https://placekitten.com/">猫猫占位符</a></p></blockquote><h3 id="code-server"><a href="#code-server" class="headerlink" title="code-server"></a><a href="https://github.com/coder/code-server">code-server</a></h3><blockquote><p>一个 VS Code 远程服务的封装，可以安装在任意机器上面，然后就能在浏览器使用 VS Code。你还能使用 <a href="https://docs.blink.sh/advanced/code">Blink</a> 作为 iOS 客户端，在 iPhone/iPad 上编码</p></blockquote><h3 id="Logto"><a href="#Logto" class="headerlink" title="Logto"></a><a href="https://logto.io/">Logto</a></h3><blockquote><p>一个开源的用户身份认证和登录注册软件。</p></blockquote><h3 id="bore"><a href="#bore" class="headerlink" title="bore"></a><a href="https://github.com/ekzhang/bore">bore</a></h3><p>一个非常简单的命令行工具，让你轻松将内网端口暴露到互联网上。</p><h3 id="HowToStartOpenSource"><a href="#HowToStartOpenSource" class="headerlink" title="HowToStartOpenSource"></a><a href="https://github.com/eryajf/HowToStartOpenSource">HowToStartOpenSource</a></h3><blockquote><p>一份作者自己整理的 GitHub 中文使用指南，初学者可以用来学习怎么使用 GitHub</p></blockquote><h3 id="cssbuttons"><a href="#cssbuttons" class="headerlink" title="cssbuttons"></a><a href="https://github.com/eludadev/css-buttons">cssbuttons</a></h3><blockquote><p>这个仓库收集各种按钮的 CSS 代码，大部分都带有动画效果。</p></blockquote><h3 id="PPZ-vscode"><a href="#PPZ-vscode" class="headerlink" title="PPZ.vscode"></a><a href="https://marketplace.visualstudio.com/items?itemName=ppz.ppz">PPZ.vscode</a></h3><blockquote><p>一个 VSCode 插件，提供操作数据库的图形界面，支持多种数据库。</p><p>目前暂不考虑支持非关系型数据库，比如 MongoDB，推荐使用 <a href="https://github.com/mongodb-js/vscode">MongoDB for VS Code</a>（官方出品，质量有保证、功能全面）</p></blockquote><h3 id="Sunmao"><a href="#Sunmao" class="headerlink" title="Sunmao"></a><a href="https://sunmao-ui.com/dev.html">Sunmao</a></h3><blockquote><p>开发低代码工具的<a href="https://github.com/smartxworks/sunmao-ui">开源框架</a>，内置图形化编辑器，允许开发者封装任何 React 组件，放到编辑器里面使用，参见<a href="https://juejin.cn/post/7122368174808367141">介绍文章</a></p></blockquote><h3 id="JSONT"><a href="#JSONT" class="headerlink" title="JSONT"></a><a href="https://www.jsont.run/">JSONT</a></h3><blockquote><p>在线的 JSON 格式化工具，方便展示、查看、编辑 JSON 数据。类似工具还有 <a href="https://jsonhero.io/">JSON Hero</a>。</p></blockquote><h3 id="tlops"><a href="#tlops" class="headerlink" title="tlops"></a><a href="https://github.com/iamtsm/tl-ops-manage">tlops</a></h3><blockquote><p>一个基于 openresty 的轻量级 API 网关，方便 Web 应用的搭建，支持负载均衡、健康检查、服务熔断、服务限流、可视化管理等众多功能。</p></blockquote><h3 id="React-技术揭秘"><a href="#React-技术揭秘" class="headerlink" title="React 技术揭秘"></a><a href="https://react.iamkasong.com/">React 技术揭秘</a></h3><blockquote><p>原创的中文电子书，解读 React 源码，并有<a href="https://github.com/BetaSu/big-react">配套的代码仓库</a>，自己从零实现 React 18。</p></blockquote><h3 id="Java-学习-面试指南"><a href="#Java-学习-面试指南" class="headerlink" title="Java 学习 + 面试指南"></a><a href="https://javaguide.cn/">Java 学习 + 面试指南</a></h3><blockquote><p>一个收集 Java 核心知识和面试指南的网站，有<a href="https://github.com/Snailclimb/JavaGuide">开源仓库</a>。</p></blockquote><h3 id="lofi-co"><a href="#lofi-co" class="headerlink" title="lofi.co"></a><a href="https://lofi.co/">lofi.co</a></h3><blockquote><p>一个用于放松的背景音乐网站，网页背景是一个咖啡馆，配有各种动画效果（比如驶过的汽车、飘下的落叶、雨点等等），还可以进入咖啡馆室内。</p></blockquote><h3 id="网易云后台接口"><a href="#网易云后台接口" class="headerlink" title="网易云后台接口"></a>网易云后台接口</h3><blockquote><p>网易云音乐 NodeJS 版 API</p><p><a href="https://binaryify.github.io/NeteaseCloudMusicApi">https://binaryify.github.io/NeteaseCloudMusicApi</a></p></blockquote><h3 id="Lorien"><a href="#Lorien" class="headerlink" title="Lorien"></a><a href="https://github.com/mbrlabs/Lorien">Lorien</a></h3><blockquote><p>一个绘图 + 笔记的画布软件，可以导出 SVG 格式。底层使用 Godot 游戏引擎，图形性能非常好，支持 Linux/Mac/Windows 系统。</p></blockquote><h3 id="Emoji-Kitchen"><a href="#Emoji-Kitchen" class="headerlink" title="Emoji Kitchen"></a><a href="https://emojikitchen.dev/">Emoji Kitchen</a></h3><blockquote><p>各种表情图片</p></blockquote><h3 id="Git-Command-Explorer"><a href="#Git-Command-Explorer" class="headerlink" title="Git Command Explorer"></a><a href="https://gitexplorer.com/">Git Command Explorer</a></h3><blockquote><p>一个网页小工具，你选择要使用的 Git 命令，它给出这个命令具体的使用格式。</p></blockquote><h3 id="CSS-手电筒"><a href="#CSS-手电筒" class="headerlink" title="CSS 手电筒"></a><a href="https://voussoir.net/writing/browser_in_the_dark">CSS 手电筒</a></h3><blockquote><p>这个网页演示了使用 CSS 实现各种手电筒效果。</p></blockquote><h3 id="旧安卓手机用作-Web-服务器（英文）"><a href="#旧安卓手机用作-Web-服务器（英文）" class="headerlink" title="旧安卓手机用作 Web 服务器（英文）"></a><a href="https://lbrito1.github.io/blog/2020/02/repurposing-android.html">旧安卓手机用作 Web 服务器</a>（英文）</h3><blockquote><p>很多人家里都有旧的安卓手机，本文演示如何将这些手机变成 Web 服务器，架设内网服务。</p></blockquote><h3 id="vdoing-template"><a href="#vdoing-template" class="headerlink" title="vdoing-template"></a><a href="https://github.com/eryajf/vdoing-template">vdoing-template</a></h3><blockquote><p>Vuepress 的一个模板库，通过 GitHub Actions，直接构建出一个静态博客。</p></blockquote><h3 id="多邻国粤语课程"><a href="#多邻国粤语课程" class="headerlink" title="多邻国粤语课程"></a><a href="https://zh-cn.duolingo.com/course/zh-HK/zh/%E5%AD%A6%E4%B9%A0-%E4%B8%AD%E6%96%87%EF%BC%88%E7%B2%A4%E8%AF%AD%EF%BC%89">多邻国粤语课程</a></h3><blockquote><p>多邻国最新推出的免费粤语课程。</p></blockquote><h3 id="UISET"><a href="#UISET" class="headerlink" title="UISET"></a><a href="https://uiset.com/">UISET</a></h3><blockquote><p>收集免费 UI 资源（插图、图标、颜色等）的网站，可以通过 <a href="https://github.com/uiset-com/uiset">GitHub 仓库</a>提交新资源。</p></blockquote><h3 id="Maccy"><a href="#Maccy" class="headerlink" title="Maccy"></a><a href="https://maccy.app/">Maccy</a></h3><blockquote><p>一个 MacOS 系统的开源软件，可以保存系统剪贴版的历史，查看每一次复制粘贴的内容。</p></blockquote><h3 id="ITraffic-monitor-for-mac"><a href="#ITraffic-monitor-for-mac" class="headerlink" title="ITraffic-monitor-for-mac"></a><a href="https://github.com/foamzou/ITraffic-monitor-for-mac">ITraffic-monitor-for-mac</a></h3><blockquote><p>实时显示 MacOS 每个进程的网络速率，适配明暗两个主题。</p></blockquote><h3 id="卡通猫生成器"><a href="#卡通猫生成器" class="headerlink" title="卡通猫生成器"></a><a href="https://uchinoko-maker.jp/">卡通猫生成器</a></h3><blockquote><p>一个网页小工具，可以生成卡通猫图片，猫的每个部分都可以定制。</p></blockquote><h3 id="XLite"><a href="#XLite" class="headerlink" title="XLite"></a><a href="https://github.com/x2bool/xlite">XLite</a></h3><blockquote><p>这个工具可以将 Excel 表格文件导入 SQLite，使用 SQL 进行查询。</p></blockquote><h3 id="像素动物"><a href="#像素动物" class="headerlink" title="像素动物"></a><a href="https://kottke.org/22/03/pixel-birds-and-other-animals">像素动物</a></h3><blockquote><p>一个日本艺术家贴出了，他绘制的大量像素动物，非常有趣。</p></blockquote><h3 id="根据文字描述生成图片"><a href="#根据文字描述生成图片" class="headerlink" title="根据文字描述生成图片"></a>根据文字描述生成图片</h3><blockquote><p><a href="https://openai.com/blog/dall-e-now-available-in-beta/">OpenAI 公司</a>的人工智能模型 <a href="https://openai.com/dall-e-2/">DALL·E 2</a></p><p>它可以根据文本生成图片，有点像童话里面的”魔镜”。你告诉魔镜想看什么，它就向你展示什么。目前的<a href="https://www.163.com/dy/article/HCSNPB8F05118HA4.html">价格</a>是15美元生成460张图片，平均每张图0.03美元（约为人民币两角）。</p></blockquote><h3 id="Tauri"><a href="#Tauri" class="headerlink" title="Tauri"></a><a href="https://www.levminer.com/blog/tauri-vs-electron">Tauri</a></h3><blockquote><p>Electron 是目前跨平台桌面软件的首选开发框架，Tauri 则是最近出现的一个替代品，试图解决前者的最大痛点：体积臃肿，资源占用高。</p></blockquote><h3 id="Vanblog"><a href="#Vanblog" class="headerlink" title="Vanblog"></a><a href="https://vanblog.mereith.com/">Vanblog</a></h3><blockquote><p>一款个人博客系统，支持众多功能，采用 Docker 部署，带有管理后台，前台为静态页面，提供自动 HTTPS 证书。</p></blockquote><h3 id="BgSub"><a href="#BgSub" class="headerlink" title="BgSub"></a><a href="https://bgsub.cn/">BgSub</a></h3><blockquote><p>一个网页工具，可以自动抠图，替换背景颜色或背景图片，完全在本地完成，不会上传服务器。</p></blockquote><h3 id="MiraPlayer"><a href="#MiraPlayer" class="headerlink" title="MiraPlayer"></a><a href="https://github.com/miravideo/FFCreator">MiraPlayer</a></h3><blockquote><p>一个基于腾讯视频库 <a href="https://github.com/tnfe/FFCreator/blob/master/README.zh-CN.md">FFCreator</a> 封装的前端视频播放器和编辑器组件。</p></blockquote><h3 id="据意查句"><a href="#据意查句" class="headerlink" title="据意查句"></a><a href="https://wantquotes.net/">据意查句</a></h3><blockquote><p>清华大学推出了一个搜索引擎，根据关键词搜索相关的诗文。比如搜索”郁闷”，就会返回各种跟郁闷相关的句子，参见<a href="https://www.163.com/dy/article/HDHB76F30511DSSR.html">介绍文章</a>。</p><p>另有一个汉语的<a href="https://wantwords.net/">近义词搜索引擎</a>。</p></blockquote><h3 id="必应壁纸"><a href="#必应壁纸" class="headerlink" title="必应壁纸"></a><a href="https://bing.wdbyte.com/">必应壁纸</a></h3><blockquote><p>周刊介绍过一个抓取必应每日壁纸的 <a href="https://github.com/niumoo/bing-wallpaper">GitHub Actions 模板</a>，作者现在将其做成静态网站，可以在线浏览和下载壁纸，每日更新。</p></blockquote><h3 id="音频博客《代码英雄》"><a href="#音频博客《代码英雄》" class="headerlink" title="音频博客《代码英雄》"></a><a href="https://linux.cn/talk/clh/">音频博客《代码英雄》</a></h3><blockquote><p>红帽公司精心制作的一个音频播客。”Linux 中国”得到授权进行了文本翻译，将其带给国内的开发者。可惜的是，<a href="https://www.redhat.com/en/command-line-heroes">英文版</a>已经更新到第九季，中文翻译才到第四季。</p></blockquote><h3 id="iPhone-的-Safari-浏览器插件（中文）"><a href="#iPhone-的-Safari-浏览器插件（中文）" class="headerlink" title="iPhone 的 Safari 浏览器插件（中文）"></a><a href="https://www.ifanr.com/app/1445597">iPhone 的 Safari 浏览器插件</a>（中文）</h3><blockquote><p>iPhone 手机和 iPad 平板的 Safari 浏览器，可以安装插件。本文介绍14个常用插件。</p></blockquote><h3 id="Mutant-Standard"><a href="#Mutant-Standard" class="headerlink" title="Mutant Standard"></a><a href="https://mutant.tech/">Mutant Standard</a></h3><p>一套有点另类的 Emoji 图案，将近1000个符号。如果你想要不一样的 Emoji，可以试试。</p><h3 id="Markdeep"><a href="#Markdeep" class="headerlink" title="Markdeep"></a><a href="https://casual-effects.com/markdeep/">Markdeep</a></h3><blockquote><p>一种扩展的 Markdown 格式，添加了很多功能，同时还是一个 JS 脚本，只要放入网页，就能自动把这种格式的文本文件渲染成 HTML 页面。</p></blockquote><h3 id="NESBox"><a href="#NESBox" class="headerlink" title="NESBox"></a><a href="https://nesbox.xianqiao.wang/">NESBox</a></h3><blockquote><p>一个开源的游戏平台，支持多人在线，一起玩 NES（俗称 FC 红白机） 游戏，有 web 版和桌面版。目前已经有很多游戏，预计有 1000+ 游戏，参考这篇<a href="https://juejin.cn/post/7136883410819088397">介绍文章</a>。</p></blockquote><p><a href="https://cleanupphotos.com/">Cleanup Photos</a></p><blockquote><p>这个网页工具可以清除照片上不要的物体。用户上传照片以后，框选不需要的物体，系统会自动清除这些物体，用背景填充照片。</p></blockquote><h3 id="OurBoard"><a href="#OurBoard" class="headerlink" title="OurBoard"></a><a href="https://www.ourboard.io/">OurBoard</a></h3><blockquote><p>一个在线白板，你创建一个房间，把网址分享给其他人，大家就可以在一块网页白板上共同涂写。</p></blockquote><h3 id="Nginx-Proxy-Manager"><a href="#Nginx-Proxy-Manager" class="headerlink" title="Nginx Proxy Manager"></a><a href="https://nginxproxymanager.com/">Nginx Proxy Manager</a></h3><blockquote><p>Nginx 经常用作反向代理，这个工具为反向代理提供一个 Web 管理界面。</p></blockquote><h3 id="随机的谷歌街景"><a href="#随机的谷歌街景" class="headerlink" title="随机的谷歌街景"></a><a href="https://randomstreetview.com/">随机的谷歌街景</a></h3><blockquote><p>这个网站随机展示谷歌街景的照片，世界各地都有</p></blockquote><h3 id="中华遗嘱网"><a href="#中华遗嘱网" class="headerlink" title="中华遗嘱网"></a><a href="https://www.will.org.cn/">中华遗嘱网</a></h3><blockquote><p>这个网站提供遗嘱的知识和服务，属于半官方组织，收费不低，但是比自己去找专业服务还是方便和便宜一点。</p></blockquote><h3 id="websocat"><a href="#websocat" class="headerlink" title="websocat"></a><a href="https://github.com/vi/websocat">websocat</a></h3><blockquote><p>一个命令行的 WebSocket 工具，用来跟 websocket 服务器互动，以及在本地架设 WebSocket 服务。</p></blockquote><h3 id="Rocket-Chat"><a href="#Rocket-Chat" class="headerlink" title="Rocket.Chat"></a><a href="https://github.com/RocketChat/Rocket.Chat">Rocket.Chat</a></h3><blockquote><p>一款开源的聊天软件，服务端、桌面端、手机 App 都提供。</p></blockquote><h3 id="mpv-1"><a href="#mpv-1" class="headerlink" title="mpv"></a><a href="https://mpv.io/">mpv</a></h3><blockquote><p>一个跨平台的命令行视频播放器。</p></blockquote><h3 id="中国铁路地图"><a href="#中国铁路地图" class="headerlink" title="中国铁路地图"></a><a href="http://cnrail.geogv.org/zhcn/">中国铁路地图</a></h3><blockquote><p>这个网站可以查看全国铁路的路线图，另有<a href="https://www.openrailwaymap.org/">全世界的铁路地图</a>。</p></blockquote><h3 id="ERNIE-ViLG-文生图"><a href="#ERNIE-ViLG-文生图" class="headerlink" title="ERNIE-ViLG 文生图"></a><a href="https://wenxin.baidu.com/moduleApi/ernieVilg">ERNIE-ViLG 文生图</a></h3><blockquote><p>百度 AI 引擎”文心大模型”的文生图功能，输入中文句子，输出相应的图片，类似于 DALL-E 和 Stable Diffusion。</p><p>另外，还可以看看一个同样功能的英文服务 <a href="https://art.elbo.ai/">Elbo</a>。</p></blockquote><h3 id="kvass"><a href="#kvass" class="headerlink" title="kvass"></a><a href="https://github.com/maxmunzel/kvass">kvass</a></h3><blockquote><p>一个轻便的键值对存储工具，将数据存在本机。可以命令行使用，也可以对外提供 HTTP 接口，分享网址给其他人。</p></blockquote><h3 id="text-watermark"><a href="#text-watermark" class="headerlink" title="text-watermark"></a><a href="https://github.com/zengkan0703/text-watermark">text-watermark</a></h3><blockquote><p>一个 npm 模块，借助零宽度字符，在文本里面插入（或解码）不可见的文字水印。</p></blockquote><h3 id="proxy-web-storage"><a href="#proxy-web-storage" class="headerlink" title="proxy-web-storage"></a><a href="https://github.com/KID-joker/proxy-web-storage">proxy-web-storage</a></h3><blockquote><p>一个 JS 库，用 proxy 封装了 localStorage 和 sessionStorage。除了常规的数据存储，可支持事件监听和设置过期时间。</p></blockquote><h3 id="TinyTeX"><a href="#TinyTeX" class="headerlink" title="TinyTeX"></a><a href="https://yihui.org/tinytex/">TinyTeX</a></h3><blockquote><p>学术排版系统 Tex Live 的简化版本，只有100多兆，支持中文。</p></blockquote><h3 id="Keet"><a href="#Keet" class="headerlink" title="Keet"></a><a href="https://keet.io/">Keet</a></h3><blockquote><p>一个点对点聊天的软件，不需要服务器，可以进行多人的视频和文字的加密对话。</p></blockquote><h3 id="中文播客榜"><a href="#中文播客榜" class="headerlink" title="中文播客榜"></a><a href="https://xyzrank.com/">中文播客榜</a></h3><blockquote><p>查看中文播客的排名和热门节目，数据取自小宇宙和 Apple Podcast，每日更新</p></blockquote><h3 id="编程字体"><a href="#编程字体" class="headerlink" title="编程字体"></a><a href="https://www.programmingfonts.org/">编程字体</a></h3><blockquote><p>这个网站提供了近百种编程字体，可以切换查看效果，以供选择。</p></blockquote><h3 id="redis-shake"><a href="#redis-shake" class="headerlink" title="redis-shake"></a><a href="https://github.com/alibaba/RedisShake">redis-shake</a></h3><blockquote><p>阿里巴巴开源的工具，用于 Redis 实例间数据迁移与清洗。</p></blockquote><h3 id="Pagefind"><a href="#Pagefind" class="headerlink" title="Pagefind"></a><a href="https://pagefind.app/">Pagefind</a></h3><blockquote><p>一个静态全文搜索工具，专供静态网站使用，不需要服务器就能完成全站搜索，参见<a href="https://cloudcannon.com/blog/introducing-pagefind/">介绍文章</a>。</p></blockquote><h3 id="pcl-js"><a href="#pcl-js" class="headerlink" title="pcl.js"></a><a href="https://pcljs.org/zh-cn/">pcl.js</a></h3><blockquote><p>这个工具将大型 C++ 库 Point Cloud Library (PCL) 编译为 WebAssembly，运行在浏览器中，供 JavaScript 调用。它实现了大量相关的通用算法和数据结构，涉及点云获取、滤波、特征提取、识别、可视化等功能。</p></blockquote><h3 id="识典古籍"><a href="#识典古籍" class="headerlink" title="识典古籍"></a><a href="https://www.shidianguji.com/">识典古籍</a></h3><blockquote><p>北京大学和抖音公益合作的古籍数字化平台。目前可免费搜索390部经典古籍，共计3000多万字。未来三年将陆续完成一万种古籍的智能化整理工作。</p></blockquote><h3 id="程序员的实用深度学习"><a href="#程序员的实用深度学习" class="headerlink" title="程序员的实用深度学习"></a><a href="https://course.fast.ai/">程序员的实用深度学习</a></h3><blockquote><p>fast.ai 推出的最新线上公开课，向程序员介绍如何做一个深度学习项目，有视频和详细的课程资料，另有<a href="https://github.com/fastai/course22/">课程仓库</a>。</p></blockquote><h3 id="免费音乐播放器"><a href="#免费音乐播放器" class="headerlink" title="免费音乐播放器"></a><a href="https://github.com/maotoumao/MusicFree">免费音乐播放器</a></h3><blockquote><p>一个插件化、定制化、无广告的免费音乐播放器，目前只支持Android和Harmony OS。</p><p>如果需要了解后续进展可以关注b站账号：<a href="https://space.bilibili.com/12866223">不想睡觉猫头猫</a></p></blockquote><h3 id="程序员音乐"><a href="#程序员音乐" class="headerlink" title="程序员音乐"></a><a href="https://musicforprogramming.net/latest/">程序员音乐</a></h3><blockquote><p>一个另类的背景音乐网站，精选了一些歌曲和专辑，适合编程时当作背景音乐。它的界面完全采用字符终端样式。</p></blockquote><h3 id="vue-fabric-editor"><a href="#vue-fabric-editor" class="headerlink" title="vue-fabric-editor"></a><a href="https://github.com/nihaojob/vue-fabric-editor">vue-fabric-editor</a></h3><blockquote><p>开源的、基于 fabric.js 和 Vue 的图片编辑器，可自定义字体、素材、设计模板。</p></blockquote><h3 id="谷歌拼图"><a href="#谷歌拼图" class="headerlink" title="谷歌拼图"></a><a href="https://artsandculture.google.com/experiment/puzzle-party/EwGBPZlIzv0KRw">谷歌拼图</a></h3><blockquote><p>谷歌推出的网页的拼图小游戏，支持多人一起拼。</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;BaseMap&quot;&gt;&lt;a href=&quot;#BaseMap&quot; class=&quot;headerlink&quot; title=&quot;BaseMap&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/bojue/BaseMap&quot;&gt;BaseMap&lt;/a&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;一个开源的机房平面图（园区，楼栋，楼层，房间）绘制工具，也可用来生成办公室、工厂、园区的平面图&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/bojue/BaseMap&quot;&gt;https://github.com/bojue/BaseMap&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;VCSLabel&quot;&gt;&lt;a href=&quot;#VCSLabel&quot; class=&quot;headerlink&quot; title=&quot;VCSLabel&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/pxzxj/VCSLabel&quot;&gt;VCSLabel&lt;/a&gt;&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;一款 Intellij IDEA 插件（也可用于WebStorm、PyCharm），显示每个文件的最后提交时间和提交人。&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="other" scheme="https://wyf195075595.github.io/categories/other/"/>
    
    
    <category term="plugin" scheme="https://wyf195075595.github.io/tags/plugin/"/>
    
  </entry>
  
  <entry>
    <title>拖拽</title>
    <link href="https://wyf195075595.github.io/2022/07/08/programming/javascript/%E6%8B%96%E6%8B%BD/"/>
    <id>https://wyf195075595.github.io/2022/07/08/programming/javascript/%E6%8B%96%E6%8B%BD/</id>
    <published>2022-07-08T00:23:10.000Z</published>
    <updated>2022-07-11T01:59:42.254Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/a0cf52da3d9d414fa7f1403d8ea8e586.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVGFyYV9fXw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><blockquote><p>可拖拽元素　设置　draggable: true.可绑定监听事件 dragstart、drag、dragend</p><p>放置区域：可绑定监听事件 dragenter、dragover、dragleave、drop</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 可拖拽原素</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span> <span class="attr">src</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// 可放置区域</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;layer-photos-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> box = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;layer-photos-box&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> oTest = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拖拽开始</span></span><br><span class="line">oTest.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragstart&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 此处保存 拖拽元素等信息</span></span><br><span class="line">    event.<span class="property">dataTransfer</span>.<span class="title function_">setData</span>(<span class="string">&quot;text&quot;</span>,<span class="string">`<span class="subst">$&#123;event.target.id&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragstart&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 拖拽中</span></span><br><span class="line">oTest.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;drag&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 拖拽结束</span></span><br><span class="line">oTest.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragend&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragend&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 进入可放置区域</span></span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragenter&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragenter&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 离开可放置区域</span></span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragleave&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragleave&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 悬浮在放置区域</span></span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;dragover&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dragover&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 放置到可放置区域</span></span><br><span class="line">box.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drop&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取到可拖拽元素的信息，并添加到可拖拽区域</span></span><br><span class="line">    <span class="keyword">var</span> id = event.<span class="property">dataTransfer</span>.<span class="title function_">getData</span>(<span class="string">&quot;text&quot;</span>)</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()</span><br><span class="line">    e.<span class="property">target</span>.<span class="title function_">appendChild</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(id))</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;drop&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>drop事件跟dragover事件都调用了preventDefault事件来阻止默认事件的发送，那是因为浏览器默认不能在拖拽以后进行放置，所以需要我们手动的取消默认事件。</p><p>这三个事件必须要有： dragstart、dragover、drop</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/a0cf52da3d9d414fa7f1403d8ea8e586.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVGFyYV9fXw==,size_20,color_FFFFFF,t_70,g_se,x_16&quot; alt=&quot;在这里插入图片描述&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;可拖拽元素　设置　draggable: true.可绑定监听事件 dragstart、drag、dragend&lt;/p&gt;
&lt;p&gt;放置区域：可绑定监听事件 dragenter、dragover、dragleave、drop&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// 可拖拽原素&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;test&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;xxx&amp;quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;draggable&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// 可放置区域&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&amp;quot;layer-photos-box&amp;quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="js" scheme="https://wyf195075595.github.io/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>cookie的操作</title>
    <link href="https://wyf195075595.github.io/2022/06/29/programming/javascript/cookie%E7%9A%84%E6%93%8D%E4%BD%9C/"/>
    <id>https://wyf195075595.github.io/2022/06/29/programming/javascript/cookie%E7%9A%84%E6%93%8D%E4%BD%9C/</id>
    <published>2022-06-29T08:23:10.000Z</published>
    <updated>2022-07-11T02:02:52.471Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>直接上操作：</p></blockquote><p>以前的方式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;a=3; max-age=-1&quot;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Cookie_Store_API">“Cookie Store API”</a></p><span id="more"></span><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CookieStore/delete"><code>CookieStore.delete()</code></a></li></ul><p>该<code>delete()</code>方法删除具有给定名称或选项对象的 cookie，它返回一个<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>在删除完成时解析的 cookie。</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CookieStore/get"><code>CookieStore.get()</code></a></li></ul><p>该<code>get()</code>方法获取具有给定名称或选项对象的单个 cookie，它返回一个<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>解析单个 cookie 详细信息的 cookie。</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CookieStore/getAll"><code>CookieStore.getAll()</code></a></li></ul><p>该<code>getAll()</code>方法获取所有匹配的 cookie，它返回一个<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>用 cookie 列表解析的。</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CookieStore/set"><code>CookieStore.set()</code></a></li></ul><p>该<code>set()</code>方法使用给定的名称和值或选项对象设置一个 cookie，它返回一个<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>在设置 cookie 时解析的。</p><p>事件：</p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/CookieStore/change_event"><code>change</code></a></p><p><code>change</code>对任何 cookie 进行更改时都会触发该事件。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> day = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">cookieStore.<span class="title function_">set</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;cookie1&quot;</span>,</span><br><span class="line">  <span class="attr">value</span>: <span class="string">&quot;cookie1-value&quot;</span>,</span><br><span class="line">  <span class="attr">expires</span>: <span class="title class_">Date</span>.<span class="title function_">now</span>() + day,</span><br><span class="line">  <span class="attr">domain</span>: <span class="string">&quot;example.com&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(</span><br><span class="line">  <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;It worked!&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;It failed: &quot;</span>, reason);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>还可以使用第三方的 js 库 js-cookie</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;直接上操作：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以前的方式：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 读取&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;cookie&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// 设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable language_&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;property&quot;&gt;cookie&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&amp;quot;a=3; max-age=-1&amp;quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Cookie_Store_API&quot;&gt;“Cookie Store API”&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="js" scheme="https://wyf195075595.github.io/categories/js/"/>
    
    
    <category term="cookie" scheme="https://wyf195075595.github.io/tags/cookie/"/>
    
  </entry>
  
  <entry>
    <title>浏览器中实现剪切板的内容操作</title>
    <link href="https://wyf195075595.github.io/2022/06/28/programming/htmlcss/%E5%89%AA%E5%88%87%E6%9D%BF%E6%93%8D%E4%BD%9C/"/>
    <id>https://wyf195075595.github.io/2022/06/28/programming/htmlcss/%E5%89%AA%E5%88%87%E6%9D%BF%E6%93%8D%E4%BD%9C/</id>
    <published>2022-06-28T07:40:10.000Z</published>
    <updated>2022-07-11T02:01:50.110Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>浏览器允许 JavaScript 脚本读写剪贴板，自动复制或粘贴内容。主要是用来操作文本、图片</p></blockquote><h3 id="有三种方式可操作剪切板"><a href="#有三种方式可操作剪切板" class="headerlink" title="有三种方式可操作剪切板"></a>有三种方式可操作剪切板</h3><ul><li>Document.execCommand() 【此API已从W3C标准中删除】</li><li>Clipboard API （推荐）</li><li>事件监听 copy、paste、cut</li></ul><span id="more"></span><h4 id="1、Docement-execCommand"><a href="#1、Docement-execCommand" class="headerlink" title="1、Docement.execCommand"></a>1、Docement.execCommand</h4><p>它支持复制、粘贴、剪切三个操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>)（复制）</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;cut&#x27;</span>)（剪切）</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;paste&#x27;</span>)（粘贴）</span><br></pre></td></tr></table></figure><p>通用页面布局，引用了layui</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 页面</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>输入框<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;my-input&quot;</span>   <span class="attr">placeholder</span>=<span class="string">&quot;请输入标题&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>文本域<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;my-textarea&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-textarea&quot;</span>&gt;</span>默认值<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-label&quot;</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: flex;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;copy&quot;</span>&gt;</span>复制<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;paste&quot;</span>&gt;</span>粘贴<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cut&quot;</span>&gt;</span>剪切<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;copy2&quot;</span>&gt;</span>图文复制<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;read&quot;</span>&gt;</span>读取剪切板<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-radius layui-btn-normal&quot;</span> <span class="attr">id</span>=<span class="string">&quot;selection&quot;</span>&gt;</span>获取选中内容<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>操作示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取元素</span></span><br><span class="line"><span class="keyword">let</span> myInput = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#my-input&#x27;</span>),</span><br><span class="line">    myTextarea = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#my-textarea&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    layui.<span class="title function_">use</span>([<span class="string">&#x27;form&#x27;</span>], <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> &#123;form,<span class="attr">jquery</span>: $&#125; = layui;</span><br><span class="line">        form.<span class="title function_">render</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 复制</span></span><br><span class="line">            $(<span class="string">&#x27;#copy&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                <span class="comment">// 让 文本域 文本选中</span></span><br><span class="line">                myTextarea.<span class="title function_">select</span>();</span><br><span class="line">                <span class="comment">// 执行复制，会触发 copy 事件监听</span></span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;copy&#x27;</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 剪切 ，会触发 cut 事件监听</span></span><br><span class="line">            $(<span class="string">&#x27;#cut&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                myTextarea.<span class="title function_">select</span>();</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;cut&#x27;</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">        </span><br><span class="line">            <span class="comment">// 粘贴 chrome不生效，需要用户授权 https 等未知条件限制【未查清楚】</span></span><br><span class="line">            $(<span class="string">&#x27;#paste&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                myInput.<span class="title function_">focus</span>()</span><br><span class="line">                <span class="variable language_">document</span>.<span class="title function_">execCommand</span>(<span class="string">&#x27;paste&#x27;</span>);</span><br><span class="line">            &#125;)</span><br><span class="line">    </span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><blockquote><p>它只能将选中的内容复制到剪贴板，无法向剪贴板任意写入内容。</p><p>其次，它是同步操作，如果复制/粘贴大量数据，页面会出现卡顿。有些浏览器还会跳出提示框，要求用户许可，这时在用户做出选择前，页面会失去响应。</p><p>为了解决这些问题，浏览器厂商提出了异步的 Clipboard API</p></blockquote><h4 id="2、异步-Clipboard-API"><a href="#2、异步-Clipboard-API" class="headerlink" title="2、异步 Clipboard API"></a>2、异步 Clipboard API</h4><blockquote><p>Clipboard API 是下一代的剪贴板操作方法，比传统的<code>document.execCommand()</code>方法更强大、更合理。</p><p>它的所有操作都是异步的，返回 Promise 对象，不会造成页面卡顿。而且，它可以将任意内容（比如图片）放入剪贴板。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Clipboard 对象提供了四个方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 此两种方法仅持支文本操作</span></span><br><span class="line">navigator.<span class="property">clipboard</span>.<span class="property">readText</span></span><br><span class="line">navigator.<span class="property">clipboard</span>.<span class="property">writeText</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可用于将任意数据写入剪贴板，可以是文本数据，也可以是二进制数据</span></span><br><span class="line">navigator.<span class="property">clipboard</span>.<span class="property">read</span></span><br><span class="line">navigator.<span class="property">clipboard</span>.<span class="property">write</span></span><br></pre></td></tr></table></figure><p>操作示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clipboardObj = navigator.<span class="property">clipboard</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制，但不会触发 copy 事件</span></span><br><span class="line">$(<span class="string">&#x27;#copy&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    clipboardObj.<span class="title function_">writeText</span>($(myTextarea).<span class="title function_">val</span>())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 剪切</span></span><br><span class="line">$(<span class="string">&#x27;#cut&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    clipboardObj.<span class="title function_">writeText</span>($(myTextarea).<span class="title function_">val</span>())</span><br><span class="line">    $(myTextarea).<span class="title function_">val</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 粘贴</span></span><br><span class="line">$(<span class="string">&#x27;#paste&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> clipboardObj.<span class="title function_">readText</span>();</span><br><span class="line">    $(myInput).<span class="title function_">val</span>(text)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>直接在代码中执行剪切板操作可能会报错，建议放在事件监听的回调函数中。</p><p>需要注意的是，脚本读取的总是当前页面的剪贴板。这带来的一个问题是，如果把相关的代码粘贴到开发者工具中直接运行，可能会报错，因为这时的当前页面是开发者工具的窗口，而不是网页页面。</p></blockquote><h4 id="3、监听-剪切板操作事件"><a href="#3、监听-剪切板操作事件" class="headerlink" title="3、监听 剪切板操作事件"></a>3、监听 剪切板操作事件</h4><blockquote><p>通过监听事件可以阻止用户的 默认操作， 实现 禁止 复制粘贴等功能</p></blockquote><p>操作示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># 禁止粘贴</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;paste&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"># 将复制的文本 字母转大写 再 存入剪切板</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;copy&#x27;</span>,  <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;copy:&#x27;</span>, e.<span class="property">clipboardData</span>);</span><br><span class="line">    <span class="comment">// 获取选中的文本，图片等其他资源获取不了</span></span><br><span class="line">    <span class="keyword">let</span> selection = <span class="variable language_">document</span>.<span class="title function_">getSelection</span>();</span><br><span class="line">    <span class="comment">// 文本内容转大写</span></span><br><span class="line">    event.<span class="property">clipboardData</span>.<span class="title function_">setData</span>(<span class="string">&#x27;text/plain&#x27;</span>, selection.<span class="title function_">toString</span>().<span class="title function_">toUpperCase</span>());</span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"># 同时写入 文本和图片。此时在表单中粘贴为文本，在微信中粘贴为图片</span><br><span class="line">$(<span class="string">&#x27;#copy2&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> image = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;../images/b2.png&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span> res.<span class="title function_">blob</span>())</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">new</span> <span class="title class_">Blob</span>([<span class="string">&#x27;Cute sleeping kitten&#x27;</span>], &#123;<span class="attr">type</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line">    <span class="keyword">const</span> item = <span class="keyword">new</span> <span class="title class_">ClipboardItem</span>(&#123;</span><br><span class="line">        <span class="string">&#x27;text/plain&#x27;</span>: text,</span><br><span class="line">        <span class="string">&#x27;image/png&#x27;</span>: image <span class="comment">// image 必须是 Blob 对象</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">await</span> clipboardObj.<span class="title function_">write</span>([item]);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"># 读取剪切板中的数据</span><br><span class="line">$(<span class="string">&#x27;#read&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 检测 浏览器是否支持 剪切板</span></span><br><span class="line">    <span class="keyword">let</span> flag = <span class="keyword">await</span> navigator.<span class="property">permissions</span>.<span class="title function_">query</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;clipboard-read&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">if</span> (flag.<span class="property">state</span> == <span class="string">&quot;granted&quot;</span> || flag.<span class="property">state</span> == <span class="string">&quot;prompt&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> clipboardItems = <span class="keyword">await</span> clipboardObj.<span class="title function_">read</span>()</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(clipboardItems);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> clipboardItem <span class="keyword">of</span> clipboardItems) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">const</span> type <span class="keyword">of</span> clipboardItem.<span class="property">types</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> blob = <span class="keyword">await</span> clipboardItem.<span class="title function_">getType</span>(type);</span><br><span class="line">                    <span class="comment">// 此处 blob 为 二进制对象</span></span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(type, <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob), blob);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">name</span>, err.<span class="property">message</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>本文借鉴了 阮一峰大佬的 <a href="https://www.ruanyifeng.com/blog/2021/01/clipboard-api.html">帖子</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;浏览器允许 JavaScript 脚本读写剪贴板，自动复制或粘贴内容。主要是用来操作文本、图片&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;有三种方式可操作剪切板&quot;&gt;&lt;a href=&quot;#有三种方式可操作剪切板&quot; class=&quot;headerlink&quot; title=&quot;有三种方式可操作剪切板&quot;&gt;&lt;/a&gt;有三种方式可操作剪切板&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Document.execCommand() 【此API已从W3C标准中删除】&lt;/li&gt;
&lt;li&gt;Clipboard API （推荐）&lt;/li&gt;
&lt;li&gt;事件监听 copy、paste、cut&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="htmlcss" scheme="https://wyf195075595.github.io/categories/htmlcss/"/>
    
    
  </entry>
  
  <entry>
    <title>图片懒加载</title>
    <link href="https://wyf195075595.github.io/2022/06/28/programming/htmlcss/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/"/>
    <id>https://wyf195075595.github.io/2022/06/28/programming/htmlcss/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/</id>
    <published>2022-06-28T07:04:10.000Z</published>
    <updated>2022-06-28T07:50:27.949Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>图片懒加载： 在页面长列表展示时（就说页面很长出现滚动条那种🤡），在页面不可见区域的图片资源默认不加载。当图片元素滚动到可视区域时再加载图片资源的这么个效果</p></blockquote><h3 id="实现方式："><a href="#实现方式：" class="headerlink" title="实现方式："></a>实现方式：</h3><ol><li><p>位置计算 + 滚动事件 (Scroll) + DataSet API</p><p> 通过对元素的位置属性 clientTop<code>，</code>offsetTop<code>，</code>clientHeight<code>以及</code>scrollTop等 再加上监听滚动条的事件来判断图片资源是否出现在可视区域</p></li><li><p>getBoundingClientRect API + Scroll with Throttle + DataSet API</p> <span id="more"></span><p> <strong><code>Element.getBoundingClientRect()</code> 方法返回元素的大小及其相对于视口的位置。</strong>此方式其实与第一种类似，只是借助了 <strong>getBoundingClientRect</strong> 方法 获取元素位置的值，简化了操作</p><p> 下面看一个示例：</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">// html 部分</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      * &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.demo</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.imgbox</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: fit-content;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid skyblue;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: fit-content;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">min-height</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2021/08/24/15/38/sand-6570980_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/02/21/19/06/drink-84533_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/07/18/20/26/sea-164989_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;4&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2017/03/26/21/54/yoga-2176668_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2021/08/24/15/38/sand-6570980_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/02/21/19/06/drink-84533_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/07/18/20/26/sea-164989_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;4&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2017/03/26/21/54/yoga-2176668_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2021/08/24/15/38/sand-6570980_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/02/21/19/06/drink-84533_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2013/07/18/20/26/sea-164989_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;4&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;imgbox&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">data-src</span>=<span class="string">&quot;https://cdn.pixabay.com/photo/2017/03/26/21/54/yoga-2176668_960_720.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;5&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js 部分</span></span><br><span class="line"></span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> demo = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">lazy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 遍历所有图片资源</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> demo) &#123;</span><br><span class="line">        <span class="comment">// 判断是否出现在可视区域</span></span><br><span class="line">        <span class="comment">// 图片距离可视区域顶部距离 &lt; 可视区域高度（文档节点可视高度）</span></span><br><span class="line">        <span class="keyword">if</span> ( elem.<span class="title function_">getBoundingClientRect</span>().<span class="property">top</span> &lt; <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span> ) &#123;</span><br><span class="line">          <span class="comment">// 没有 src 属性的图片 此时加载</span></span><br><span class="line">          <span class="keyword">if</span> (elem.<span class="property">dataset</span>.<span class="property">src</span> &amp;&amp; elem.<span class="property">src</span> == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            elem.<span class="property">src</span> = elem.<span class="property">dataset</span>.<span class="property">src</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 一个节流函数</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">t, fn</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> time;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!time) &#123;</span><br><span class="line">          time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            time = <span class="literal">null</span>;</span><br><span class="line">            <span class="title function_">fn</span>();</span><br><span class="line">          &#125;, t);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">lazy</span>();</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, <span class="title function_">throttle</span>(<span class="number">500</span>, lazy));</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>IntersectionObserver API + DataSet API</p><p> <strong><code>IntersectionObserver</code> API，一个能够监听元素是否到了当前视口的事件，一步到位！</strong> 此API 大大简化了上述一系列操作 监听滚动变化与判断是否出现在可视区域一把梭😊</p><p> 示例：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(<span class="function">(<span class="params">changes</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// changes: 目标元素集合</span></span><br><span class="line">        changes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">change</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(change.<span class="property">isIntersecting</span>);</span><br><span class="line">            <span class="comment">// intersectionRatio</span></span><br><span class="line">            <span class="keyword">if</span> (change.<span class="property">isIntersecting</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> img = change.<span class="property">target</span>;</span><br><span class="line">                img.<span class="property">src</span> = img.<span class="property">dataset</span>.<span class="property">src</span>;</span><br><span class="line">                <span class="comment">// 图片加载后注销监听</span></span><br><span class="line">                observer.<span class="title function_">unobserve</span>(img);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">threshold</span>: <span class="number">0.8</span> <span class="comment">// 元素百分之多少暴露在可视区域时才触发</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;img&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">img</span>=&gt;</span> &#123;</span><br><span class="line">        observer.<span class="title function_">observe</span>(img);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>LazyLoading 属性</p><p> 给需要懒加载的图片添加 loading=”lazy” ，浏览器自己做懒加载这件事。不过目前浏览器兼容性不太好</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;shanyue.jpg&quot;</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>结语：总的来看方案三最好使了，不过方案二兼容性比方案三好</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;图片懒加载： 在页面长列表展示时（就说页面很长出现滚动条那种🤡），在页面不可见区域的图片资源默认不加载。当图片元素滚动到可视区域时再加载图片资源的这么个效果&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;实现方式：&quot;&gt;&lt;a href=&quot;#实现方式：&quot; class=&quot;headerlink&quot; title=&quot;实现方式：&quot;&gt;&lt;/a&gt;实现方式：&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;位置计算 + 滚动事件 (Scroll) + DataSet API&lt;/p&gt;
&lt;p&gt; 通过对元素的位置属性 clientTop&lt;code&gt;，&lt;/code&gt;offsetTop&lt;code&gt;，&lt;/code&gt;clientHeight&lt;code&gt;以及&lt;/code&gt;scrollTop等 再加上监听滚动条的事件来判断图片资源是否出现在可视区域&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;getBoundingClientRect API + Scroll with Throttle + DataSet API&lt;/p&gt;</summary>
    
    
    
    <category term="htmlcss" scheme="https://wyf195075595.github.io/categories/htmlcss/"/>
    
    
  </entry>
  
</feed>
